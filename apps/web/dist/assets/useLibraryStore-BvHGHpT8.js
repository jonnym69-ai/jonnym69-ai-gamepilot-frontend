const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-2zxZw9Mw.js","assets/index-DdnCAQik.css"])))=>i.map(i=>d[i]);
import{_ as w,h as E,c as T,a as L,l as P}from"./index-2zxZw9Mw.js";const M=[{id:"action",name:"Action",description:"Fast-paced games emphasizing physical challenges",icon:"âš”ï¸",color:"from-red-500 to-orange-600",tags:["fast-paced","intense","reflexes","combat"]},{id:"adventure",name:"Adventure",description:"Games focused on exploration and storytelling",icon:"ðŸ—ºï¸",color:"from-green-500 to-emerald-600",tags:["exploration","story","discovery","puzzle"]},{id:"rpg",name:"RPG",description:"Role-playing games with character progression",icon:"ðŸ‰",color:"from-purple-500 to-pink-600",tags:["character-development","story-rich","strategy","fantasy"]},{id:"strategy",name:"Strategy",description:"Games requiring tactical thinking and planning",icon:"â™Ÿï¸",color:"from-blue-500 to-indigo-600",tags:["tactical","planning","resource-management","thinking"]},{id:"simulation",name:"Simulation",description:"Games that simulate real-world activities",icon:"ðŸ—ï¸",color:"from-yellow-500 to-amber-600",tags:["realistic","management","building","lifelike"]},{id:"sports",name:"Sports",description:"Games based on athletic competitions",icon:"âš½",color:"from-cyan-500 to-teal-600",tags:["competitive","athletic","team-based","physical"]},{id:"racing",name:"Racing",description:"Games focused on speed and vehicle control",icon:"ðŸŽï¸",color:"from-pink-500 to-rose-600",tags:["speed","vehicles","competition","precision"]},{id:"puzzle",name:"Puzzle",description:"Games that challenge problem-solving skills",icon:"ðŸ§©",color:"from-indigo-500 to-purple-600",tags:["brain-teaser","logic","problem-solving","clever"]},{id:"platformer",name:"Platformer",description:"Games involving jumping and navigating platforms",icon:"ðŸ¦˜",color:"from-orange-500 to-red-600",tags:["jumping","precision","navigation","skill-based"]},{id:"fps",name:"FPS",description:"First-person shooter games with perspective-based combat",icon:"ðŸŽ¯",color:"from-red-600 to-pink-700",tags:["shooting","first-person","combat","reflexes"]},{id:"moba",name:"MOBA",description:"Multiplayer online battle arena games",icon:"âš”ï¸",color:"from-purple-600 to-indigo-700",tags:["team-based","competitive","strategic","multiplayer"]},{id:"roguelike",name:"Roguelike",description:"Games with procedurally generated levels and permadeath",icon:"ðŸ’€",color:"from-gray-600 to-gray-800",tags:["procedural","challenging","randomized","permadeath"]},{id:"horror",name:"Horror",description:"Games designed to scare and unsettle players",icon:"ðŸ‘»",color:"from-gray-700 to-gray-900",tags:["scary","atmospheric","suspense","dark"]},{id:"indie",name:"Indie",description:"Games developed by independent creators",icon:"ðŸŽ¨",color:"from-lime-500 to-green-600",tags:["unique","creative","independent","experimental"]},{id:"casual",name:"Casual",description:"Easy-to-play games for relaxation",icon:"ðŸŒ¸",color:"from-pink-400 to-purple-500",tags:["relaxing","simple","accessible","time-filler"]},{id:"multiplayer",name:"Multiplayer",description:"Games designed for multiple players",icon:"ðŸ‘¥",color:"from-teal-500 to-cyan-600",tags:["social","teamwork","competitive","community"]}],z={Action:"action",Adventure:"adventure",RPG:"rpg",Strategy:"strategy",Simulation:"simulation",Sports:"sports",Racing:"racing",Indie:"indie",Casual:"casual","Massively Multiplayer":"multiplayer"},G={action:["adrenaline","competitive-drive","power-fantasy"],adventure:["immersive","wanderlust","deep-dive"],casual:["cozy","pick-up-and-play","calming"],fps:["adrenaline","tactical-mindset","competitive-drive"],horror:["atmospheric","survival-instinct","deep-dive"],indie:["creative-flow","atmospheric","immersive"],moba:["competitive-drive","strategic-depth","social-energy"],multiplayer:["social-energy","competitive-drive","pick-up-and-play"],platformer:["pick-up-and-play","brain-tickle","immersive"],puzzle:["brain-tickle","calming","strategic-depth"],rpg:["deep-dive","immersive","wanderlust"],racing:["adrenaline","competitive-drive","pick-up-and-play"],roguelike:["strategic-depth","survival-instinct","brain-tickle"],simulation:["cozy","calming","creative-flow"],sports:["adrenaline","competitive-drive","social-energy"],strategy:["strategic-depth","tactical-mindset","calming"]},x=a=>z[a]||"unknown",R=a=>G[a]||[],F=a=>{const t=a.genres?.map(r=>typeof r=="number"?["Action","Adventure","RPG","Strategy","Simulation","Sports","Indie","Casual","Racing","FPS","Horror","Puzzle","Platformer","MOBA","Roguelike","Multiplayer"][r]||"unknown":typeof r=="object"&&r.description?x(r.description):typeof r=="string"?x(r):"unknown")||[],e=t.length>0?t:["action"],o=Array.from(new Set(e.flatMap(r=>R(r)))),s=e.map(r=>({id:r,name:Object.values(M).find(i=>i.id===r)?.name||r,description:r+" games",icon:r,color:"#666",tags:[r],subgenres:[]}));return{id:a.appid?.toString()||a.steam_appid,title:a.name,description:a.short_description||"",backgroundImages:a.screenshots?.map(r=>r.path_full)||[],coverImage:a.header_image||a.img_logo_url||"",developer:a.developers?.map(r=>r.name)?.join(", ")||null,publisher:a.publishers?.map(r=>r.name)?.join(", ")||null,genres:s,subgenres:[],platforms:a.platforms||[],moods:o,playHistory:[],releaseYear:new Date(a.release_date).getFullYear(),appId:a.appid||a.steam_appid}};class ${cache=new Map;defaultTTL=1440*60*1e3;maxCacheSize=1e3;set(t,e,o){const s={data:e,timestamp:Date.now(),ttl:o||this.defaultTTL};this.cache.size>=this.maxCacheSize&&this.cleanup(),this.cache.set(t,s),console.log(`ðŸ“¦ Cached entry: ${t} (TTL: ${s.ttl}ms)`)}get(t){const e=this.cache.get(t);return e?Date.now()-e.timestamp>e.ttl?(this.cache.delete(t),console.log(`ðŸ—‘ï¸ Cache expired: ${t}`),null):(console.log(`âœ… Cache hit: ${t}`),e.data):null}has(t){const e=this.cache.get(t);return e?Date.now()-e.timestamp>e.ttl?(this.cache.delete(t),!1):!0:!1}delete(t){const e=this.cache.delete(t);return e&&console.log(`ðŸ—‘ï¸ Cache deleted: ${t}`),e}clear(){const t=this.cache.size;this.cache.clear(),console.log(`ðŸ§¹ Cache cleared: ${t} entries removed`)}cleanup(){const t=Date.now();let e=0;for(const[o,s]of this.cache.entries())t-s.timestamp>s.ttl&&(this.cache.delete(o),e++);if(this.cache.size>=this.maxCacheSize){const o=Array.from(this.cache.entries());o.sort((r,i)=>r[1].timestamp-i[1].timestamp);const s=o.slice(0,this.cache.size-this.maxCacheSize+100);for(const[r]of s)this.cache.delete(r),e++}e>0&&console.log(`ðŸ§¹ Cache cleanup: ${e} entries removed`)}getStats(){const t=Date.now(),e=Array.from(this.cache.entries()).map(([o,s])=>({key:o,age:t-s.timestamp,ttl:s.ttl}));return{size:this.cache.size,hitRate:0,entries:e}}setTTL(t,e){const o=this.cache.get(t);return o?(o.ttl=e,console.log(`â° TTL updated: ${t} (${e}ms)`),!0):!1}getKeysMatching(t){return Array.from(this.cache.keys()).filter(e=>t.test(e))}deleteMatching(t){const e=this.getKeysMatching(t);let o=0;for(const s of e)this.cache.delete(s)&&o++;return o>0&&console.log(`ðŸ—‘ï¸ Pattern delete: ${o} entries removed`),o}}const j=new $;setInterval(()=>{j.cleanup()},3600*1e3);const v={strategy:["strategic","challenging"],rts:["strategic","challenging"],"turn-based":["strategic","mindful"],"4x":["strategic","creative"],"grand strategy":["strategic","challenging"],"tower defense":["strategic"],action:["intense","action-packed","challenging"],fps:["intense","competitive","action-packed"],shooter:["intense","action-packed"],fighting:["intense","challenging","competitive"],"hack and slash":["intense","action-packed","challenging"],"beat em up":["intense","action-packed"],rpg:["story-rich","challenging"],"action rpg":["story-rich","intense"],jrpg:["story-rich","atmospheric"],mmorpg:["social","story-rich"],roguelike:["challenging","experimental"],roguelite:["challenging"],"left 4 dead":["social","cooperative","multiplayer"],"rocket league":["social","multiplayer","competitive"],rust:["social","multiplayer","survival"],dayz:["social","multiplayer","survival"],"apex legends":["social","multiplayer","competitive"],pubg:["social","multiplayer","battle royale"],fortnite:["social","multiplayer","battle royale"],overwatch:["social","multiplayer","team-based"],valheim:["social","multiplayer","cooperative"],"don't starve together":["social","multiplayer","cooperative"],squad:["social","multiplayer","team-based"],"hell let loose":["social","multiplayer","team-based"],battlebit:["social","multiplayer","competitive"],insurgency:["social","multiplayer","tactical"],"hunt: showdown":["social","multiplayer","competitive"],"crab game":["social","multiplayer","party"],"pummel party":["social","multiplayer","party"],terraria:["creative","sandbox","building"],minecraft:["creative","sandbox","building"],starbound:["creative","sandbox","building"],rimworld:["creative","sandbox","strategy"],"project zomboid":["creative","sandbox","survival"],"core keeper":["creative","sandbox","cooperative"],necesse:["creative","sandbox","building"],forager:["creative","sandbox","relaxing"],"garry's mod":["creative","sandbox","experimental"],unturned:["creative","sandbox","survival"],"7 days to die":["creative","sandbox","survival"],"the forest":["creative","sandbox","survival"],"stranded deep":["creative","sandbox","survival"],"green hell":["creative","sandbox","survival"],kenshi:["creative","sandbox","rpg"],"command & conquer":["nostalgic","retro","strategic"],"age of empires":["nostalgic","retro","strategic"],"company of heroes":["nostalgic","retro","strategic"],"star wars":["nostalgic","retro","story-rich"],batman:["nostalgic","retro","action-packed"],fallout:["nostalgic","retro","story-rich"],"dark souls":["nostalgic","retro","challenging"],"metal gear solid":["nostalgic","retro","story-rich"],"resident evil":["nostalgic","retro","horror"],mafia:["nostalgic","retro","story-rich"],lego:["nostalgic","retro","family"],"baldur's gate":["nostalgic","retro","rpg"],witcher:["nostalgic","retro","story-rich"],"god of war":["nostalgic","retro","action-packed"],simulation:["creative","relaxing"],management:["strategic","creative"],tycoon:["creative","strategic"],farming:["relaxing","creative"],multiplayer:["social","multiplayer"],"co-op":["social","cooperative"],cooperative:["social","cooperative"],online:["social","multiplayer"],party:["social","party"],team:["social","team-based"],"battle royale":["competitive","multiplayer"],building:["creative","building"],crafting:["creative","crafting"],sandbox:["creative","sandbox"],creative:["creative","artistic"],construction:["creative","building"],design:["creative","artistic"],retro:["nostalgic","retro"],classic:["nostalgic","classic"],remastered:["nostalgic","remastered"],throwback:["nostalgic","throwback"],"8-bit":["nostalgic","retro"],"16-bit":["nostalgic","retro"],pixel:["nostalgic","retro"],puzzle:["mindful","challenging"],"hidden object":["relaxing","mindful"],"match-3":["relaxing","mindful"],sokoban:["mindful","challenging"],adventure:["story-rich","atmospheric"],"point and click":["story-rich","mindful"],"visual novel":["story-rich","relaxing"],"walking simulator":["atmospheric","relaxing"],sports:["competitive","high-energy"],racing:["high-energy","competitive"],football:["competitive","social"],basketball:["competitive","high-energy"],soccer:["competitive","social"],wrestling:["intense","competitive","action-packed"],indie:["experimental"],experimental:["experimental"],family:["social"],educational:["mindful","creative"],music:["creative"],rhythm:["creative","high-energy"],horror:["gritty","atmospheric","challenging"],"survival horror":["challenging","gritty","intense"],thriller:["atmospheric","intense"],arcade:["high-energy","nostalgic"],"dating sim":["social","story-rich"],idle:["relaxing","creative"],clicker:["relaxing","mindful"],"text adventure":["story-rich","mindful"]},_={"left 4 dead":["social","cooperative","multiplayer"],"rocket league":["social","multiplayer","competitive"],rust:["social","multiplayer","survival"],dayz:["social","multiplayer","survival"],"apex legends":["social","multiplayer","competitive"],pubg:["social","multiplayer","battle royale"],fortnite:["social","multiplayer","battle royale"],overwatch:["social","multiplayer","team-based"],valheim:["social","multiplayer","cooperative"],"don't starve together":["social","multiplayer","cooperative"],squad:["social","multiplayer","team-based"],"hell let loose":["social","multiplayer","team-based"],battlebit:["social","multiplayer","competitive"],insurgency:["social","multiplayer","tactical"],"hunt: showdown":["social","multiplayer","competitive"],"crab game":["social","multiplayer","party"],"pummel party":["social","multiplayer","party"],terraria:["creative","sandbox","building"],minecraft:["creative","sandbox","building"],starbound:["creative","sandbox","building"],rimworld:["creative","sandbox","strategy"],"project zomboid":["creative","sandbox","survival"],"core keeper":["creative","sandbox","cooperative"],necesse:["creative","sandbox","building"],forager:["creative","sandbox","relaxing"],"garry's mod":["creative","sandbox","experimental"],unturned:["creative","sandbox","survival"],"7 days to die":["creative","sandbox","survival"],"the forest":["creative","sandbox","survival"],"stranded deep":["creative","sandbox","survival"],"green hell":["creative","sandbox","survival"],kenshi:["creative","sandbox","rpg"],"command & conquer":["nostalgic","retro","strategic"],"age of empires":["nostalgic","retro","strategic"],"company of heroes":["nostalgic","retro","strategic"],"star wars":["nostalgic","retro","story-rich"],batman:["nostalgic","retro","action-packed"],fallout:["nostalgic","retro","story-rich"],"dark souls":["nostalgic","retro","challenging"],"metal gear solid":["nostalgic","retro","story-rich"],"resident evil":["nostalgic","retro","horror"],mafia:["nostalgic","retro","story-rich"],lego:["nostalgic","retro","family"],"baldur's gate":["nostalgic","retro","rpg"],witcher:["nostalgic","retro","story-rich"],"god of war":["nostalgic","retro","action-packed"],civilization:["strategic","challenging"],stronghold:["strategic"],starcraft:["strategic","competitive"],warcraft:["strategic","social"],"total war":["strategic","challenging"],xcom:["strategic","challenging"],"call of duty":["intense","competitive"],battlefield:["intense","competitive"],doom:["intense","action-packed"],quake:["intense","action-packed"],halo:["action-packed","competitive"],wwe:["intense","competitive","action-packed"],wrestling:["intense","competitive","action-packed"],nba:["competitive","sports"],nfl:["competitive","sports"],fifa:["competitive","sports"],mlb:["competitive","sports"],skyrim:["story-rich","atmospheric"],"elden ring":["challenging","atmospheric"],"final fantasy":["story-rich","atmospheric"],"silent hill":["gritty","atmospheric"],amnesia:["gritty","atmospheric"],outlast:["gritty","intense"],"dead space":["gritty","intense","challenging"],"hollow knight":["challenging","atmospheric"],celeste:["challenging"],undertale:["story-rich","experimental"],cuphead:["challenging","nostalgic"],"dead cells":["challenging","intense"]},y=new Map;function N(a){`${a.title}${JSON.stringify(a.genres||[])}`;const t=Array.isArray(a.moods)?a.moods:[];let e=[];console.log(`ðŸ” DEBUG: Processing "${a.title}" - Genres:`,a.genres),console.log("ðŸ” DEBUG: Raw game data:",{title:a.title,genres:a.genres,steamAppId:a.steamAppId,rawGenreData:a.rawGenreData});const o=(a.title||"").toLowerCase();for(const[d,l]of Object.entries(_))o.includes(d)&&(e=[...e,...l],console.log(`ðŸŽ¯ DEBUG: Title pattern "${d}" matched for "${a.title}" - Added moods:`,l));{const d=Array.isArray(a.genres)?a.genres.map(g=>g?.name||g):[],l=d.filter(Boolean).map(g=>String(g).toLowerCase().trim().replace(/\s+/g," "));console.log(`ðŸŽ­ DEBUG: Extracted genres for "${a.title}":`,d);const c=e.length>0;for(const g of l){if(c&&(g==="indie"||g==="experimental"))continue;const p=v[g];if(p){e=[...e,...p],console.log(`ðŸŽ¯ DEBUG: Genre "${g}" matched for "${a.title}" - Added moods:`,p);continue}for(const[m,A]of Object.entries(v))g.includes(m)&&(e=[...e,...A],console.log(`ðŸŽ¯ DEBUG: Genre pattern "${m}" matched for "${a.title}" - Added moods:`,A))}}if(a.emotionalTags){const l=(Array.isArray(a.emotionalTags)?a.emotionalTags:[a.emotionalTags]).filter(Boolean).map(p=>String(p).toLowerCase().trim().replace(/\s+/g,"-")),c={chill:"relaxing",cozy:"relaxing",calm:"relaxing",focused:"strategic",energetic:"high-energy",energy:"high-energy"},g=l.map(p=>c[p]||p);g.length>0&&(e=[...e,...g.slice(0,2)])}let s=[];t.length===1&&t[0]==="relaxing"?s=e.length>0?e:["creative"]:t.length>1?s=[...t,...e]:t.length===1?s=[...t,...e]:s=e.length>0?e:["creative"];let r=[...new Set(s)].slice(0,4);const i=r.map(d=>String(d).toLowerCase());if(i.length===1&&i[0]==="experimental")if(a.emotionalTags&&Array.isArray(a.emotionalTags)&&a.emotionalTags.length>0){const d=a.emotionalTags.filter(Boolean).map(l=>String(l).toLowerCase().trim().replace(/\s+/g,"-")).slice(0,2);r=[...new Set([...d,...r])].slice(0,4)}else r=["creative",...r].slice(0,4);return console.log(`ðŸ§  DEBUG: Final moods for "${a.title}":`,r,`(Old: [${t.join(", ")}] â†’ New: [${e.join(", ")}])`),r}function ie(){y.clear(),console.log("ðŸ§¹ Mood cache cleared - games will be re-evaluated")}async function ne(a){const t=`${a.title}_${JSON.stringify(a.genres||[])}`;if(console.log(`ðŸ” DEBUG MOOD ASSIGNMENT for "${a.title}":`,{genres:a.genres,existingMoods:a.moods,cacheKey:t}),y.has(t)){const i=y.get(t);return console.log(`ðŸ“¦ Using cached moods for "${a.title}":`,i),i}let e=[];const o=(a.title||"").toLowerCase();for(const[i,n]of Object.entries(_))o.includes(i)&&(e=[...e,...n]);const s=Array.isArray(a.genres)?a.genres:[];for(const i of s){const n=typeof i=="string"?i:(i.name||i.id||"").toLowerCase();for(const[d,l]of Object.entries(v))n.includes(d)&&(e=[...e,...l])}if(e.length===0)try{e=await U(a)}catch(i){console.warn("Ollama mood assignment failed, using fallback:",i),e=["creative"]}const r=[...new Set(e)].slice(0,3);return y.set(t,r),console.log(`âœ… FINAL MOODS for "${a.title}":`,r),r.length>0?r:["creative"]}async function U(a){const t=`Analyze this game and assign 2-3 appropriate moods from this list: intense, strategic, relaxing, creative, high-energy, atmospheric, challenging, story-rich, competitive, social, experimental, mindful, nostalgic, gritty, surreal, action-packed.

Game Title: ${a.title}
Description: ${a.description||"No description available"}
Genres: ${Array.isArray(a.genres)?a.genres.map(e=>typeof e=="string"?e:e.name).join(", "):"No genres listed"}

Return only the moods as a JSON array, like: ["strategic", "challenging"]`;try{const e=await fetch("http://localhost:11434/api/generate",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({model:"llama3.2",prompt:t,stream:!1,format:"json"})});if(!e.ok)throw new Error(`Ollama request failed: ${e.status}`);const o=await e.json(),s=JSON.parse(o.response),r=["intense","strategic","relaxing","creative","high-energy","atmospheric","challenging","story-rich","competitive","social","experimental","mindful","nostalgic","gritty","surreal","action-packed"];return s.filter(i=>r.includes(i.toLowerCase()))}catch(e){throw console.error("Ollama mood assignment error:",e),e}}const C=["intense","strategic","relaxing","creative","high-energy","atmospheric","challenging","story-rich","competitive","social","experimental","mindful","nostalgic","gritty","surreal","action-packed","scary"],B=["all-genres","action","adventure","casual","fps","horror","indie","moba","multiplayer","platformer","puzzle","rpg","racing","roguelike","simulation","sports","strategy"];function h(a){if(!a)return"relaxing";if(Array.isArray(a))return h(a[0]);if(typeof a=="object"){const o=a.moodId??a.id??a.name??a.label;return o?h(o):"relaxing"}const t=String(a).toLowerCase().trim().replace(" ","-");return C.includes(t)?t:{calm:"relaxing",chill:"relaxing",peaceful:"relaxing",zen:"relaxing",create:"creative",building:"creative",tactical:"strategic",planning:"strategic",immersive:"atmospheric",difficult:"challenging",hard:"challenging","fast-paced":"high-energy",adrenaline:"high-energy",narrative:"story-rich",pvp:"competitive",versus:"competitive",multiplayer:"social","co-op":"social",retro:"nostalgic",classic:"nostalgic",action:"intense",intense:"intense",strategic:"strategic",relaxing:"relaxing",creative:"creative","high-energy":"high-energy",atmospheric:"atmospheric",challenging:"challenging","story-rich":"story-rich",competitive:"competitive",social:"social",experimental:"experimental",mindful:"mindful",nostalgic:"nostalgic",gritty:"gritty",surreal:"surreal","action-packed":"action-packed"}[t]||t}function q(a){if(!a)return"60";const t=a.toLowerCase();return t==="short"||t==="15"||t==="30"?"30":t==="medium"||t==="60"||t==="90"?"60":t==="long"||t==="120"||t==="180"?"120":t.replace(/\D/g,"")||"60"}function S(a){if(!a||typeof a!="object")return a;const t={...a};t.id=t.id?String(t.id).replace(/\D/g,""):"";try{const e=N(t);e&&e.length>0?(console.log(`ðŸ§  Smart moods assigned to "${a.title}":`,e),console.log(`ðŸ” OLD MOODS: ${a.moods} â†’ NEW MOODS: ${e}`),t.moods=e):(console.log(`âš ï¸ Smart mood assigner failed for "${a.title}", using fallback`),t.moods=I(t))}catch(e){console.error(`âŒ Error in smart mood assignment for "${a.title}":`,e),t.moods=I(t)}try{const e=(t.title||"").toLowerCase(),o=(t.description||"").toLowerCase(),s=Array.isArray(t.genres)?t.genres.map(n=>O(n)):[],r=[],i={action:["shoot","kill","war","battle","combat","fight","strike","call","duty","assassin","hitman","gun","weapon","battlefield","cod","counter","strike"],adventure:["tomb","raider","uncharted","journey","explor","island","legend","zelda","link","treasure","quest","adventure","mysterious","discover"],rpg:["rpg","role","fantasy","dragon","quest","dungeon","magic","wizard","final","fantasy","skyrim","the","witcher","divinity","baldur","gate","pathfinder"],strategy:["command","empire","civilization","total","war","age","starcraft","company","conquer","tactics","strategy","chess","turn","based"],simulation:["sim","tycoon","city","builder","manager","railroad","zoo","hospital","theme","park","farming","simulator","construction","management"],sports:["football","soccer","nba","fifa","madden","nfl","basketball","racing","drive","need","speed","tennis","golf","wrestling","boxing","hockey"],puzzle:["puzzle","match","candy","saga","tetris","sudoku","crossword","word","block","jewel","gem","brain","logic"],horror:["dead","resident","evil","silent","hill","outlast","fear","scary","dark","zombie","ghost","haunted","survival","horror"],racing:["racing","drive","speed","need","forza","gran","turismo","kart","motorcycle","rally","track","car"],indie:[],fps:["fps","first","person","shooter","arena","quake","doom","halo","destiny","overwatch"],platformer:["platform","jump","mario","sonic","megaman","crash","bandicoot","super","meat","boy"],roguelike:["roguelike","rogue","dungeon","crawler","random","procedural","perma","death","binding","slay"],survival:["survival","craft","minecraft","ark","rust","dayz","7","days","the","forest","wilderness"]};for(const[n,d]of Object.entries(i))d.some(l=>e.includes(l)||o.includes(l))&&(s.includes(n)||r.push(n));r.length>0&&(t.genres=[...s,...r.slice(0,2)],console.log(`ðŸŽ­ Enhanced genres for "${a.title}": Added ${r.join(", ")}`))}catch(e){console.error(`âŒ Error in genre enhancement for "${a.title}":`,e)}return t}function I(a){if(a.moods)return(Array.isArray(a.moods)?a.moods:[a.moods]).map(e=>h(e)).filter((e,o,s)=>e&&s.indexOf(e)===o);if(!a.moods||a.moods.length===0){const t=new Set;return(Array.isArray(a.genres)?a.genres:[]).forEach(o=>{const s=(typeof o=="string"?o:o.id||"").toLowerCase();(G[s]||[]).forEach(i=>t.add(h(i)))}),Array.from(t)}return a.moods||[]}function J(a){return Array.isArray(a)?a.map(t=>S(t)):[]}const H=h,O=a=>String(a).toLowerCase().trim(),Y=Object.freeze(Object.defineProperty({__proto__:null,CANONICAL_GENRES:B,CANONICAL_MOODS:C,normalizeGameObject:S,normalizeGamesArray:J,normalizeGenre:O,normalizeMood:H,normalizeMoodToCanonical:h,normalizeTimeKey:q},Symbol.toStringTag,{value:"Module"}));class u extends Error{constructor(t,e,o){super(e),this.type=t,this.details=o,this.name="SteamImportError"}}class K{static safeParseDate(t){if(!t)return null;try{const e=new Date(t);return isNaN(e.getTime())?(console.warn("Invalid date string:",t),null):e}catch(e){return console.warn("Date parsing error:",e),null}}static STEAM_API_BASE="https://api.steampowered.com/IPlayerService/GetOwnedGames/v0001/";static STEAM_STORE_BASE="https://store.steampowered.com/api/appdetails/";static BACKUP_API_BASE="/api/steam";static async retryWithBackoff(t,e=3,o=1e3){for(let s=1;s<=e;s++)try{return await t()}catch(r){if(s===e)throw r;const i=o*Math.pow(2,s-1),n=Math.random()*.1*i,d=i+n;console.warn(`Steam API attempt ${s} failed, retrying in ${Math.round(d)}ms:`,r),await new Promise(l=>setTimeout(l,d))}throw new Error("Max retries exceeded")}static async fetchOwnedGames(t,e){return this.retryWithBackoff(async()=>{try{console.log("ðŸ” Using backend Steam proxy:",{steamId:t});const{apiFetch:o}=await w(async()=>{const{apiFetch:n}=await import("./index-2zxZw9Mw.js").then(d=>d.o);return{apiFetch:n}},__vite__mapDeps([0,1])),s=await o(`api/steam/games/v2?steamId=${encodeURIComponent(t)}&apiKey=${encodeURIComponent(e)}`);if(!s.ok){const n=await s.json().catch(()=>({error:"Unknown error"}));throw s.status===400?new u("INVALID_STEAM_ID",n.message||"Invalid Steam ID","Please check your Steam ID"):s.status===401||s.status===403?new u("INVALID_API_KEY",n.message||"Invalid Steam API key","Please check your API key"):s.status===503?new u("STEAM_API_ERROR",n.message||"Steam API temporarily unavailable","Please try again later"):new Error(`Backend API error: ${s.status} - ${n.message||"Unknown error"}`)}const r=await s.json();console.log("ðŸ” Backend Steam proxy returned:",r);const i=r.data?.games||r.games||[];if(!Array.isArray(i))throw new u("INVALID_RESPONSE","Invalid response from backend API","Please try again");return i.filter(n=>n.name&&n.appid)}catch(o){throw o instanceof u?o:(console.error("ðŸ” Backend Steam proxy error:",o),new u("NETWORK_ERROR","Failed to connect to backend API","Please check your connection and try again"))}},3,1e3)}static async fetchGameDetails(t){return this.retryWithBackoff(async()=>{try{const e=`${this.STEAM_STORE_BASE}?appids=${t}&format=json`,r=(await(await fetch(e,{signal:AbortSignal.timeout(8e3)})).json())[t];return r&&r.success&&r.data?r.data:null}catch(e){return console.warn(`Failed to fetch details for app ${t}:`,e),null}},2,500)}static normalizeSteamGame(t,e){const o=new Date,s=Math.floor(t.playtime_forever/60),r=t.rtime_last_played?new Date(t.rtime_last_played*1e3):void 0;let i="unplayed";s>0&&(s<2||s<20?i="playing":s>=40?i="completed":i="playing");const n=e?.genres?.map(c=>({id:String(c.id).toLowerCase(),name:c.description,description:c.description,icon:"ðŸŽ®",color:"#8b5cf6",tags:[c.description.toLowerCase()]}))||[],d=e?.platforms?[...e.platforms.windows?[{id:"pc",name:"PC",code:"pc",isConnected:!1}]:[],...e.platforms.mac?[{id:"mac",name:"Mac",code:"mac",isConnected:!1}]:[],...e.platforms.linux?[{id:"linux",name:"Linux",code:"linux",isConnected:!1}]:[]]:[{id:"pc",name:"PC",code:"pc",isConnected:!1}];return S({title:t.name,description:e?.short_description||e?.about_the_game||"",backgroundImages:e?.header_image?[e.header_image]:[],coverImage:`https://cdn.akamai.steamstatic.com/steam/apps/${t.appid}/header.jpg`,releaseDate:this.safeParseDate(e?.release_date?.date)||o,developer:e?.developers?.[0]||"",publisher:e?.publishers?.[0]||"",genres:n,moods:[],platforms:d,emotionalTags:[],userRating:0,globalRating:e?.metacritic?.score||0,playStatus:i,hoursPlayed:s,lastPlayed:r,addedAt:o,notes:"",isFavorite:!1,tags:this.extractTagsFromDetails(e),releaseYear:this.safeParseDate(e?.release_date?.date)?.getFullYear()||o.getFullYear(),achievements:e?.achievements?{unlocked:0,total:e?.achievements?.total||0}:void 0,totalPlaytime:s*60,averagePlaytime:0,completionRate:0,completionPercentage:0,launcherId:t.appid,lastLocalPlayedAt:null,localSessionMinutes:0,localSessionCount:0})}static extractTagsFromDetails(t){if(!t)return[];const e=[];return t.categories&&t.categories.forEach(o=>{const s=o.description.toLowerCase();(s.includes("multiplayer")||s.includes("co-op"))&&e.push("multiplayer"),s.includes("single-player")&&e.push("single-player"),s.includes("steam")&&e.push("steam"),s.includes("achievement")&&e.push("achievements"),s.includes("trading cards")&&e.push("trading")}),t.genres&&t.genres.forEach(o=>{const s=o.description.toLowerCase();s.includes("action")&&e.push("action"),s.includes("adventure")&&e.push("adventure"),s.includes("rpg")&&e.push("rpg"),s.includes("strategy")&&e.push("strategy"),s.includes("simulation")&&e.push("simulation"),s.includes("sports")&&e.push("sports"),s.includes("racing")&&e.push("racing")}),t.is_free&&e.push("free-to-play"),[...new Set(e)]}static async importSteamLibrary(t,e){try{const o=await E(`api/steam/library/${encodeURIComponent(t)}`);if(!o.ok)throw new Error(`Backend API error: ${o.status}`);const s=await o.json();return s.games&&Array.isArray(s.games)?s.games.map(r=>{const i=r.appid||r.appId||r.steamAppId,n=r.imgLogoUrl||r.imgHeaderUrl||r.coverImage||`https://cdn.akamai.steamstatic.com/steam/apps/${i}/header.jpg`||`https://cdn.akamai.steamstatic.com/steam/apps/${i}/library_600x900.jpg`||`https://cdn.akamai.steamstatic.com/steam/apps/${i}/capsule_184x69.jpg`,d=r.categories||[];let l=d.map(m=>m.description).filter(Boolean);if(d.some(m=>m.description.toLowerCase().includes("multiplayer"))&&l.push("Multiplayer"),d.some(m=>m.description.toLowerCase().includes("single-player"))&&l.push("Single Player"),d.some(m=>m.description.toLowerCase().includes("co-op"))&&l.push("Co-op"),l.length===0){const m=r.name.toLowerCase();(m.includes("zombie")||m.includes("dead")||m.includes("resident evil"))&&l.push("Horror","Survival"),(m.includes("rpg")||m.includes("witcher")||m.includes("elder scrolls"))&&l.push("RPG"),(m.includes("shooter")||m.includes("counter-strike")||m.includes("call of duty"))&&l.push("Shooter"),(m.includes("strategy")||m.includes("command")||m.includes("company of heroes"))&&l.push("Strategy"),(m.includes("racing")||m.includes("rocket league"))&&l.push("Racing"),(m.includes("sports")||m.includes("football")||m.includes("wwe"))&&l.push("Sports"),(m.includes("adventure")||m.includes("tomb")||m.includes("assassin"))&&l.push("Adventure"),(m.includes("puzzle")||m.includes("portal"))&&l.push("Puzzle"),(m.includes("simulation")||m.includes("simulator"))&&l.push("Simulation"),l.length===0&&l.push("Action")}const c=d.slice(0,3).map(m=>({id:String(m.id).toLowerCase(),name:m.description,description:m.description,icon:"ðŸŽ®",color:"#8b5cf6",tags:[m.description.toLowerCase()]})),g=Math.floor((r.playtimeForever||0)/60);let p="unplayed";return g>0&&(g<2||g<20?p="playing":g>=40?p="completed":p="playing"),{title:r.name,description:r.shortDescription||"",backgroundImages:r.backgroundImages||[],coverImage:n,releaseDate:this.safeParseDate(r.releaseDate)||new Date,developer:r.developer||"",publisher:r.publisher||"",genres:c,moods:[],platforms:[{id:"steam",name:"Steam",code:"steam",isConnected:!0}],emotionalTags:[],userRating:void 0,globalRating:r.metacriticScore?r.metacriticScore:void 0,playStatus:p,hoursPlayed:g,lastPlayed:r.lastPlayed?new Date(r.lastPlayed):void 0,addedAt:new Date,notes:"",isFavorite:!1,tags:l,releaseYear:this.safeParseDate(r.releaseDate)?.getFullYear()||new Date().getFullYear(),achievements:r.achievements?{unlocked:r.achievements.unlocked||0,total:r.achievements.total||0}:void 0,totalPlaytime:g,averageRating:void 0,completionPercentage:void 0,appId:i}}):[]}catch(o){return console.error("Failed to import Steam library via backend:",o),[]}}}class W{constructor(){}getAuthHeaders(){return{Accept:"application/json"}}async makeRequest(t,e={}){const o=await E(t,{...e,headers:{...this.getAuthHeaders(),...e.headers}});if(!o.ok){const s=await o.json().catch(()=>({}));throw new Error(s.error||`HTTP ${o.status}: ${o.statusText}`)}return o.json()}async getUserGames(){try{return await this.makeRequest("api/games/user")}catch(t){return console.error("GameApiService: getUserGames error:",t),{success:!1,error:t instanceof Error?t.message:"Unknown error"}}}async upsertGames(t){try{return await this.makeRequest("api/games/bulk",{method:"POST",body:JSON.stringify({games:t})})}catch(e){return console.error("GameApiService: upsertGames error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}async launchGame(t,e){try{return await this.makeRequest("api/launcher/launch",{method:"POST",body:JSON.stringify({gameId:t,platformCode:e})})}catch(o){return console.error("GameApiService: launchGame error:",o),{success:!1,error:o instanceof Error?o.message:"Unknown error"}}}async endSession(t){try{return await this.makeRequest("api/launcher/end-session",{method:"POST",body:JSON.stringify({sessionId:t})})}catch(e){return console.error("GameApiService: endSession error:",e),{success:!1,error:e instanceof Error?e.message:"Unknown error"}}}}const V=new W,k="gamepilot_library",f=a=>{try{localStorage.setItem(k,JSON.stringify(a)),console.log("ðŸ’¾ Library saved to localStorage as backup")}catch(t){console.warn("Failed to save library to localStorage:",t)}},D=()=>{try{const a=localStorage.getItem(k);if(a){const t=JSON.parse(a);return console.log("ðŸ“‚ Library loaded from localStorage backup:",t.length),t}}catch(a){console.warn("Failed to load library from localStorage:",a)}return null},Q=async(a,t,e=!1)=>{const{setIsLoading:o}=b.getState(),{setGames:s}=b.getState().actions;let r=[];try{o(!0),console.log("ðŸ” useLibraryStore: Calling SteamService.fetchOwnedGames with:",{steamId:a,apiKey:t,forceReimport:e});const i=await K.fetchOwnedGames(a,t);console.log("ðŸ” useLibraryStore: SteamService returned:",i),console.log("ðŸ” useLibraryStore: Number of games from Steam API:",i.length);const n=i.map(d=>{const l=F(d);return console.log("ðŸ” Steam Import - Game:",l?.title||l?.name||"Unknown"),console.log("ðŸ” Steam Import - Assigned moods:",l?.moods||[]),console.log("ðŸ” Steam Import - Genres:",l?.genres?.map(c=>typeof c=="string"?c:c.name)||[]),{...l,id:void 0}});console.log("ðŸ” useLibraryStore: Upserting games to database via API");try{const{apiFetch:d}=await w(async()=>{const{apiFetch:g}=await import("./index-2zxZw9Mw.js").then(p=>p.o);return{apiFetch:g}},__vite__mapDeps([0,1]));console.log("ðŸ” useLibraryStore: About to call apiFetch with gamesForUpsert length:",n.length),console.log("ðŸ” useLibraryStore: First game sample:",JSON.stringify(n[0],null,2));const l=await d("api/launcher/upsert-games",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});console.log("ðŸ” useLibraryStore: API response status:",l.status),console.log("ðŸ” useLibraryStore: API response ok:",l.ok);const c=await l.json();if(console.log("ðŸ” useLibraryStore: API response result:",c),c.success&&c.data){const g=c.data.games;console.log("ðŸ” useLibraryStore: Successfully saved games to database:",g.length),r=[...r,...g],localStorage.setItem("games_library",JSON.stringify(r)),console.log("ðŸ” useLibraryStore: Games saved to database and localStorage:",r.length)}else throw console.warn("ðŸ” useLibraryStore: Database save failed, result:",c),new Error(c.error||"Database save failed")}catch(d){console.warn("ðŸ” useLibraryStore: API call failed, detailed error:",d),console.warn("ðŸ” useLibraryStore: API error type:",typeof d),d instanceof Error&&(console.warn("ðŸ” useLibraryStore: API error message:",d.message),console.warn("ðŸ” useLibraryStore: API error stack:",d.stack));const l=n.map(c=>({id:`local_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:c.title||c.name,description:c.description,coverImage:c.coverImage||c.cover,backgroundImages:c.backgroundImages||(c.background?[c.background]:[]),developer:null,publisher:null,genres:c.genres||[],subgenres:[],platforms:c.platforms||[],emotionalTags:c.emotionalTags||[],userRating:null,globalRating:null,playStatus:"backlog",hoursPlayed:c.hoursPlayed||0,addedAt:new Date().toISOString(),notes:null,isFavorite:!1,tags:[],moods:c.moods||[],playHistory:[],releaseYear:c.releaseYear||new Date().getFullYear(),achievements:{},totalPlaytime:null,averageRating:null,completionPercentage:null,appId:c.appid||c.id}));r=[...r,...l],localStorage.setItem("games_library",JSON.stringify(r)),console.log("ðŸ” useLibraryStore: Games saved locally as fallback:",l.length)}return{success:r.length>0,gameCount:r.length,games:r}}catch(i){throw console.error("ðŸ” useLibraryStore: Steam import failed:",i),i instanceof Error?(console.error("ðŸ” useLibraryStore: Error message:",i.message),console.error("ðŸ” useLibraryStore: Error stack:",i.stack)):typeof i=="object"&&i!==null?console.error("ðŸ” useLibraryStore: Error object details:",JSON.stringify(i,null,2)):console.error("ðŸ” useLibraryStore: Error type:",typeof i,"value:",i),new Error(i instanceof Error?i.message:typeof i=="string"?i:"Steam import failed: Unknown error")}finally{o(!1),r.length>0&&(console.log("ðŸ” useLibraryStore: Setting games in store:",r.length),s(r))}},b=T()((a,t)=>({games:[],currentSession:null,isLoading:!1,hasLoaded:!1,filters:{genre:null,platform:null,status:null,search:""},intelligence:{selectedMood:"",selectedMasterMood:"",selectedSessionLength:"",selectedGenres:[],selectedSorting:"",preferredGenres:[],preferredMoods:[],preferredSessionStyle:null},setIsLoading:e=>a({isLoading:e}),setHasLoaded:e=>a({hasLoaded:e}),setGames:e=>a({games:e,hasLoaded:!0}),actions:{addGame:e=>{a(o=>{const s=o.games.find(n=>n.id===e.id),r=o.games.find(n=>n.appId===e.appId);if(s||r)return o;const i=[...o.games,e];return f(i),{games:i}})},removeGame:e=>{a(o=>{const s=o.games.filter(r=>r.id!==e);return f(s),{games:s}})},updateGame:(e,o)=>{a(s=>{const r=s.games.map(i=>i.id===e?{...i,...o}:i);return f(r),{games:r}})},bulkUpdateStatus:(e,o)=>{a(s=>({games:s.games.map(r=>e.includes(r.id)?{...r,playStatus:o}:r)}))},bulkExport:()=>{const e=JSON.stringify(t().games,null,2),o=new Blob([e],{type:"application/json"}),s=URL.createObjectURL(o),r=document.createElement("a");r.href=s,r.download="game-library.json",r.click(),URL.revokeObjectURL(s)},bulkImport:e=>{const o=e.map(s=>({...s,id:crypto.randomUUID(),addedAt:new Date}));a(s=>({games:[...s.games,...o]}))},importSteamLibrary:Q,bulkAddToCategory:(e,o)=>{a(s=>({games:s.games.map(r=>e.includes(r.id)?{...r,tags:Array.from(new Set([...r.tags||[],o]))}:r)}))},deduplicateGames:()=>{a(e=>({games:e.games.filter((s,r,i)=>r===i.findIndex(n=>n.title.toLowerCase()===s.title.toLowerCase()))}))},bulkDelete:e=>{a(o=>({games:o.games.filter(s=>!e.includes(s.id))}))},launchGame:async e=>{console.log("ðŸ”§ Frontend Store - launchGame called with gameId:",e),console.log("ðŸ”§ DEBUG: Store games count:",t().games.length),console.log("ðŸ”§ DEBUG: Sample game IDs:",t().games.slice(0,3).map(i=>({id:i.id,appId:i.appId,title:i.title})));let o=t().games.find(i=>i.id===e);if(!o&&(console.log("ðŸ”§ Frontend Store - Game not found by ID, trying appId lookup"),o=t().games.find(i=>i.appId?.toString()===e),!o)){console.log("ðŸ”§ DEBUG: Game not found, checking all games..."),t().games.forEach((i,n)=>{n<5&&console.log(`ðŸ”§ DEBUG: Game ${n}: id=${i.id}, appId=${i.appId}, title=${i.title}`)}),console.error("ðŸ”§ Frontend Store - Game not found at all!");return}const r=o.platforms.find(i=>i.code==="steam")?"steam":void 0;console.log("ðŸ”§ Frontend Store - About to call personaEngineService.launchGameWithPersonaTracking"),console.log("ðŸ”§ Frontend Store - Game data:",o.title,o.appId);try{const i=await L.launchGameWithPersonaTracking(e,o);console.log("ðŸ”§ Frontend Store - Persona engine result:",i),i.success&&i.data&&a({currentSession:{gameId:o.id,startedAt:Date.now()}})}catch(i){console.error("ðŸ”§ Frontend Store - Persona engine failed:",i);try{console.log("ðŸ”§ Frontend Store - Trying fallback launcher service");const n=await P.launchGame(e,r);console.log("ðŸ”§ Frontend Store - Launcher service result:",n),n.success&&n.data&&a({currentSession:{gameId:o.id,startedAt:Date.now()}})}catch(n){console.error("ðŸ”§ Frontend Store - Fallback launch also failed:",n)}}},endCurrentSession:async()=>{const e=t();if(e.currentSession)try{await L.endSessionWithPersonaTracking(void 0,e.currentSession.gameId);const o=Date.now()-e.currentSession.startedAt,s=Math.floor(o/6e4);a(r=>({games:r.games.map(i=>i.id===r.currentSession?.gameId?{...i,hoursPlayed:(i.hoursPlayed||0)+s/60,lastPlayed:new Date}:i),currentSession:null}))}catch(o){console.error("Failed to end session with persona tracking:",o);try{await P.endSession(void 0,e.currentSession.gameId);const s=Date.now()-e.currentSession.startedAt,r=Math.floor(s/6e4);a(i=>({games:i.games.map(n=>n.id===i.currentSession?.gameId?{...n,hoursPlayed:(n.hoursPlayed||0)+r/60,lastPlayed:new Date}:n),currentSession:null}))}catch(s){console.error("Fallback session end also failed:",s),a({currentSession:null})}}},setFilter:(e,o)=>{a(s=>({filters:{...s.filters,[e]:o}}))},clearFilters:()=>{a({filters:{genre:null,platform:null,status:null,search:""}})},setGames:e=>{const o=e.map(s=>({...s,tags:s.tags||[]}));a({games:o,hasLoaded:!0}),f(o)},updateGameStatus:(e,o)=>{a(s=>({games:s.games.map(r=>r.id===e?{...r,playStatus:o}:r)}))},updateGamePlaytime:(e,o)=>{a(s=>({games:s.games.map(r=>r.id===e?{...r,hoursPlayed:o}:r)}))},setHasLoaded:e=>a({hasLoaded:e}),clearCacheAndRefresh:async()=>{console.log("ðŸ§¹ Clearing cache and refreshing..."),localStorage.removeItem(k),console.log("ðŸ—‘ï¸ localStorage cleared"),a({games:[],hasLoaded:!1,isLoading:!1,currentSession:null}),await t().actions.loadGames(!0),console.log("ðŸ”„ Fresh data loaded from API")},loadGames:async(e=!1)=>{if(!e&&t().hasLoaded){console.log("ðŸŽ® Library already loaded, skipping...");return}try{t().setIsLoading(!0),console.log("ðŸ” Store: Calling getUserGames API...");const o=await V.getUserGames();if(console.log("ðŸ” Store: API response:",o),o.success&&o.data){o.data.games&&o.data.games.length>0&&console.log("ðŸ” Raw game object from API:",JSON.stringify(o.data.games[0],null,2));const s=o.data.games.map(n=>({...n,name:n.title||n.name,steamData:{short_description:n.description,genres:n.genres?.map(d=>typeof d=="object"&&d.description?{description:d.description}:typeof d=="string"?{description:d}:{description:String(d)})||[],categories:n.categories||[],steam_appid:n.appId}})),{normalizeGamesArray:r}=await w(async()=>{const{normalizeGamesArray:n}=await Promise.resolve().then(()=>Y);return{normalizeGamesArray:n}},void 0),i=r(s);t().actions.setGames(i),f(i),console.log("ðŸŽ® Loaded and normalized user games:",i.length),console.log("ðŸ’¾ Fresh API data saved to localStorage")}else{console.error("Failed to load user games:",o.error);const s=D();s&&s.length>0&&(console.log("âš ï¸ Using localStorage fallback due to API failure"),t().actions.setGames(s))}t().setHasLoaded(!0)}catch(o){console.error("Failed to load games:",o);const s=D();s&&s.length>0?(t().actions.setGames(s),console.log("ðŸŽ® Loaded games from localStorage fallback after error:",s.length)):t().actions.setGames([]),t().setHasLoaded(!0)}finally{t().setIsLoading(!1)}}},setIntelligenceState:e=>{a(o=>({intelligence:{...o.intelligence,...e}}))}})),X=(a,t)=>{console.log("ðŸ” Filter Debug - Selected mood:",t),console.log("ðŸ” Filter Debug - Available games:",a.length);const e=a.filter(o=>{const s=o.moods&&o.moods.length>0&&o.moods.includes(t);return console.log(`ðŸ” Filter Debug - Game "${o.title}":`,{moods:o.moods,hasMood:s,genres:o.genres?.map(r=>r.name)||[]}),s});return console.log("ðŸ” Filter Debug - Filtered games:",e.length),e},Z=(a,t)=>{console.log("ðŸ” Filter Debug - Selected genre:",t),console.log("ðŸ” Filter Debug - Available games:",a.length);const e=a.filter(o=>{const s=o.genres&&o.genres.length>0&&o.genres.some(r=>(typeof r=="string"?r:r.name).toLowerCase()===t.toLowerCase());return console.log(`ðŸ” Filter Debug - Game "${o.title}":`,{genres:o.genres?.map(r=>typeof r=="string"?r:r.name)||[],hasGenre:s}),s});return console.log("ðŸ” Filter Debug - Filtered games:",e.length),e},ee=(a,t)=>a.filter(e=>e.platforms.some(o=>o.name.toLowerCase()===t.toLowerCase())),te=(a,t)=>a.filter(e=>e.playStatus===t),re=(a,t)=>{const e=t.toLowerCase();return a.filter(o=>o.title.toLowerCase().includes(e)||o.description?.toLowerCase().includes(e)||o.tags?.some(s=>s.toLowerCase().includes(e)))},ae=(a,t,e,o)=>{const s=r=>{let i=0;if(t.length>0){const n=Array.isArray(r.genres)?r.genres:[];t.some(l=>n.some(c=>(typeof c=="string"?c:c.name||c.description||"").toLowerCase()===l.toLowerCase()))&&(i+=30)}if(e.length>0){const n=Array.isArray(r.moods)?r.moods:[];e.some(l=>n.some(c=>(typeof c=="string"?c:c.name||c.moodId||"").toLowerCase()===l.toLowerCase()))&&(i+=40)}if(i+=r.globalRating||0,r.lastPlayed){const n=new Date(r.lastPlayed).getTime();(Date.now()-n)/(1e3*60*60*24)<7&&(i+=20)}return i};return[...a].map(r=>({game:r,score:s(r)})).sort((r,i)=>i.score-r.score).map(r=>r.game)},oe=a=>[...a].sort((t,e)=>{if((e.globalRating||0)!==(t.globalRating||0))return(e.globalRating||0)-(t.globalRating||0);const o=t.lastPlayed?new Date(t.lastPlayed).getTime():0;return(e.lastPlayed?new Date(e.lastPlayed).getTime():0)-o}),le=Object.freeze(Object.defineProperty({__proto__:null,filterByGenre:Z,filterByMood:X,filterByPlatform:ee,filterByStatus:te,getRecommendedGames:ae,getTrendingGames:oe,searchGames:re,useLibraryStore:b},Symbol.toStringTag,{value:"Module"}));export{M as G,ne as a,le as b,ie as c,Y as d,J as n,b as u};
