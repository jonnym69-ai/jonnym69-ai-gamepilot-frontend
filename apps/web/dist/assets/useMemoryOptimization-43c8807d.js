var u=Object.defineProperty;var h=(t,r,e)=>r in t?u(t,r,{enumerable:!0,configurable:!0,writable:!0,value:e}):t[r]=e;var i=(t,r,e)=>(h(t,typeof r!="symbol"?r+"":r,e),e);import{r as a}from"./index-db369dc9.js";function b(t,r={}){const e=a.useRef(null),c=a.useRef(new Set);return a.useEffect(()=>(e.current=new IntersectionObserver(t,{threshold:.1,rootMargin:"50px",...r}),()=>{e.current&&(e.current.disconnect(),e.current=null),c.current.clear()}),[t,r]),{observe:s=>{e.current&&s&&(e.current.observe(s),c.current.add(s))},unobserve:s=>{e.current&&s&&(e.current.unobserve(s),c.current.delete(s))}}}class f{constructor(r=50){i(this,"cache",new Map);i(this,"maxSize");this.maxSize=r}get(r){const e=this.cache.get(r);return e?(this.cache.delete(r),this.cache.set(r,e),e):null}set(r,e){if(this.cache.size>=this.maxSize){const c=this.cache.keys().next().value;c&&this.cache.delete(c)}this.cache.set(r,e)}clear(){this.cache.clear()}size(){return this.cache.size}}const o=new f;function m(t){return new Promise((r,e)=>{const c=o.get(t);if(c){r(c);return}const n=new Image;n.onload=()=>{o.set(t,n),r(n)},n.onerror=e,n.src=t})}export{m as p,b as u};
