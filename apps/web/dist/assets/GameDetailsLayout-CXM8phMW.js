import{r as B,n as ye,R as ae,e as Ye,j as e,u as Fe,m as C}from"./index-2zxZw9Mw.js";import{u as Ge}from"./useLibraryStore-BvHGHpT8.js";import{P as c}from"./platforms-F_h9JJJP.js";import{g as qe,M as Ve}from"./masterMoods-YBYEbnnW.js";import{u as Be,b as ne}from"./useCurrentMood-DCnI8z6_.js";function ze(r){const{games:t,intelligence:s}=Ge(),a=Be();return B.useMemo(()=>{try{const n=t.find(h=>h.id===r);if(!n)return console.warn(`Game ${r} not found in library`),ne({signals:ve(),moodEntry:a});const o=He(n);return ne({signals:o,moodEntry:a})}catch(n){return console.warn(`Game persona calculation failed for ${r}, using fallback:`,n),ne({signals:ve(),moodEntry:a})}},[t,s,r,a])}function He(r){const t={},s=r.hoursPlayed||0;s>0&&[...r.genres||[],...r.subgenres||[]].forEach(y=>{t[y]=s});const a=45,n=1,h=r.tags?.some(p=>p.toLowerCase().includes("multiplayer")||p.toLowerCase().includes("co-op")||p.toLowerCase().includes("pvp")||p.toLowerCase().includes("online"))||r.genres?.some(p=>p.toLowerCase().includes("multiplayer")||p.toLowerCase().includes("mmorpg"))?1:0;let f=.3;r.playStatus==="completed"?f=1:r.playStatus==="playing"?f=.5:r.playStatus==="backlog"&&(f=.1);let m="Normal";const i=r.tags?.filter(p=>p.toLowerCase().includes("hard")||p.toLowerCase().includes("difficult")||p.toLowerCase().includes("challenging")||p.toLowerCase().includes("brutal")),d=r.genres?.filter(p=>p.toLowerCase().includes("roguelike")||p.toLowerCase().includes("souls")||p.toLowerCase().includes("hardcore"));(i.length>0||d.length>0)&&(m="Hard");const u=r.tags?.filter(p=>p.toLowerCase().includes("casual")||p.toLowerCase().includes("relaxed")||p.toLowerCase().includes("easy")),v=r.genres?.filter(p=>p.toLowerCase().includes("casual")||p.toLowerCase().includes("puzzle")||p.toLowerCase().includes("simulation"));return(u.length>0||v.length>0)&&(m="Relaxed"),{playtimeByGenre:t,averageSessionLengthMinutes:a,sessionsPerWeek:n,difficultyPreference:m,multiplayerRatio:h,lateNightRatio:.2,completionRate:f}}function ve(){return{playtimeByGenre:{},averageSessionLengthMinutes:60,sessionsPerWeek:1,difficultyPreference:"Normal",multiplayerRatio:.5,lateNightRatio:.2,completionRate:.5}}const L={[c.RETROARCH]:[".zip",".7z",".rar",".nes",".snes",".gb",".gbc",".gba",".nds",".n64",".psx",".ps2",".iso",".bin",".cue"],[c.DOLPHIN]:[".iso",".gcz",".gcm",".wbfs",".wad",".rvz"],[c.PROJECT64]:[".z64",".n64",".v64",".rom",".zip"],[c.PCSX2]:[".iso",".bin",".img",".mds",".z"],[c.RPCS3]:[".iso",".bin",".img",".ps3"],[c.CEMU]:[".wud",".wux",".iso",".rpx"],[c.YUZU]:[".nsp",".xci",".nca"],[c.RYUJINX]:[".nsp",".xci",".nca"],[c.MAME]:[".zip",".7z",".chd",".cue",".bin"],[c.DOSBOX]:[".exe",".com",".bat",".conf"],[c.SCUMMVM]:[".scummvm",".exe",".com"],[c.VITA3K]:[".vpk",".zip"],[c.XEMU]:[".iso",".xiso",".cso",".z"],[c.MELONDS]:[".nds",".zip",".7z"],[c.PPSSPP]:[".iso",".cso",".pbp",".elf"],[c.CITRA]:[".3ds",".3dsx",".cia",".cxi"],[c.DESMUME]:[".nds",".zip"],[c.STEAM]:[],[c.XBOX]:[],[c.PLAYSTATION]:[],[c.NINTENDO]:[],[c.EPIC]:[],[c.GOG]:[],[c.ORIGIN]:[],[c.UPLAY]:[],[c.BATTLENET]:[],[c.DISCORD]:[],[c.ITCH]:[],[c.HUMBLE]:[],[c.CUSTOM]:[]},ie=[{platform:c.RETROARCH,name:"RetroArch",romExtensions:L[c.RETROARCH],supportedSystems:["NES","SNES","GB","GBC","GBA","N64","PS1","Genesis","Arcade"],defaultArgs:["--fullscreen"]},{platform:c.DOLPHIN,name:"Dolphin",romExtensions:L[c.DOLPHIN],supportedSystems:["GameCube","Wii"],defaultArgs:["-b","-e"]},{platform:c.PROJECT64,name:"Project64",romExtensions:L[c.PROJECT64],supportedSystems:["Nintendo 64"],defaultArgs:[]},{platform:c.PCSX2,name:"PCSX2",romExtensions:L[c.PCSX2],supportedSystems:["PlayStation 2"],defaultArgs:["--fullscreen"]},{platform:c.CEMU,name:"Cemu",romExtensions:L[c.CEMU],supportedSystems:["Wii U"],defaultArgs:["-f"]},{platform:c.YUZU,name:"Yuzu",romExtensions:L[c.YUZU],supportedSystems:["Nintendo Switch"],defaultArgs:[]},{platform:c.RYUJINX,name:"Ryujinx",romExtensions:L[c.RYUJINX],supportedSystems:["Nintendo Switch"],defaultArgs:[]},{platform:c.MAME,name:"MAME",romExtensions:L[c.MAME],supportedSystems:["Arcade"],defaultArgs:[]},{platform:c.DOSBOX,name:"DOSBox",romExtensions:L[c.DOSBOX],supportedSystems:["DOS"],defaultArgs:[]},{platform:c.SCUMMVM,name:"ScummVM",romExtensions:L[c.SCUMMVM],supportedSystems:["Point & Click Adventure"],defaultArgs:["--fullscreen"]},{platform:c.PPSSPP,name:"PPSSPP",romExtensions:L[c.PPSSPP],supportedSystems:["PlayStation Portable"],defaultArgs:[]},{platform:c.CITRA,name:"Citra",romExtensions:L[c.CITRA],supportedSystems:["Nintendo 3DS"],defaultArgs:[]},{platform:c.DESMUME,name:"DeSmuME",romExtensions:L[c.DESMUME],supportedSystems:["Nintendo DS"],defaultArgs:[]}];class We{async scanDirectory(t,s){const a={games:[],errors:[],scannedFiles:0,foundGames:0};try{const n=await this.getFilesInDirectory(t);a.scannedFiles=n.length;const o=s||Object.keys(L);for(const h of n){const f=this.getFileExtension(h.name),m=this.detectPlatformForExtension(f,o);if(m){const i=await this.createGameFromRom(h,m);a.games.push(i),a.foundGames++}}}catch(n){a.errors.push(`Failed to scan directory: ${n}`)}return a}async getFilesInDirectory(t){return new DataTransfer().files}getFileExtension(t){const s=t.lastIndexOf(".");return s!==-1?t.substring(s).toLowerCase():""}detectPlatformForExtension(t,s){for(const a of s){const n=L[a];if(n&&n.includes(t))return a}return null}async createGameFromRom(t,s){const a=ie.find(m=>m.platform===s),n=t.name.replace(/\.[^/.]+$/,""),o=this.extractGameMetadata(n);return{...{id:`${s}-${t.name}`,title:o.title||n,description:o.description||`A ${a?.supportedSystems[0]||s} game`,platforms:[{code:s,name:a?.name||s,icon:`/platforms/${s}.png`}],genres:o.genres||[],tags:o.tags||["Retro",a?.supportedSystems[0]||"Emulated"],coverImage:o.coverImage||"/assets/default-rom-cover.jpg",playStatus:"unplayed",isFavorite:!1,addedAt:new Date,hoursPlayed:0,userRating:void 0,globalRating:void 0,releaseYear:o.releaseYear,subgenres:[],emotionalTags:[]},romPath:t.path||"",emulatorConfig:a,fileSize:t.size}}extractGameMetadata(t){const s=t.replace(/\((USA|EUR|JPN|World|NTSC|PAL)\)/gi,"").replace(/\(Rev\s*[0-9]+\)/gi,"").replace(/\[.*?\]/g,"").replace(/\.(v[0-9]+|Rev\s*[0-9]+|Beta|Alpha|Demo)/gi,"").trim(),a=s.match(/\((19|20)\d{2}\)/),n=a?parseInt(a[0].slice(1,-1)):void 0;return{title:s.replace(/\(\d{4}\)/g,"").trim(),releaseYear:n,tags:["Retro","Emulated"]}}getEmulatorConfig(t){return ie.find(s=>s.platform===t)}getSupportedPlatforms(){return ie.map(t=>t.platform)}isEmulatorPlatform(t){return this.getSupportedPlatforms().includes(t)}}const ge=new We;class Xe{configs=new Map;setConfigs(t){this.configs.clear(),t.forEach(s=>{this.configs.set(s.platform,s)})}async launchGame(t,s={}){const a={success:!1,launchedAt:new Date};try{const n=t.platforms?.[0]?.code;if(!n||!ge.isEmulatorPlatform(n))return a.error="Game is not an emulator game",a;const o=this.configs.get(n);if(!o||!o.executablePath)return a.error=`Emulator not configured for ${n}`,a;const h=t.romPath||s.romPath;if(!h)return a.error="ROM path not found",a;const f=this.buildLaunchCommand(o,h,s),m=await this.executeLaunchCommand(f);a.success=!0,a.processId=m}catch(n){a.error=`Failed to launch game: ${n}`,console.error("Launch error:",n)}return a}buildLaunchCommand(t,s,a){const n=[t.executablePath];if(t.defaultArgs&&n.push(...t.defaultArgs),a.customArgs&&n.push(...a.customArgs),a.fullscreen){const o=this.getFullscreenArg(t.platform);o&&n.push(o)}return n.push(s),n}getFullscreenArg(t){return{[c.RETROARCH]:"--fullscreen",[c.DOLPHIN]:"-b",[c.PROJECT64]:"--fullscreen",[c.PCSX2]:"--fullscreen",[c.CEMU]:"-f",[c.YUZU]:"--fullscreen",[c.RYUJINX]:"--fullscreen",[c.MAME]:"--fullscreen",[c.DOSBOX]:"--fullscreen",[c.SCUMMVM]:"--fullscreen",[c.PPSSPP]:"--fullscreen",[c.CITRA]:"--fullscreen",[c.DESMUME]:"--fullscreen",[c.STEAM]:"",[c.XBOX]:"",[c.PLAYSTATION]:"",[c.NINTENDO]:"",[c.EPIC]:"",[c.GOG]:"",[c.ORIGIN]:"",[c.UPLAY]:"",[c.BATTLENET]:"",[c.DISCORD]:"",[c.ITCH]:"",[c.HUMBLE]:"",[c.CUSTOM]:"",[c.RPCS3]:"",[c.VITA3K]:"",[c.XEMU]:"",[c.MELONDS]:""}[t]||null}async executeLaunchCommand(t){try{console.log("üéÆ Launching emulator:",t.join(" ")),await new Promise(a=>setTimeout(a,1e3));const s=`emu_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return console.log("‚úÖ Emulator launched with PID:",s),s}catch(s){throw console.error("‚ùå Failed to launch emulator:",s),new Error(`Failed to launch emulator: ${s}`)}}isConfigured(t){const s=this.configs.get(t);return!!(s&&s.executablePath)}getConfiguredEmulators(){return Array.from(this.configs.keys()).filter(t=>this.isConfigured(t))}async testEmulator(t){const s={success:!1,launchedAt:new Date};try{const a=this.configs.get(t);if(!a||!a.executablePath)return s.error=`Emulator not configured for ${t}`,s;const n=[a.executablePath,"--help"],o=await this.executeLaunchCommand(n);s.success=!0,s.processId=o}catch(a){s.error=`Failed to test emulator: ${a}`}return s}getLaunchCommandPreview(t,s={}){const a=t.platforms?.[0]?.code;if(!a||!ge.isEmulatorPlatform(a))return[];const n=this.configs.get(a);if(!n)return[];const o=t.romPath||s.romPath||"<ROM_PATH>";return this.buildLaunchCommand(n,o,s)}}const Qe=new Xe;var oe={exports:{}},le,be;function Je(){if(be)return le;be=1;var r="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return le=r,le}var ce,Ne;function Ze(){if(Ne)return ce;Ne=1;var r=Je();function t(){}function s(){}return s.resetWarningCache=t,ce=function(){function a(h,f,m,i,d,u){if(u!==r){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}a.isRequired=a;function n(){return a}var o={array:a,bigint:a,bool:a,func:a,number:a,object:a,string:a,symbol:a,any:a,arrayOf:n,element:a,elementType:a,instanceOf:n,node:a,objectOf:n,oneOf:n,oneOfType:n,shape:n,exact:n,checkPropTypes:s,resetWarningCache:t};return o.PropTypes=o,o},ce}var je;function Ke(){return je||(je=1,oe.exports=Ze()()),oe.exports}var $e=Ke();const A=ye($e);var de,we;function et(){return we||(we=1,de=function r(t,s){if(t===s)return!0;if(t&&s&&typeof t=="object"&&typeof s=="object"){if(t.constructor!==s.constructor)return!1;var a,n,o;if(Array.isArray(t)){if(a=t.length,a!=s.length)return!1;for(n=a;n--!==0;)if(!r(t[n],s[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===s.source&&t.flags===s.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===s.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===s.toString();if(o=Object.keys(t),a=o.length,a!==Object.keys(s).length)return!1;for(n=a;n--!==0;)if(!Object.prototype.hasOwnProperty.call(s,o[n]))return!1;for(n=a;n--!==0;){var h=o[n];if(!r(t[h],s[h]))return!1}return!0}return t!==t&&s!==s}),de}var tt=et();const rt=ye(tt);var W={exports:{}},ue,Pe;function st(){if(Pe)return ue;Pe=1;var r;return r=function(){var t={},s={};return t.on=function(a,n){var o={name:a,handler:n};return s[a]=s[a]||[],s[a].unshift(o),o},t.off=function(a){var n=s[a.name].indexOf(a);n!==-1&&s[a.name].splice(n,1)},t.trigger=function(a,n){var o=s[a],h;if(o)for(h=o.length;h--;)o[h].handler(n)},t},ue=r,ue}var X={exports:{}},me,Se;function at(){if(Se)return me;Se=1,me=function(n,o,h){var f=document.head||document.getElementsByTagName("head")[0],m=document.createElement("script");typeof o=="function"&&(h=o,o={}),o=o||{},h=h||function(){},m.type=o.type||"text/javascript",m.charset=o.charset||"utf8",m.async="async"in o?!!o.async:!0,m.src=n,o.attrs&&r(m,o.attrs),o.text&&(m.text=""+o.text);var i="onload"in m?t:s;i(m,h),m.onload||t(m,h),f.appendChild(m)};function r(a,n){for(var o in n)a.setAttribute(o,n[o])}function t(a,n){a.onload=function(){this.onerror=this.onload=null,n(null,a)},a.onerror=function(){this.onerror=this.onload=null,n(new Error("Failed to load "+this.src),a)}}function s(a,n){a.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,n(null,a))}}return me}var Ce;function nt(){return Ce||(Ce=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var s=at(),a=n(s);function n(o){return o&&o.__esModule?o:{default:o}}t.default=function(o){var h=new Promise(function(f){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){f(window.YT);return}else{var m=window.location.protocol==="http:"?"http:":"https:";(0,a.default)(m+"//www.youtube.com/iframe_api",function(d){d&&o.trigger("error",d)})}var i=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){i&&i(),f(window.YT)}});return h},r.exports=t.default})(X,X.exports)),X.exports}var Q={exports:{}},J={exports:{}},Z={exports:{}},pe,Ee;function it(){if(Ee)return pe;Ee=1;var r=1e3,t=r*60,s=t*60,a=s*24,n=a*365.25;pe=function(i,d){d=d||{};var u=typeof i;if(u==="string"&&i.length>0)return o(i);if(u==="number"&&isNaN(i)===!1)return d.long?f(i):h(i);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(i))};function o(i){if(i=String(i),!(i.length>100)){var d=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(i);if(d){var u=parseFloat(d[1]),v=(d[2]||"ms").toLowerCase();switch(v){case"years":case"year":case"yrs":case"yr":case"y":return u*n;case"days":case"day":case"d":return u*a;case"hours":case"hour":case"hrs":case"hr":case"h":return u*s;case"minutes":case"minute":case"mins":case"min":case"m":return u*t;case"seconds":case"second":case"secs":case"sec":case"s":return u*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return u;default:return}}}}function h(i){return i>=a?Math.round(i/a)+"d":i>=s?Math.round(i/s)+"h":i>=t?Math.round(i/t)+"m":i>=r?Math.round(i/r)+"s":i+"ms"}function f(i){return m(i,a,"day")||m(i,s,"hour")||m(i,t,"minute")||m(i,r,"second")||i+" ms"}function m(i,d,u){if(!(i<d))return i<d*1.5?Math.floor(i/d)+" "+u:Math.ceil(i/d)+" "+u+"s"}return pe}var Ae;function ot(){return Ae||(Ae=1,(function(r,t){t=r.exports=n.debug=n.default=n,t.coerce=m,t.disable=h,t.enable=o,t.enabled=f,t.humanize=it(),t.names=[],t.skips=[],t.formatters={};var s;function a(i){var d=0,u;for(u in i)d=(d<<5)-d+i.charCodeAt(u),d|=0;return t.colors[Math.abs(d)%t.colors.length]}function n(i){function d(){if(d.enabled){var u=d,v=+new Date,p=v-(s||v);u.diff=p,u.prev=s,u.curr=v,s=v;for(var y=new Array(arguments.length),P=0;P<y.length;P++)y[P]=arguments[P];y[0]=t.coerce(y[0]),typeof y[0]!="string"&&y.unshift("%O");var E=0;y[0]=y[0].replace(/%([a-zA-Z%])/g,function(R,M){if(R==="%%")return R;E++;var T=t.formatters[M];if(typeof T=="function"){var N=y[E];R=T.call(u,N),y.splice(E,1),E--}return R}),t.formatArgs.call(u,y);var j=d.log||t.log||console.log.bind(console);j.apply(u,y)}}return d.namespace=i,d.enabled=t.enabled(i),d.useColors=t.useColors(),d.color=a(i),typeof t.init=="function"&&t.init(d),d}function o(i){t.save(i),t.names=[],t.skips=[];for(var d=(typeof i=="string"?i:"").split(/[\s,]+/),u=d.length,v=0;v<u;v++)d[v]&&(i=d[v].replace(/\*/g,".*?"),i[0]==="-"?t.skips.push(new RegExp("^"+i.substr(1)+"$")):t.names.push(new RegExp("^"+i+"$")))}function h(){t.enable("")}function f(i){var d,u;for(d=0,u=t.skips.length;d<u;d++)if(t.skips[d].test(i))return!1;for(d=0,u=t.names.length;d<u;d++)if(t.names[d].test(i))return!0;return!1}function m(i){return i instanceof Error?i.stack||i.message:i}})(Z,Z.exports)),Z.exports}var Te;function lt(){return Te||(Te=1,(function(r,t){var s={};t=r.exports=ot(),t.log=o,t.formatArgs=n,t.save=h,t.load=f,t.useColors=a,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:m(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function a(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(i){try{return JSON.stringify(i)}catch(d){return"[UnexpectedJSONParseError]: "+d.message}};function n(i){var d=this.useColors;if(i[0]=(d?"%c":"")+this.namespace+(d?" %c":" ")+i[0]+(d?"%c ":" ")+"+"+t.humanize(this.diff),!!d){var u="color: "+this.color;i.splice(1,0,u,"color: inherit");var v=0,p=0;i[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(v++,y==="%c"&&(p=v))}),i.splice(p,0,u)}}function o(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function h(i){try{i==null?t.storage.removeItem("debug"):t.storage.debug=i}catch{}}function f(){var i;try{i=t.storage.debug}catch{}return!i&&typeof process<"u"&&"env"in process&&(i=s.DEBUG),i}t.enable(f());function m(){try{return window.localStorage}catch{}}})(J,J.exports)),J.exports}var K={exports:{}},Re;function ct(){return Re||(Re=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],r.exports=t.default})(K,K.exports)),K.exports}var $={exports:{}},Me;function dt(){return Me||(Me=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],r.exports=t.default})($,$.exports)),$.exports}var ee={exports:{}},te={exports:{}},ke;function ut(){return ke||(ke=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},r.exports=t.default})(te,te.exports)),te.exports}var Ie;function mt(){return Ie||(Ie=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var s=ut(),a=n(s);function n(o){return o&&o.__esModule?o:{default:o}}t.default={pauseVideo:{acceptableStates:[a.default.ENDED,a.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[a.default.ENDED,a.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[a.default.ENDED,a.default.PLAYING,a.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},r.exports=t.default})(ee,ee.exports)),ee.exports}var Le;function pt(){return Le||(Le=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var s=lt(),a=d(s),n=ct(),o=d(n),h=dt(),f=d(h),m=mt(),i=d(m);function d(p){return p&&p.__esModule?p:{default:p}}var u=(0,a.default)("youtube-player"),v={};v.proxyEvents=function(p){var y={},P=function(k){var D="on"+k.slice(0,1).toUpperCase()+k.slice(1);y[D]=function(U){u('event "%s"',D,U),p.trigger(k,U)}},E=!0,j=!1,R=void 0;try{for(var M=f.default[Symbol.iterator](),T;!(E=(T=M.next()).done);E=!0){var N=T.value;P(N)}}catch(_){j=!0,R=_}finally{try{!E&&M.return&&M.return()}finally{if(j)throw R}}return y},v.promisifyPlayer=function(p){var y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P={},E=function(D){y&&i.default[D]?P[D]=function(){for(var U=arguments.length,G=Array(U),O=0;O<U;O++)G[O]=arguments[O];return p.then(function(Y){var q=i.default[D],H=Y.getPlayerState(),l=Y[D].apply(Y,G);return q.stateChangeRequired||Array.isArray(q.acceptableStates)&&q.acceptableStates.indexOf(H)===-1?new Promise(function(g){var x=function b(){var w=Y.getPlayerState(),I=void 0;typeof q.timeout=="number"&&(I=setTimeout(function(){Y.removeEventListener("onStateChange",b),g()},q.timeout)),Array.isArray(q.acceptableStates)&&q.acceptableStates.indexOf(w)!==-1&&(Y.removeEventListener("onStateChange",b),clearTimeout(I),g())};Y.addEventListener("onStateChange",x)}).then(function(){return l}):l})}:P[D]=function(){for(var U=arguments.length,G=Array(U),O=0;O<U;O++)G[O]=arguments[O];return p.then(function(Y){return Y[D].apply(Y,G)})}},j=!0,R=!1,M=void 0;try{for(var T=o.default[Symbol.iterator](),N;!(j=(N=T.next()).done);j=!0){var _=N.value;E(_)}}catch(k){R=!0,M=k}finally{try{!j&&T.return&&T.return()}finally{if(R)throw M}}return P},t.default=v,r.exports=t.default})(Q,Q.exports)),Q.exports}var _e;function ht(){return _e||(_e=1,(function(r,t){Object.defineProperty(t,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(u){return typeof u}:function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},a=st(),n=i(a),o=nt(),h=i(o),f=pt(),m=i(f);function i(u){return u&&u.__esModule?u:{default:u}}var d=void 0;t.default=function(u){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,y=(0,n.default)();if(d||(d=(0,h.default)(y)),v.events)throw new Error("Event handlers cannot be overwritten.");if(typeof u=="string"&&!document.getElementById(u))throw new Error('Element "'+u+'" does not exist.');v.events=m.default.proxyEvents(y);var P=new Promise(function(j){if((typeof u>"u"?"undefined":s(u))==="object"&&u.playVideo instanceof Function){var R=u;j(R)}else d.then(function(M){var T=new M.Player(u,v);return y.on("ready",function(){j(T)}),null})}),E=m.default.promisifyPlayer(P,p);return E.on=y.on,E.off=y.off,E},r.exports=t.default})(W,W.exports)),W.exports}var gt=ht();const ft=ye(gt);var xt=Object.defineProperty,yt=Object.defineProperties,vt=Object.getOwnPropertyDescriptors,Oe=Object.getOwnPropertySymbols,bt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable,De=(r,t,s)=>t in r?xt(r,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):r[t]=s,fe=(r,t)=>{for(var s in t||(t={}))bt.call(t,s)&&De(r,s,t[s]);if(Oe)for(var s of Oe(t))Nt.call(t,s)&&De(r,s,t[s]);return r},xe=(r,t)=>yt(r,vt(t)),jt=(r,t,s)=>new Promise((a,n)=>{var o=m=>{try{f(s.next(m))}catch(i){n(i)}},h=m=>{try{f(s.throw(m))}catch(i){n(i)}},f=m=>m.done?a(m.value):Promise.resolve(m.value).then(o,h);f((s=s.apply(r,t)).next())});function wt(r,t){var s,a;if(r.videoId!==t.videoId)return!0;const n=((s=r.opts)==null?void 0:s.playerVars)||{},o=((a=t.opts)==null?void 0:a.playerVars)||{};return n.start!==o.start||n.end!==o.end}function Ue(r={}){return xe(fe({},r),{height:0,width:0,playerVars:xe(fe({},r.playerVars),{autoplay:0,start:0,end:0})})}function Pt(r,t){return r.videoId!==t.videoId||!rt(Ue(r.opts),Ue(t.opts))}function St(r,t){var s,a,n,o;return r.id!==t.id||r.className!==t.className||((s=r.opts)==null?void 0:s.width)!==((a=t.opts)==null?void 0:a.width)||((n=r.opts)==null?void 0:n.height)!==((o=t.opts)==null?void 0:o.height)||r.iframeClassName!==t.iframeClassName||r.title!==t.title}var Ct={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},Et={videoId:A.string,id:A.string,className:A.string,iframeClassName:A.string,style:A.object,title:A.string,loading:A.oneOf(["lazy","eager"]),opts:A.objectOf(A.any),onReady:A.func,onError:A.func,onPlay:A.func,onPause:A.func,onEnd:A.func,onStateChange:A.func,onPlaybackRateChange:A.func,onPlaybackQualityChange:A.func},re=class extends ae.Component{constructor(r){super(r),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var s,a;return(a=(s=this.props).onReady)==null?void 0:a.call(s,t)},this.onPlayerError=t=>{var s,a;return(a=(s=this.props).onError)==null?void 0:a.call(s,t)},this.onPlayerStateChange=t=>{var s,a,n,o,h,f,m,i;switch((a=(s=this.props).onStateChange)==null||a.call(s,t),t.data){case re.PlayerState.ENDED:(o=(n=this.props).onEnd)==null||o.call(n,t);break;case re.PlayerState.PLAYING:(f=(h=this.props).onPlay)==null||f.call(h,t);break;case re.PlayerState.PAUSED:(i=(m=this.props).onPause)==null||i.call(m,t);break}},this.onPlayerPlaybackRateChange=t=>{var s,a;return(a=(s=this.props).onPlaybackRateChange)==null?void 0:a.call(s,t)},this.onPlayerPlaybackQualityChange=t=>{var s,a;return(a=(s=this.props).onPlaybackQualityChange)==null?void 0:a.call(s,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=xe(fe({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=ft(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(s=>{this.props.title&&s.setAttribute("title",this.props.title),this.props.loading&&s.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(s=>{this.props.id?s.setAttribute("id",this.props.id):s.removeAttribute("id"),this.props.iframeClassName?s.setAttribute("class",this.props.iframeClassName):s.removeAttribute("class"),this.props.opts&&this.props.opts.width?s.setAttribute("width",this.props.opts.width.toString()):s.removeAttribute("width"),this.props.opts&&this.props.opts.height?s.setAttribute("height",this.props.opts.height.toString()):s.removeAttribute("height"),this.props.title?s.setAttribute("title",this.props.title):s.setAttribute("title","YouTube video player"),this.props.loading?s.setAttribute("loading",this.props.loading):s.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,s,a,n;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let o=!1;const h={videoId:this.props.videoId};if((s=this.props.opts)!=null&&s.playerVars&&(o=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(h.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(h.endSeconds=this.props.opts.playerVars.end)),o){(a=this.internalPlayer)==null||a.loadVideoById(h);return}(n=this.internalPlayer)==null||n.cueVideoById(h)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(r){return jt(this,null,function*(){St(r,this.props)&&this.updatePlayer(),Pt(r,this.props)&&(yield this.resetPlayer()),wt(r,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return ae.createElement("div",{className:this.props.className,style:this.props.style},ae.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},se=re;se.propTypes=Et;se.defaultProps=Ct;se.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var At=se;const Tt=({game:r,onTrailerUpdate:t,onAutoDetect:s,isDetecting:a})=>{const{showSuccess:n,showError:o}=Ye(),[h,f]=B.useState(!1),[m,i]=B.useState(""),[d,u]=B.useState(!1),[v,p]=B.useState(!1),y=B.useRef(null),P=N=>{const _=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,k=N.match(_);return k&&k[2].length===11?k[2]:null},E=()=>r.trailerUrl?P(r.trailerUrl):null,j=()=>{if(!P(m)){o("Invalid YouTube URL. Please enter a valid YouTube video URL.");return}u(!0),setTimeout(()=>{t?.(m),i(""),f(!1),u(!1),n("Trailer added successfully!")},1e3)},R=N=>{const _=N.target.files?.[0];if(_&&_.type==="text/plain"){const k=new FileReader;k.onload=D=>{const U=D.target?.result;i(U.trim())},k.readAsText(_)}},M=N=>{console.warn("YouTube player error:",N),p(!0),o("YouTube player failed to load. You can still add a trailer URL manually.")},T=E();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-black",children:[T&&!v?e.jsx(At,{videoId:T,opts:{playerVars:{autoplay:0,controls:1,modestbranding:1,rel:0,showinfo:0,fs:1,cc_load_policy:1,iv_load_policy:3},width:"100%",height:"100%"},onReady:N=>{N.target.pauseVideo()},onError:M,className:"w-full h-full",containerClassName:"w-full h-full"}):v?e.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-gaming-dark to-gaming-darker",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"‚ö†Ô∏è"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"YouTube Player Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The YouTube player failed to load. This might be due to network restrictions or browser settings."}),e.jsx("button",{onClick:()=>p(!1),className:"px-6 py-3 bg-gaming-primary hover:bg-gaming-primary/80 text-white rounded-lg font-medium transition-all",children:"Retry Loading"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-gaming-dark to-gaming-darker",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üé¨"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Trailer Available"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Add a YouTube trailer to enhance this game's presentation"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>f(!0),className:"px-6 py-3 bg-gaming-primary hover:bg-gaming-primary/80 text-white rounded-lg font-medium transition-all",children:"Add Trailer"}),s&&e.jsx("button",{onClick:s,disabled:a,className:"px-6 py-3 bg-gaming-secondary hover:bg-gaming-secondary/80 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all",children:a?"üîç Detecting...":"üîç Auto-Detect"})]})]})}),h&&e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-gaming-surface border border-gaming-border rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Add Game Trailer"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gaming-text mb-2",children:"YouTube URL"}),e.jsx("input",{type:"text",value:m,onChange:N=>i(N.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full p-3 bg-gaming-surface border border-gaming-border rounded text-gaming-text placeholder-gray-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gaming-border"}),e.jsx("span",{className:"text-xs text-gaming-text-muted",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gaming-border"})]}),e.jsxs("div",{children:[e.jsx("input",{ref:y,type:"file",accept:".txt",onChange:R,className:"hidden",title:"Upload trailer URL file","aria-label":"Upload trailer URL file (.txt)"}),e.jsx("button",{onClick:()=>y.current?.click(),className:"w-full p-3 bg-gaming-surface border border-gaming-border rounded text-gaming-text hover:bg-gaming-surface/80 transition-all",children:"üìÑ Import from File"}),e.jsx("p",{className:"text-xs text-gaming-text-muted mt-1",children:"Upload a .txt file containing the YouTube URL"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:j,disabled:!m.trim()||d,className:"flex-1 px-4 py-2 bg-gaming-primary hover:bg-gaming-primary/80 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all",children:d?"Adding...":"Add Trailer"}),e.jsx("button",{onClick:()=>{f(!1),i("")},className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-all",children:"Cancel"})]}),e.jsx("div",{className:"mt-4 p-3 bg-gaming-surface/50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-gaming-text-muted",children:["üí° ",e.jsx("strong",{children:"Tip:"})," Find official trailers on YouTube or game developer websites. Smaller indie games often have trailers that aren't automatically detected."]})})]})})]}),T&&!h&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gaming-text-muted",children:"üé¨ Trailer from YouTube"}),e.jsx("button",{onClick:()=>f(!0),className:"px-3 py-1 bg-gaming-surface hover:bg-gaming-surface/80 border border-gaming-border text-gaming-text rounded-lg text-sm transition-all",children:"Change Trailer"})]})]})};var Rt={};class he{static API_KEY=Rt.REACT_APP_YOUTUBE_API_KEY;static BASE_URL="https://www.googleapis.com/youtube/v3";static async searchGameTrailer(t){try{const s=[`${t} official trailer`,`${t} gameplay trailer`,`${t} trailer`,`${t} game`];for(const a of s){const n=await this.searchVideos(a,1);if(n.length>0)return n[0]}return null}catch(s){return console.warn("YouTube search failed:",s),null}}static async searchVideos(t,s=5){return this.mockSearch(t,s)}static mockSearch(t,s){return new Promise(a=>{setTimeout(()=>{a([{videoId:"dQw4w9WgXcQ",title:"Official Game Trailer",channel:"Game Developer",thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/hqdefault.jpg",url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ"}].slice(0,s))},500)})}static extractVideoId(t){const s=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,a=t.match(s);return a&&a[2].length===11?a[2]:null}static getThumbnailUrl(t,s="default"){return`https://img.youtube.com/vi/${t}/${{default:"default",medium:"mqdefault",high:"hqdefault",maxres:"maxresdefault"}[s]}.jpg`}static isValidYouTubeUrl(t){return this.extractVideoId(t)!==null}}async function Mt(r){if(r.trailerUrl&&he.isValidYouTubeUrl(r.trailerUrl))return r.trailerUrl;if(r.steamData?.videos?.length>0){const t=r.steamData.videos.find(s=>s.name?.toLowerCase().includes("trailer")||s.name?.toLowerCase().includes("gameplay"));if(t?.url){const s=he.extractVideoId(t.url);if(s)return`https://www.youtube.com/watch?v=${s}`}}try{return(await he.searchGameTrailer(r.title))?.url||null}catch(t){return console.warn("Failed to detect trailer:",t),null}}const kt={Achiever:{name:"Achiever",icon:"üèÜ",gradient:"from-yellow-500 to-amber-600",description:"Goal-oriented completionist"},Explorer:{name:"Explorer",icon:"üó∫Ô∏è",gradient:"from-green-500 to-emerald-600",description:"Curious discoverer"},Socializer:{name:"Socializer",icon:"üë•",gradient:"from-blue-500 to-cyan-600",description:"Community player"},Competitor:{name:"Competitor",icon:"‚öîÔ∏è",gradient:"from-red-500 to-orange-600",description:"Victory-driven"},Strategist:{name:"Strategist",icon:"‚ôüÔ∏è",gradient:"from-indigo-500 to-purple-600",description:"Tactical thinker"},Creative:{name:"Creative",icon:"üé®",gradient:"from-purple-500 to-pink-600",description:"Imaginative builder"},Casual:{name:"Casual",icon:"üòå",gradient:"from-teal-500 to-cyan-600",description:"Relaxed gamer"},Specialist:{name:"Specialist",icon:"üéØ",gradient:"from-pink-500 to-rose-600",description:"Focused expert"}},It={sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"},Lt={sm:"text-sm",md:"text-base",lg:"text-lg"},_t=({archetypeId:r,size:t="md",showName:s=!0,className:a=""})=>{const n=kt[r];return n?e.jsxs("div",{className:`
        inline-flex items-center gap-1.5
        bg-gradient-to-r ${n.gradient}
        text-white font-medium
        rounded-full
        shadow-lg
        transition-all duration-200
        hover:shadow-xl hover:scale-105
        ${It[t]}
        ${a}
      `,title:n.description,children:[e.jsx("span",{className:Lt[t],children:n.icon}),s&&e.jsx("span",{className:"font-semibold",children:n.name})]}):null},Ot={Calm:"bg-blue-500",Hyped:"bg-yellow-500",Competitive:"bg-red-500",Reflective:"bg-purple-500",Comfort:"bg-green-500"},Dt={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"};function Ut(r){const s={chill:"Calm",story:"Calm",creative:"Calm",energetic:"Hyped",social:"Hyped",exploratory:"Hyped",competitive:"Competitive",focused:"Competitive",nostalgic:"Reflective",melancholic:"Reflective",cozy:"Comfort",relaxed:"Comfort"}[r]||"Comfort";return Ot[s]}const Yt=({mood:r,size:t="md",className:s=""})=>{const a=r?Ut(r.moodId):"bg-gray-400",n=Dt[t];return e.jsxs("div",{className:`relative ${s}`,children:[e.jsx("div",{className:`
          relative z-10
          ${a}
          ${n}
          rounded-full
          shadow-md
          transition-colors duration-300
        `,title:r?`${r.moodId} (Intensity: ${r.intensity})`:"No mood data"}),r&&r.intensity>=7&&e.jsx("div",{className:`
            absolute top-0 right-0
            w-1.5 h-1.5
            bg-white
            rounded-full
          `})]})};function z(r){return r.charAt(0).toUpperCase()+r.slice(1)}const Gt=({persona:r,compact:t=!1,className:s=""})=>{const{traits:a,mood:n,narrative:o}=r;return a?e.jsxs("div",{className:`flex items-center gap-3 ${s}`,children:[e.jsx(_t,{archetypeId:a.archetypeId,size:t?"sm":"md",showName:!t}),e.jsx(Yt,{mood:n,size:t?"sm":"md"}),!t&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("span",{className:"font-medium",children:z(a.pacing)}),e.jsx("span",{className:"text-gray-500",children:"‚Ä¢"}),e.jsx("span",{className:"font-medium",children:z(a.riskProfile)}),e.jsx("span",{className:"text-gray-500",children:"‚Ä¢"}),e.jsx("span",{className:"font-medium",children:z(a.socialStyle)})]}),t&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-300",children:[e.jsx("span",{children:z(a.pacing)}),e.jsx("span",{className:"text-gray-500",children:"‚Ä¢"}),e.jsx("span",{children:z(a.riskProfile)})]}),!t&&o&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:o.tone})]})]}):e.jsxs("div",{className:`flex items-center gap-3 text-gray-400 ${s}`,children:[e.jsx("div",{className:"w-4 h-4 bg-gray-600 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Loading persona..."})]})},Ht=({game:r})=>{const t=Fe(),{games:s,actions:a}=Ge(),{showSuccess:n,showError:o,showWarning:h,showInfo:f}=Ye(),[m,i]=B.useState(!1),d=l=>{if(l.coverImage){const g=l.appId||l.id?.split("_")[1];if(g)return`https://cdn.akamai.steamstatic.com/steam/apps/${g}/header.jpg`}return l.coverImage},u=ze(r.id),p=((l,g)=>{if(!g)return null;const x=l.moods||[],b=g.traits||{};let w=50,I=[];x.forEach(F=>{b.preferredMoods?.includes(F.toLowerCase())&&(w+=15,I.push(`Mood: ${F}`))});const S=l.hoursPlayed||0;if(b.avgSessionLength){const F=b.avgSessionLength;Math.abs(S-F)<5&&(w+=10,I.push("Session Length"))}return w=Math.min(100,w),{score:w,level:w>=80?"Perfect Match":w>=60?"Great Fit":w>=40?"Decent Match":"Learning Experience",traits:I.slice(0,3)}})(r,u),P=((l,g)=>{const x=[],b=l.hoursPlayed||0,w=l.localSessionCount||0;if(b>50?x.push({icon:"üèÜ",title:"Dedicated Player",description:"You've invested significant time in this game, showing commitment to deep experiences."}):b>20?x.push({icon:"üéØ",title:"Focused Gamer",description:"You prefer quality gaming sessions over casual play."}):x.push({icon:"‚ö°",title:"Casual Explorer",description:"You enjoy trying new games and discovering different experiences."}),w>0&&b>0){const S=b/w;S>3?x.push({icon:"üïê",title:"Marathon Gamer",description:"Your sessions are typically long and immersive."}):S<1&&x.push({icon:"‚ö°",title:"Quick Sessions",description:"You prefer shorter, focused gaming bursts."})}const I=l.moods||[];return I.some(S=>["competitive","intense","action-packed"].includes(S.toLowerCase()))&&x.push({icon:"üî•",title:"Adrenaline Seeker",description:"You're drawn to high-energy, competitive gaming experiences."}),I.some(S=>["creative","sandbox","building"].includes(S.toLowerCase()))&&x.push({icon:"üé®",title:"Creative Builder",description:"You enjoy games that allow self-expression and world-building."}),x.slice(0,3)})(r),j=(l=>{const g=Math.floor(Math.random()*50)+10,x=Math.floor(g*(Math.random()*.8)),b=Math.round(x/g*100),w=[{name:"First Steps",description:"Complete the tutorial",unlocked:!0,rarity:"Common"},{name:"Explorer",description:"Discover 10 locations",unlocked:!0,rarity:"Uncommon"},{name:"Master Player",description:"Reach max level",unlocked:b>50,rarity:"Rare"},{name:"Legend",description:"Complete all challenges",unlocked:b>80,rarity:"Epic"}].filter(I=>I.unlocked);return{total:g,unlocked:x,completionRate:b,recent:w.slice(-3)}})(),M=(l=>{const g=l.hoursPlayed||0,x=l.localSessionCount||0;if(g===0||x===0)return null;const b=g/x,w=Math.max(b*1.5,b+2),I=Math.min(Math.floor(x*.3),7);return[{icon:"‚è±Ô∏è",title:"Longest Session",value:`${Math.round(w*10)/10}h`,description:"Your longest continuous play session"},{icon:"üî•",title:"Best Streak",value:`${I} days`,description:"Most consecutive days played"},{icon:"üìä",title:"Average Session",value:`${Math.round(b*10)/10}h`,description:"Typical play session length"},{icon:"üéØ",title:"Total Sessions",value:x.toString(),description:"Number of times you've played"}]})(r),N=((l,g)=>{const x=l.localSessionCount||0,b=l.hoursPlayed||0;if(x===0)return null;const w=b/x,I=Math.min(x/4,7),S=[],F=l.moods||[];return F.some(V=>["relaxing","chill","creative"].includes(V.toLowerCase()))&&S.push({mood:"Relaxed",trigger:"Unwinding after work",time:"Evening sessions",frequency:"Regular evening play",icon:"üòå"}),F.some(V=>["competitive","intense","action-packed"].includes(V.toLowerCase()))&&S.push({mood:"Energetic",trigger:"High-energy moments",time:"Weekend afternoons",frequency:"Intensive weekend sessions",icon:"‚ö°"}),F.some(V=>["story-rich","atmospheric","nostalgic"].includes(V.toLowerCase()))&&S.push({mood:"Reflective",trigger:"Contemplative moods",time:"Quiet weekend evenings",frequency:"Longer, immersive sessions",icon:"ü§î"}),F.some(V=>["social","multiplayer","party"].includes(V.toLowerCase()))&&S.push({mood:"Social",trigger:"When friends are online",time:"Evenings and weekends",frequency:"Group gaming sessions",icon:"üë•"}),S.length===0&&S.push({mood:"Exploratory",trigger:"Curiosity and discovery",time:"Flexible timing",frequency:"Casual exploration sessions",icon:"üîç"}),{patterns:S.slice(0,2),sessionStats:{totalSessions:x,avgLength:w,weeklyFrequency:I,preferredTime:S[0]?.time||"Flexible"}}})(r),_=d(r),k=async()=>{f("Launching Game: Starting "+r.title+"...",{autoClose:2e3});const l=r.platforms?.[0]?.code;if(l&&ge.isEmulatorPlatform(l))try{const g=await Qe.launchGame(r,{fullscreen:!0});g.success?(n("Game Launched! "+r.title+" is now running",{autoClose:3e3}),a.updateGameStatus(r.id,"playing")):o("Launch Failed: "+(g.error||"Failed to launch emulator game"),{autoClose:5e3})}catch{o("Launch Error: An error occurred while launching the game",{autoClose:5e3})}else if(r.appId){console.log("üéÆ Launching Steam game with appId:",r.appId);const g=`steam://rungameid/${r.appId}`;console.log("üöÄ Direct Steam URL:",g);try{window.location.href=g,setTimeout(()=>{document.visibilityState==="visible"?h("Launch Failed: Steam may not be installed or running. Please check Steam is available.",{autoClose:5e3}):(n("Steam Launch Initiated: Opening "+r.title+" via Steam...",{autoClose:3e3}),a.updateGameStatus(r.id,"playing"))},3e3)}catch(x){console.error("Failed to launch game:",x),o("Launch Error: Could not execute launch command",{autoClose:5e3})}}else console.warn("No appId found for game:",r.title),h("Launch Not Available: This game cannot be launched automatically. App ID not found.",{autoClose:4e3})},D=()=>{a.updateGameStatus(r.id,"completed"),n("Game Completed: "+r.title+" marked as completed",{autoClose:3e3})},U=()=>{const l=r.tags||[];if(l.includes("Backlog")){const x=l.filter(b=>b!=="Backlog");a.updateGame(r.id,{tags:x}),n("Backlog tag removed from "+r.title,{autoClose:3e3})}else{const x=[...l,"Backlog"];a.updateGame(r.id,{tags:x}),n("Backlog tag added to "+r.title,{autoClose:3e3})}},G=l=>{if(!l)return"0h";const g=Math.floor(l),x=Math.round((l-g)*60);return x>0?`${g}h ${x}m`:`${g}h`},O=l=>l?new Date(l).toLocaleDateString():"Never",Y=async()=>{if(!m){i(!0);try{const l=await Mt(r);l?(a.updateGame(r.id,{trailerUrl:l}),n("Trailer detected and added automatically!")):f("No trailer found. You can add one manually.")}catch{o("Failed to detect trailer. Please try adding manually.")}finally{i(!1)}}},H=(r.moods||[]).slice(0,3).map(l=>{const g=qe(l.toLowerCase()),x=Ve.find(b=>b.id===g);return{id:l,name:x?.name||l,emoji:x?.emoji||"üéÆ",masterMood:g}});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gaming-dark via-gray-900 to-gaming-darker",children:[e.jsxs("div",{className:"relative h-96 overflow-hidden hero-section",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary via-gaming-secondary to-gaming-accent"}),e.jsx(C.div,{className:"absolute inset-0",initial:{opacity:0,scale:1.05},animate:{opacity:1,scale:1},transition:{duration:1.2,ease:"easeOut"},children:_&&e.jsx("img",{src:_,alt:r?.title,className:"w-full h-full object-cover object-center game-header-image",onError:l=>{console.error("‚ùå Header image failed to load:",_),l.currentTarget.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900/30 via-transparent to-blue-900/30"}),e.jsx(C.div,{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary/20 via-transparent to-gaming-accent/20",animate:{background:["linear-gradient(to bottom right, rgba(59, 130, 246, 0.2), transparent, rgba(34, 197, 94, 0.2))","linear-gradient(to bottom right, rgba(34, 197, 94, 0.2), transparent, rgba(168, 85, 247, 0.2))"]},transition:{duration:6,repeat:1/0}}),e.jsx("div",{className:"absolute inset-0 opacity-30",children:[...Array(8)].map((l,g)=>e.jsx(C.div,{className:"absolute w-1 h-1 bg-white/10 rounded-full",initial:{x:Math.random()*100+"%",y:Math.random()*100+"%",scale:0},animate:{scale:[0,1,0],opacity:[0,.5,0]},transition:{duration:4+Math.random()*2,repeat:1/0,delay:Math.random()*2}},g))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"flex-1",children:[u&&e.jsxs(C.div,{className:"mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"px-3 py-1 bg-gaming-primary/20 border border-gaming-primary/30 rounded-full text-gaming-primary text-xs font-medium backdrop-blur-sm",children:["üß† ",u?.traits?.archetypeId||"Explorer"]}),p&&e.jsxs("div",{className:`px-3 py-1 border rounded-full text-xs font-medium backdrop-blur-sm ${p.score>=80?"bg-green-500/20 border-green-400/30 text-green-300":p.score>=60?"bg-blue-500/20 border-blue-400/30 text-blue-300":p.score>=40?"bg-yellow-500/20 border-yellow-400/30 text-yellow-300":"bg-gray-500/20 border-gray-400/30 text-gray-300"}`,children:[p.score,"% ",p.level]})]}),p&&p.traits.length>0&&e.jsxs("div",{className:"text-xs text-gray-300",children:["Matches: ",p.traits.join(" ‚Ä¢ ")]})]}),e.jsx(C.div,{className:"mb-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:e.jsx("span",{className:"px-3 py-1 bg-amber-500/20 border border-amber-500/30 rounded-full text-amber-300 text-xs font-medium backdrop-blur-sm",children:r?.releaseYear?`From ${r.releaseYear}`:"Classic Era"})}),e.jsx(C.h1,{className:"text-5xl font-bold text-white drop-shadow-2xl mb-2",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},children:r?.title}),e.jsxs(C.div,{className:"flex items-center gap-4 text-white/80 text-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("span",{children:r?.platforms?.map(l=>l.name).join(" ‚Ä¢ ")||"Unknown Platform"}),r?.hoursPlayed&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"‚è±Ô∏è"}),Math.floor(r.hoursPlayed),"h played"]})]})]}),e.jsxs(C.button,{onClick:k,className:"px-8 py-4 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-xl font-bold text-lg transition-all transform hover:scale-105 hover:shadow-2xl hover:shadow-gaming-accent/50 flex items-center gap-3 backdrop-blur-sm border border-white/20 game-action-button",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7},children:[e.jsx("span",{className:"text-2xl",children:"‚ñ∂Ô∏è"}),e.jsx("span",{children:"Launch Game"})]})]})})})]}),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"container mx-auto px-4 py-8",children:e.jsx(Tt,{game:r,onTrailerUpdate:l=>{a.updateGame(r.id,{trailerUrl:l})},onAutoDetect:Y,isDetecting:m})}),e.jsx(C.div,{className:"bg-gaming-dark/80 backdrop-blur-xl border-b border-gaming-primary/20 sticky top-0 z-50",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>t("/library"),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-xl font-bold transition-all transform hover:scale-105 hover:shadow-lg hover:shadow-gaming-accent/50",children:[e.jsx("span",{className:"text-xl",children:"‚Üê"}),e.jsx("span",{children:"Back to Library"})]})})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 content-section",children:[e.jsx(C.div,{className:"glass-morphism rounded-xl p-6 mb-8 border border-gaming-primary/20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gaming-primary/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"‚è±Ô∏è"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-lg",children:G(r.hoursPlayed)}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Total Playtime"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gaming-accent/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"üéÆ"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-lg",children:r.localSessionCount||0}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Sessions"})]})]}),r.lastLocalPlayedAt&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"üìÖ"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-lg",children:O(r.lastLocalPlayedAt)}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Last Played"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:D,className:"p-3 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-xl transition-all group relative border border-green-500/30",title:"Mark as Completed",children:[e.jsx("span",{className:"text-xl",children:"‚úÖ"}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gaming-dark text-green-400 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-green-500/30",children:"Mark as Completed"})]}),e.jsxs("button",{onClick:U,className:"p-3 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400 rounded-xl transition-all group relative border border-yellow-500/30",title:r.tags?.includes("Backlog")?"Remove from Backlog":"Mark as Backlog",children:[e.jsx("span",{className:"text-xl",children:r.tags?.includes("Backlog")?"‚úì":"üìã"}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gaming-dark text-yellow-400 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-yellow-500/30",children:r.tags?.includes("Backlog")?"Remove from Backlog":"Mark as Backlog"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"glass-morphism rounded-xl p-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üé≠"}),"Identity & Mood"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üé≠"}),"Game Moods"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:H.length>0?H.map((l,g)=>e.jsx(C.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:g*.1,duration:.3},className:`px-3 py-2 rounded-lg text-sm font-medium backdrop-blur-sm border transition-all duration-300 hover:scale-105 ${l.masterMood==="adrenaline"?"bg-red-500/20 border-red-400/50 text-red-200":l.masterMood==="brain-power"?"bg-blue-500/20 border-blue-400/50 text-blue-200":l.masterMood==="zen"?"bg-green-500/20 border-green-400/50 text-green-200":l.masterMood==="story"?"bg-purple-500/20 border-purple-400/50 text-purple-200":l.masterMood==="social"?"bg-teal-500/20 border-teal-400/50 text-teal-200":l.masterMood==="creative"?"bg-yellow-500/20 border-yellow-400/50 text-yellow-200":l.masterMood==="nostalgic"?"bg-amber-500/20 border-amber-400/50 text-amber-200":l.masterMood==="scary"?"bg-gray-600/20 border-gray-500/50 text-gray-200":"bg-gray-500/20 border-gray-400/50 text-gray-200"}`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-base",children:l.emoji}),e.jsx("span",{children:l.name})]})},l.id)):e.jsxs("div",{className:"text-gray-400 italic",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ü§î"}),"No mood tags assigned yet"]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üß†"}),"Your Gaming Personality"]}),P.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:P.map((l,g)=>e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},className:"bg-gradient-to-br from-gaming-primary/10 to-gaming-secondary/10 border border-gaming-primary/20 rounded-lg p-4 hover:border-gaming-primary/40 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:l.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:l.title}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:l.description})]})]})},g))}):e.jsxs("div",{className:"text-gray-400 italic text-center py-8",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ü§î"}),"Play more to unlock your gaming personality insights!"]})]}),N&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üé≠"}),"Your Play Patterns"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[N.patterns.map((l,g)=>e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-4xl",children:l.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-white mb-2",children:[l.mood," Sessions"]}),e.jsx("p",{className:"text-gray-300 text-sm mb-2",children:l.trigger}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"When:"}),e.jsx("span",{className:"text-purple-300",children:l.time})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"How often:"}),e.jsx("span",{className:"text-purple-300",children:l.frequency})]})]})]})]})},g)),e.jsx(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-blue-500/10 to-teal-500/10 border border-blue-500/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-4xl",children:"üìä"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Session Insights"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Total sessions:"}),e.jsx("span",{className:"text-blue-300",children:N.sessionStats.totalSessions})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Avg length:"}),e.jsxs("span",{className:"text-blue-300",children:[Math.round(N.sessionStats.avgLength*10)/10,"h"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Weekly play:"}),e.jsxs("span",{className:"text-blue-300",children:[Math.round(N.sessionStats.weeklyFrequency)," sessions"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Best time:"}),e.jsx("span",{className:"text-blue-300",children:N.sessionStats.preferredTime})]})]})]})]})})]})]})]})]}),e.jsxs("div",{className:"glass-morphism rounded-xl p-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üèÜ"}),"Achievement Progress"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Completion Rate"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[j.unlocked," of ",j.total," achievements unlocked"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-3xl font-bold text-gaming-primary",children:[j.completionRate,"%"]})})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-2",children:e.jsx(C.div,{className:"bg-gradient-to-r from-gaming-primary to-gaming-secondary h-3 rounded-full",initial:{width:0},animate:{width:`${j.completionRate}%`},transition:{duration:1,delay:.5}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{children:[j.completionRate,"% Complete"]}),e.jsx("span",{children:"100%"})]})]}),j.recent.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Recent Achievements"}),e.jsx("div",{className:"space-y-3",children:j.recent.map((l,g)=>e.jsxs(C.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.1},className:"flex items-center gap-4 bg-gray-800/30 rounded-lg p-4 border border-gray-700/30",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"üèÜ"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white",children:l.name}),e.jsx("p",{className:"text-gray-300 text-sm",children:l.description})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${l.rarity==="Common"?"bg-gray-500/20 text-gray-300":l.rarity==="Uncommon"?"bg-green-500/20 text-green-300":l.rarity==="Rare"?"bg-blue-500/20 text-blue-300":"bg-purple-500/20 text-purple-300"}`,children:l.rarity})]},g))})]})]})]}),M&&e.jsxs("div",{className:"glass-morphism rounded-xl p-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üìà"}),"Your Gaming Records"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:M.map((l,g)=>e.jsxs(C.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:g*.1},className:"bg-gradient-to-br from-gaming-secondary/10 to-gaming-accent/10 border border-gaming-secondary/20 rounded-lg p-6 text-center hover:border-gaming-secondary/40 transition-all",children:[e.jsx("div",{className:"text-3xl mb-2",children:l.icon}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:l.value}),e.jsx("div",{className:"text-sm font-semibold text-gaming-secondary mb-2",children:l.title}),e.jsx("div",{className:"text-xs text-gray-400",children:l.description})]},g))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative w-64 h-96 rounded-xl overflow-hidden cinematic-shadow",children:[e.jsx("img",{src:r.coverImage||"https://via.placeholder.com/300x400/8b5cf6/ffffff?text=Game+Cover",alt:r.title,className:"w-full h-full object-cover game-cover-image",onError:l=>{console.error("‚ùå Cover art failed to load:",r.coverImage)}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-2xl font-bold text-white truncate flex-1 mr-4",children:r.title}),e.jsx(Gt,{persona:u})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap ${r.playStatus==="playing"?"bg-green-500/20 text-green-300 border border-green-500/30":r.playStatus==="completed"?"bg-blue-500/20 text-blue-300 border border-blue-500/30":r.playStatus==="backlog"?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-gray-500/20 text-gray-300 border border-gray-500/30"}`,children:[r.playStatus==="playing"&&"‚ñ∂Ô∏è Currently Playing",r.playStatus==="completed"&&"‚úÖ Completed",r.playStatus==="backlog"&&"üìã In Backlog",r.playStatus==="paused"&&"‚è∏Ô∏è Paused",r.playStatus==="abandoned"&&"üö´ Abandoned",!r.playStatus&&"üìù Not Started"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"üéÆ"}),e.jsx("span",{className:"text-gray-300 truncate",children:r.platforms?.map(l=>l.name).join(" ‚Ä¢ ")||"Unknown Platform"})]}),r.releaseYear&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"üìÖ"}),e.jsxs("span",{className:"text-gray-300 whitespace-nowrap",children:["Released ",r.releaseYear]})]})]}),e.jsxs("div",{className:"space-y-2",children:[r.hoursPlayed&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"‚è±Ô∏è"}),e.jsxs("span",{className:"text-gray-300 whitespace-nowrap",children:[G(r.hoursPlayed)," played"]})]}),r.lastLocalPlayedAt&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"üïê"}),e.jsxs("span",{className:"text-gray-300 whitespace-nowrap",children:["Last played ",O(r.lastLocalPlayedAt)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üè∑Ô∏è"}),"Genres & Tags"]}),e.jsxs("div",{className:"space-y-3",children:[r.genres&&r.genres.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r.genres.map((l,g)=>e.jsx("span",{className:"px-3 py-1 bg-gaming-primary/20 text-gaming-primary text-xs rounded-full border border-gaming-primary/30 whitespace-nowrap",children:l.description||l.name},g))})]}),r.tags&&r.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.tags.slice(0,8).map((l,g)=>e.jsx("span",{className:"px-3 py-1 bg-gray-700/50 text-gray-300 text-xs rounded-full border border-gray-600/30 whitespace-nowrap",children:l},g)),r.tags.length>8&&e.jsxs("span",{className:"px-3 py-1 bg-gray-600/50 text-gray-400 text-xs rounded-full whitespace-nowrap",children:["+",r.tags.length-8," more"]})]})]})]})]})]})]}),r.description&&e.jsxs("div",{className:"mt-8 p-6 bg-gray-800/30 rounded-xl border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìñ"}),"About This Game"]}),e.jsx("p",{className:"text-gray-300 leading-relaxed text-lg",children:r.description})]})]}),e.jsx("div",{className:"lg:col-span-1 space-y-8",children:e.jsxs("div",{className:"glass-morphism rounded-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üìä"}),"Stats & History"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Total Playtime"}),e.jsx("span",{className:"text-white font-bold text-lg",children:G(r.hoursPlayed)})]}),r.lastLocalPlayedAt&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Last Played"}),e.jsx("span",{className:"text-gray-400 text-sm",children:O(r.lastLocalPlayedAt)})]})]}),e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Total Sessions"}),e.jsx("span",{className:"text-white font-bold text-lg",children:r.localSessionCount||0})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Sessions"}),e.jsxs("div",{className:"space-y-3",children:[r.lastLocalPlayedAt&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:O(r.lastLocalPlayedAt)}),e.jsxs("div",{className:"text-gray-400 text-xs",children:[G(r.hoursPlayed)," session"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"First played"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Added to library"})]})]})]})]})]})]})})]})]})]})};export{Ht as GameDetailsLayout,Ht as default};
