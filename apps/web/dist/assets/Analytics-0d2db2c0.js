import{r as b,j as e,h as D}from"./index-db369dc9.js";import{u as re}from"./usePersonaSnapshot-4fed8bfb.js";import"./useCurrentMood-a662386a.js";import{u as H}from"./useLibraryStore-cd6ac89d.js";import{u as ie}from"./useLibraryPersona-9e7a4be7.js";import{u as ne}from"./useMoodRecommendations-e99c9538.js";import{M as _}from"./masterMoods-2bce0da6.js";import{u as oe,a as O}from"./customisationStore-40fc727e.js";const le=({isOpen:s,onClose:d,title:i,description:r,children:a,position:l="center"})=>{const[c,g]=b.useState(!1);if(b.useEffect(()=>{g(!!s)},[s]),!s)return null;const h=f=>{f.target===f.currentTarget&&d()};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 animate-fade-in",onClick:h}),e.jsx("div",{className:`fixed z-50 ${l==="bottom"?"bottom-0 left-0 right-0":"inset-0 flex items-center justify-center"}`,children:e.jsxs("div",{className:`
            glass-morphism rounded-2xl border border-white/20 shadow-2xl
            ${l==="bottom"?"mx-4 mb-4":"mx-4 max-w-lg w-full"}
            ${c?"animate-scale-in":"animate-scale-out"}
            transition-all duration-300
          `,children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[e.jsx("h3",{className:"text-xl font-bold text-white",children:i}),e.jsx("button",{onClick:d,className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700/50 hover:bg-gray-600/50 text-gray-400 hover:text-white transition-colors duration-200",children:e.jsx("span",{className:"text-lg",children:"Ã—"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"text-gray-300 mb-4",children:r}),a&&e.jsx("div",{className:"mt-4",children:a})]})]})})]})},R=({title:s,icon:d,value:i,subtitle:r,progress:a,progressColor:l="from-gaming-primary to-gaming-accent",onClick:c,children:g})=>e.jsxs("div",{className:"glass-morphism rounded-xl p-6 border border-white/10 hover:transform hover:-translate-y-1 hover:shadow-cinematic-epic transition-all duration-300 cursor-pointer group relative overflow-hidden",onClick:c,children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs("div",{className:"flex items-center justify-between mb-4 relative z-10",children:[e.jsx("h3",{className:"text-xs font-gaming font-semibold text-white/50 uppercase tracking-widest",children:s}),e.jsx("span",{className:"text-2xl group-hover:scale-125 transition-transform duration-500 group-hover:drop-shadow-[0_0_8px_rgba(255,255,255,0.4)]",children:d})]}),e.jsx("p",{className:"text-3xl font-gaming font-bold text-white mb-1 relative z-10 tracking-tight",children:i}),e.jsx("p",{className:"text-xs text-white/40 mb-4 relative z-10 font-medium uppercase tracking-wide",children:r}),g,a!==void 0&&e.jsx("div",{className:"mt-4 w-full bg-gray-700/50 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full bg-gradient-to-r ${l} transition-all duration-500`,style:{width:`${Math.min(a,100)}%`}})}),e.jsx("div",{className:"mt-2 text-xs text-gaming-accent opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Tap for deeper insight"})]}),ce=({moodDistribution:s,totalTrends:d,getMoodEmoji:i,getMoodColor:r,onMoodClick:a})=>{const l=Object.values(s).reduce((c,g)=>c+g,0)||1;return e.jsxs("div",{className:"glass-morphism rounded-xl p-6 border border-white/10 hover:shadow-cinematic transition-all duration-300 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gaming-primary/5 blur-[60px] rounded-full"}),e.jsxs("h3",{className:"text-xl font-gaming font-semibold text-white mb-8 flex items-center gap-3 uppercase tracking-tight relative z-10",children:["Mood Distribution",e.jsx("span",{className:"h-[1px] w-12 bg-white/20"}),e.jsx("span",{className:"text-[10px] text-white/40 font-sans tracking-widest uppercase",children:"Emotional Analysis"})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(s).sort(([,c],[,g])=>g-c).map(([c,g],h)=>{const f=g/l*100;return e.jsxs("div",{className:"flex items-center gap-4 group cursor-pointer hover:bg-white/5 rounded-lg p-2 transition-all duration-200",style:{animationDelay:`${h*100}ms`},onClick:()=>a==null?void 0:a(c,g,f),children:[e.jsxs("div",{className:"flex items-center gap-2 w-24",children:[e.jsx("span",{className:"text-xl group-hover:scale-110 transition-transform duration-200",children:i(c)}),e.jsx("span",{className:"text-white capitalize group-hover:text-gaming-primary transition-colors duration-200",children:c})]}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative overflow-hidden",children:[e.jsx("div",{className:`h-4 rounded-full ${r(c)} transition-all duration-1000 ease-out`,style:{width:`${f}%`,animationDelay:`${h*150}ms`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})}),e.jsxs("div",{className:"text-right",children:[e.jsx("span",{className:"text-white font-medium group-hover:scale-105 transition-transform duration-200 inline-block",children:g}),e.jsxs("span",{className:"text-gray-400 text-sm ml-2",children:["(",Math.round(f),"%)"]})]})]},c)})})]})},de=({genreAffinity:s,mostPlayedMood:d,onGenreClick:i})=>e.jsxs("div",{className:"glass-morphism rounded-xl p-6 border border-white/10 hover:shadow-cinematic transition-all duration-300 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 left-0 w-32 h-32 bg-gaming-secondary/5 blur-[60px] rounded-full"}),e.jsxs("h3",{className:"text-xl font-gaming font-semibold text-white mb-8 flex items-center gap-3 uppercase tracking-tight relative z-10",children:["Genre Affinity",e.jsx("span",{className:"h-[1px] w-12 bg-white/20"}),e.jsx("span",{className:"text-[10px] text-white/40 font-sans tracking-widest uppercase",children:"Preference Mapping"})]}),e.jsx("div",{className:"space-y-4",children:Object.entries(s).sort(([,r],[,a])=>a-r).map(([r,a],l)=>e.jsxs("div",{className:"flex items-center gap-4 group cursor-pointer hover:bg-white/5 rounded-lg p-2 transition-all duration-200",style:{animationDelay:`${l*100}ms`},onClick:()=>i==null?void 0:i(r,a),title:`You play this most when you're ${d}`,children:[e.jsx("div",{className:"w-24",children:e.jsx("span",{className:"text-white capitalize group-hover:text-gaming-primary transition-colors duration-200",children:r})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"w-full bg-gray-700 rounded-full h-4 relative overflow-hidden",children:[e.jsx("div",{className:"h-4 rounded-full bg-gradient-to-r from-gaming-primary to-gaming-accent transition-all duration-1000 ease-out",style:{width:`${a*100}%`,animationDelay:`${l*150}ms`}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:translate-x-full transition-transform duration-1000"})]})}),e.jsx("div",{className:"text-right",children:e.jsxs("span",{className:"text-white font-medium group-hover:scale-105 transition-transform duration-200 inline-block",children:[Math.round(a*100),"%"]})})]},r))})]}),me=({bestGamingTime:s,preferredSessionLength:d,topRecommendedMoods:i,getMoodEmoji:r,onInsightClick:a})=>e.jsxs("div",{className:"glass-morphism-dark rounded-xl p-8 border border-white/5 shadow-cinematic relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary/5 via-transparent to-transparent pointer-events-none"}),e.jsxs("h3",{className:"text-xl font-gaming font-semibold text-white mb-8 uppercase tracking-widest flex items-center gap-3",children:["Personal Insights",e.jsx("span",{className:"flex-1 h-[1px] bg-white/10"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10 relative z-10",children:[e.jsxs("div",{className:"group cursor-pointer transition-all duration-300 p-4 rounded-xl hover:bg-white/5 border border-transparent hover:border-white/10",onClick:()=>a==null?void 0:a("time"),children:[e.jsx("h4",{className:"text-gaming-primary font-gaming text-xs uppercase tracking-widest mb-3 opacity-80 group-hover:opacity-100 transition-opacity",children:"Optimal Window"}),e.jsx("p",{className:"text-2xl font-bold text-white capitalize mb-1 group-hover:text-gaming-secondary transition-colors",children:s}),e.jsx("p",{className:"text-white/40 text-sm leading-relaxed",children:"Performance peaks during these hours."}),e.jsx("div",{className:"mt-2 text-xs text-gaming-accent opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Tap for deeper insight"})]}),e.jsxs("div",{className:"group cursor-pointer hover:transform hover:-translate-y-1 transition-all duration-300",onClick:()=>a==null?void 0:a("session"),children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Preferred Session Length"}),e.jsxs("p",{className:"text-white",children:[d," minutes"]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Your optimal gaming session duration"}),e.jsx("div",{className:"mt-2 text-xs text-gaming-accent opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Tap for deeper insight"})]}),e.jsxs("div",{className:"group cursor-pointer hover:transform hover:-translate-y-1 transition-all duration-300",onClick:()=>a==null?void 0:a("moods"),children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Top Recommendation Moods"}),e.jsx("div",{className:"flex gap-2",children:i.map(l=>e.jsxs("span",{className:"px-3 py-1 bg-gaming-primary/20 text-gaming-primary rounded-full text-sm capitalize",children:[r(l)," ",l]},l))}),e.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Moods that work best for you"}),e.jsx("div",{className:"mt-2 text-xs text-gaming-accent opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"Tap for deeper insight"})]})]})]}),ge=({analyticsData:s,getMoodEmoji:d,getMoodColor:i,AnimatedNumber:r,onCardClick:a,onMoodClick:l,onGenreClick:c,onInsightClick:g})=>{var y,M,k,L,t;const h=ie(),{games:f}=H(),{primaryMoodInfo:x,hasRecommendations:w}=ne({games:f});return e.jsxs("div",{className:"space-y-8",children:[h&&e.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.3s"},children:e.jsx(R,{title:"Gaming Persona",icon:"ðŸŽ®",value:((y=h.traits)==null?void 0:y.archetypeId)||"Unknown",subtitle:`${(M=h.traits)==null?void 0:M.intensity} intensity â€¢ ${Math.round((h.confidence||0)*100)}% confidence`,progress:(h.confidence||0)*100,progressColor:"from-purple-500 to-pink-500",onClick:()=>a==null?void 0:a("persona",h),children:e.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400",children:"Pacing"}),e.jsx("div",{className:"text-white font-medium",children:(k=h.traits)==null?void 0:k.pacing})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400",children:"Social"}),e.jsx("div",{className:"text-white font-medium",children:(L=h.traits)==null?void 0:L.socialStyle})]})]})})}),w&&x&&e.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"0.4s"},children:e.jsx(R,{title:"Current Mood",icon:x.emoji,value:x.name,subtitle:"Active mood state",progress:75,progressColor:((t=x.color)==null?void 0:t.replace("from-","from-").replace(" to-"," to-"))||"from-blue-500 to-cyan-500",onClick:()=>a==null?void 0:a("currentMood",x)})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 animate-fade-in-up",style:{animationDelay:"0.6s"},children:[e.jsx(R,{title:"Total Playtime",icon:"â±ï¸",value:e.jsx(r,{value:Math.round(s.gamingPatterns.totalPlaytime),suffix:"h"}),subtitle:e.jsxs(e.Fragment,{children:[e.jsx(r,{value:Math.round(s.gamingPatterns.averageSessionLength),suffix:"min"})," avg session"]}),progress:Math.min(s.gamingPatterns.totalPlaytime/100*100,100),onClick:()=>a==null?void 0:a("totalPlaytime",s.gamingPatterns)}),e.jsx(R,{title:"Favorite Mood",icon:d(s.gamingPatterns.mostPlayedMood),value:s.gamingPatterns.mostPlayedMood,subtitle:e.jsxs(e.Fragment,{children:[e.jsx(r,{value:s.gamingPatterns.moodDistribution[s.gamingPatterns.mostPlayedMood]})," sessions"]}),onClick:()=>a==null?void 0:a("favoriteMood",s.gamingPatterns),children:e.jsxs("div",{className:"mt-4 relative w-12 h-12 mx-auto",children:[e.jsx("div",{className:"absolute inset-0 bg-gray-700/50 rounded-full"}),e.jsx("div",{className:`absolute inset-0 ${i(s.gamingPatterns.mostPlayedMood)} rounded-full transition-all duration-500`,style:{clipPath:`polygon(50% 50%, 50% 0%, ${50+s.gamingPatterns.moodDistribution[s.gamingPatterns.mostPlayedMood]/s.moodTrends.length*100}% 0%, 50% 50%)`}})]})}),e.jsx(R,{title:"Recommendation Success",icon:"ðŸŽ¯",value:e.jsx(r,{value:s.recommendationMetrics.successRate,suffix:"%"}),subtitle:e.jsxs(e.Fragment,{children:[e.jsx(r,{value:s.recommendationMetrics.acceptedRecommendations})," of ",e.jsx(r,{value:s.recommendationMetrics.totalRecommendations})," accepted"]}),progress:s.recommendationMetrics.successRate,progressColor:"from-green-500 to-emerald-500",onClick:()=>a==null?void 0:a("recommendationSuccess",s.recommendationMetrics)}),e.jsx(R,{title:"Mood Stability",icon:"ðŸ“Š",value:e.jsx(r,{value:Math.round(s.userInsights.moodStability*100),suffix:"%"}),subtitle:"Consistent mood patterns",progress:s.userInsights.moodStability*100,progressColor:"from-blue-500 to-purple-500",onClick:()=>a==null?void 0:a("moodStability",s.userInsights),children:e.jsxs("div",{className:"mt-4 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-gray-700/50 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 transition-all duration-500",style:{width:`${s.userInsights.moodStability*100}%`}})}),e.jsx("div",{className:`w-2 h-2 rounded-full ${s.userInsights.moodStability>.7?"bg-green-500":s.userInsights.moodStability>.4?"bg-yellow-500":"bg-red-500"}`})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 animate-fade-in-up",style:{animationDelay:"0.8s"},children:[e.jsx(ce,{moodDistribution:s.gamingPatterns.moodDistribution,totalTrends:s.moodTrends.length,getMoodEmoji:d,getMoodColor:i,onMoodClick:l}),e.jsx(de,{genreAffinity:s.userInsights.genreAffinity,mostPlayedMood:s.gamingPatterns.mostPlayedMood,onGenreClick:c})]}),e.jsx("div",{className:"animate-fade-in-up",style:{animationDelay:"1.0s"},children:e.jsx(me,{bestGamingTime:s.userInsights.bestGamingTime,preferredSessionLength:s.userInsights.preferredSessionLength,topRecommendedMoods:s.recommendationMetrics.topRecommendedMoods,getMoodEmoji:d,onInsightClick:g})})]})},xe=({onClick:s,isActive:d=!1})=>e.jsx("button",{onClick:s,className:`
        w-10 h-10 flex items-center justify-center rounded-lg transition-all duration-200
        ${d?"bg-gaming-primary text-white shadow-lg shadow-gaming-primary/50":"bg-gray-700/50 text-gray-400 hover:bg-gray-600/50 hover:text-white"}
      `,title:"Customise this page","aria-label":"Customise this page",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6V4m0 2a2 2 0 100 4m0-4a2 2 0 110 4m-6 8a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4m6 6v10m6-2a2 2 0 100-4m0 4a2 2 0 110-4m0 4v2m0-6V4"})})}),he=({pageId:s,isOpen:d,onClose:i})=>{const r=oe(s),{setPageSettings:a}=O(),[l,c]=b.useState(""),[g,h]=b.useState(r.accentColor||"#3b82f6"),f=t=>{a(s,{backgroundMode:t})},x=()=>{l.trim()&&(a(s,{backgroundImageUrl:l.trim()}),c(""))},w=t=>{h(t),a(s,{accentColor:t})},y=t=>{a(s,{animationLevel:t})},M=t=>{a(s,{density:t})},k=t=>{a(s,{lightingMode:t})},L=()=>{const{resetPageSettings:t}=O();t(s)};return d?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40",onClick:i}),e.jsx("div",{className:"fixed right-0 top-0 h-full w-96 bg-gray-900/95 backdrop-blur-md border-l border-white/10 z-50 overflow-y-auto shadow-2xl",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-gaming-primary to-gaming-secondary rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"âœ¨"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Customise Page"}),e.jsx("p",{className:"text-xs text-gray-400",children:s})]})]}),e.jsx("button",{onClick:i,className:"w-8 h-8 flex items-center justify-center rounded-full bg-gray-700/50 hover:bg-gray-600/50 text-gray-400 hover:text-white transition-all duration-200",title:"Close customisation panel","aria-label":"Close customisation panel",children:e.jsx("span",{className:"text-lg",children:"Ã—"})})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 mb-6",children:[e.jsxs("div",{className:"text-center p-2 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Theme"}),e.jsx("div",{className:"text-sm text-white capitalize",children:r.backgroundMode||"gradient"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Density"}),e.jsx("div",{className:"text-sm text-white capitalize",children:r.density||"comfortable"})]}),e.jsxs("div",{className:"text-center p-2 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsx("div",{className:"text-xs text-gray-400",children:"Effects"}),e.jsx("div",{className:"text-sm text-white capitalize",children:r.lightingMode||"none"})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-blue-500 to-purple-500 rounded"}),e.jsx("h4",{className:"text-sm font-medium text-white",children:"Background Theme"})]}),e.jsxs("div",{className:"mb-3 p-3 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Current: ",e.jsx("span",{className:"text-gaming-accent capitalize font-medium",children:r.backgroundMode||"gradient"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r.backgroundMode==="solid"?"ðŸŽ¨ Clean solid color background for minimal distraction":r.backgroundMode==="gradient"?"ðŸŒ… Beautiful static gradient background":"ðŸ–¼ï¸ Custom image background for personalization"})]}),e.jsx("div",{className:"space-y-2",children:["solid","gradient","image"].map(t=>e.jsx("button",{onClick:()=>f(t),className:`w-full p-3 rounded-lg border-2 transition-all duration-300 text-left ${r.backgroundMode===t?"border-gaming-primary bg-gaming-primary/20 shadow-lg":"border-gray-600 bg-gray-800/50 hover:border-gray-500 hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${t==="solid"?"bg-gray-600":t==="gradient"?"bg-gradient-to-r from-blue-500 to-purple-500":"bg-gray-600"}`}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white text-sm capitalize font-medium",children:t}),e.jsx("div",{className:"text-xs text-gray-400",children:t==="solid"?"Minimal & clean":t==="gradient"?"Elegant & modern":"Personal & unique"})]})]}),r.backgroundMode===t&&e.jsx("div",{className:"w-5 h-5 bg-gaming-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]})},t))})]}),r.backgroundMode==="image"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Background Image"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("input",{type:"text",value:l,onChange:t=>c(t.target.value),placeholder:"Enter image URL...",className:"w-full px-4 py-3 bg-gray-800/50 border border-gray-600 rounded-lg text-white placeholder-gray-400 text-sm focus:border-gaming-primary focus:outline-none focus:ring-2 focus:ring-gaming-primary/20 transition-all duration-300","aria-label":"Enter background image URL"}),e.jsx("button",{onClick:x,className:"w-full px-4 py-3 bg-gaming-primary text-white rounded-lg hover:bg-gaming-primary/80 transition-all duration-300 text-sm hover:scale-[1.02] shadow-lg shadow-gaming-primary/30",children:"Set Image"}),r.backgroundImageUrl&&e.jsx("div",{className:"p-3 bg-gray-800/50 rounded-lg border border-white/5",children:e.jsx("p",{className:"text-gray-400 text-xs truncate",children:r.backgroundImageUrl})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-4 h-4 rounded",style:{backgroundColor:r.accentColor||"#3b82f6"}}),e.jsx("h4",{className:"text-sm font-medium text-white",children:"Accent Color"})]}),e.jsxs("div",{className:"mb-3 p-3 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Current: ",e.jsx("span",{className:"text-gaming-accent font-medium",children:r.accentColor||"#3b82f6"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"ðŸŽ¨ Choose the primary accent color for buttons, links, and highlights"})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs text-gray-400 mb-2",children:"Quick Presets"}),e.jsx("div",{className:"grid grid-cols-8 gap-2",children:["#3b82f6","#8b5cf6","#10b981","#f59e0b","#ef4444","#ec4899","#06b6d4","#84cc16","#f97316","#a855f7","#14b8a6","#eab308","#dc2626","#db2777","#0891b2","#65a30d"].map(t=>e.jsx("button",{onClick:()=>w(t),className:`w-full aspect-square rounded-lg border-2 transition-all duration-300 ${r.accentColor===t?"border-white scale-110 shadow-lg":"border-gray-600 hover:border-gray-500 hover:scale-105"}`,style:{backgroundColor:t},title:`Select ${t} as accent color`,"aria-label":`Select ${t} as accent color`},t))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-400",children:"Custom Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"color",value:g,onChange:t=>w(t.target.value),className:"w-16 h-10 bg-gray-800/50 border border-gray-600 rounded-lg cursor-pointer transition-all duration-300 hover:border-gaming-primary",title:"Choose custom accent color","aria-label":"Choose custom accent color"}),e.jsx("input",{type:"text",value:g,onChange:t=>w(t.target.value),placeholder:"#3b82f6",className:"flex-1 px-3 py-2 bg-gray-800/50 border border-gray-600 rounded-lg text-white text-sm focus:border-gaming-primary focus:outline-none transition-all duration-300",title:"Enter hex color code","aria-label":"Enter hex color code"}),e.jsx("button",{onClick:()=>w(g),className:"px-4 py-2 bg-gaming-primary text-white rounded-lg hover:bg-gaming-primary/80 transition-all duration-300 text-sm",children:"Apply"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Animation Level"}),e.jsxs("div",{className:"mb-3 p-3 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Current: ",e.jsx("span",{className:"text-gaming-accent capitalize",children:r.animationLevel||"medium"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r.animationLevel==="low"?"â€¢ Minimal UI animations, no background effects":r.animationLevel==="medium"?"â€¢ Balanced UI animations, no background effects":"â€¢ Enhanced UI animations, no background effects"})]}),e.jsx("div",{className:"space-y-2",children:["low","medium","high"].map(t=>e.jsx("button",{onClick:()=>y(t),className:`w-full p-3 rounded-lg border-2 transition-all duration-300 text-left hover:scale-[1.02] ${r.animationLevel===t?"border-gaming-primary bg-gaming-primary/20 shadow-lg shadow-gaming-primary/30":"border-gray-600 bg-gray-800/50 hover:border-gray-500 hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-white text-sm capitalize",children:t}),e.jsx("span",{className:"text-gray-400 text-xs",children:t==="low"?"Minimal":t==="medium"?"Balanced":"Full"})]})},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gray-600 rounded"}),e.jsx("h4",{className:"text-sm font-medium text-white",children:"Layout Density"})]}),e.jsxs("div",{className:"mb-3 p-3 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Current: ",e.jsx("span",{className:"text-gaming-accent capitalize font-medium",children:r.density||"comfortable"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r.density==="compact"?"ðŸ“± Tighter spacing, more content visible":"â˜ï¸ Comfortable spacing for better readability"})]}),e.jsx("div",{className:"space-y-2",children:["compact","comfortable"].map(t=>e.jsx("button",{onClick:()=>M(t),className:`w-full p-3 rounded-lg border-2 transition-all duration-300 text-left ${r.density===t?"border-gaming-primary bg-gaming-primary/20 shadow-lg":"border-gray-600 bg-gray-800/50 hover:border-gray-500 hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded ${t==="compact"?"bg-gray-700":"bg-gray-600"}`}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white text-sm capitalize font-medium",children:t}),e.jsx("div",{className:"text-xs text-gray-400",children:t==="compact"?"More content, less space":"Balanced layout"})]})]}),r.density===t&&e.jsx("div",{className:"w-5 h-5 bg-gaming-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]})},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:"w-4 h-4 bg-gradient-to-r from-yellow-500 to-orange-500 rounded"}),e.jsx("h4",{className:"text-sm font-medium text-white",children:"Lighting Effects"})]}),e.jsxs("div",{className:"mb-3 p-3 bg-gray-800/50 rounded-lg border border-white/5",children:[e.jsxs("p",{className:"text-xs text-gray-400",children:["Current: ",e.jsx("span",{className:"text-gaming-accent capitalize font-medium",children:r.lightingMode||"none"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:r.lightingMode==="none"?"ðŸš« No lighting effects - eye-friendly":r.lightingMode==="mood"?"ðŸŽ­ Mood-based lighting effects":"ðŸŒˆ RGB synchronized lighting"})]}),e.jsx("div",{className:"space-y-2",children:["none","mood","rgb-sync"].map(t=>e.jsx("button",{onClick:()=>k(t),className:`w-full p-3 rounded-lg border-2 transition-all duration-300 text-left ${r.lightingMode===t?"border-gaming-primary bg-gaming-primary/20 shadow-lg":"border-gray-600 bg-gray-800/50 hover:border-gray-500 hover:bg-gray-700/50"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-4 h-4 rounded-full ${t==="none"?"bg-gray-600":t==="mood"?"bg-purple-500":"bg-gradient-to-r from-red-500 to-green-500"}`}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white text-sm capitalize font-medium",children:t.replace("-"," ")}),e.jsx("div",{className:"text-xs text-gray-400",children:t==="none"?"Safe & comfortable":t==="mood"?"Dynamic mood lighting":"RGB effects"})]})]}),r.lightingMode===t&&e.jsx("div",{className:"w-5 h-5 bg-gaming-primary rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white text-xs",children:"âœ“"})})]})},t))})]}),e.jsxs("div",{className:"space-y-3 pt-4 border-t border-gray-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("button",{onClick:L,className:"px-4 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all duration-300 text-sm flex items-center justify-center gap-2",children:[e.jsx("span",{children:"â†º"}),"Reset"]}),e.jsxs("button",{onClick:()=>{const{setGlobalSettings:t}=O();t(r)},className:"px-4 py-3 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-all duration-300 text-sm flex items-center justify-center gap-2",children:[e.jsx("span",{children:"â˜…"}),"Save as Default"]})]}),e.jsxs("button",{onClick:i,className:"w-full px-4 py-3 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg hover:opacity-90 transition-all duration-300 text-sm font-medium shadow-lg flex items-center justify-center gap-2",children:[e.jsx("span",{children:"âœ“"}),"Done - Apply Changes"]})]}),e.jsx("div",{className:"mt-4 p-3 bg-gray-800/30 rounded-lg border border-gray-700",children:e.jsxs("p",{className:"text-xs text-gray-400 mb-2",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"}),' Changes are applied instantly. Use "Save as Default" to make these settings apply to all pages.']})})]})})]}):null},A=({value:s,suffix:d="",duration:i=1e3})=>{const[r,a]=b.useState(0);return b.useEffect(()=>{const l=Date.now(),c=0,g=s,h=()=>{const f=Date.now(),x=Math.min((f-l)/i,1),w=1-Math.pow(1-x,4),y=c+(g-c)*w;a(y),x<1&&requestAnimationFrame(h)};h()},[s,i]),e.jsxs(e.Fragment,{children:[Math.round(r),d]})},ue=({data:s,title:d,color:i="#3b82f6"})=>{const r=Math.max(...Object.values(s));return e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:d}),e.jsx("div",{className:"space-y-2",children:Object.entries(s).map(([a,l])=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-300 text-sm w-24 truncate",children:a}),e.jsx("div",{className:"flex-1 bg-gray-700 rounded-full h-4 relative overflow-hidden",children:e.jsx("div",{className:"h-full analytics-bar-fill",style:{width:`${l/r*100}%`,"--bar-color":i}})}),e.jsx("span",{className:"text-gray-300 text-sm w-8 text-right",children:l})]},a))})]})},pe=({data:s,title:d})=>{const i=Object.values(s).reduce((a,l)=>a+l,0),r=["#3b82f6","#10b981","#f59e0b","#ef4444","#8b5cf6","#ec4899"];return e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:d}),e.jsx("div",{className:"space-y-2",children:Object.entries(s).map(([a,l],c)=>{const g=i>0?l/i*100:0;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"analytics-legend-dot",style:{"--dot-color":r[c%r.length]}}),e.jsx("span",{className:"text-gray-300 text-sm flex-1",children:a}),e.jsxs("span",{className:"text-gray-300 text-sm",children:[g.toFixed(1),"%"]})]},a)})})]})},be=({data:s,title:d})=>{const i=Math.max(...Object.values(s)),r=["morning","afternoon","evening","late-night"];return e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:d}),e.jsx("div",{className:"flex items-end justify-between h-32 gap-2",children:r.map(a=>{const l=s[a]||0,c=i>0?l/i*100:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center",children:[e.jsx("div",{className:"w-full bg-gray-700 rounded-t relative",children:e.jsx("div",{className:"w-full bg-gradient-to-t from-blue-600 to-blue-400 rounded-t analytics-chart-bar",style:{"--bar-height":`${c}%`}})}),e.jsx("span",{className:"text-gray-400 text-xs mt-1",children:a}),e.jsx("span",{className:"text-gray-300 text-xs",children:l})]},a)})})]})},Pe=()=>{const[s,d]=b.useState(!0),[i,r]=b.useState(null),[a,l]=b.useState("week"),[c,g]=b.useState(null),[h,f]=b.useState(null),[x,w]=b.useState({contextualShown:0,personaShown:0,contextualClicked:0,personaClicked:0,sessionLengthUsage:{},moodUsage:{},timeOfDayUsage:{},personaEffectiveness:{}});b.useEffect(()=>{(async()=>{try{const o=await D("api/analytics/summary");if(o.ok){const u=await o.json();u.success&&r(u.data)}}catch{console.warn("Failed to fetch real analytics, falling back to local calculation")}finally{d(!1)}})()},[]),b.useEffect(()=>{const n=async()=>{try{const u=await D("api/analytics/events?limit=100");if(u.ok){const P=await u.json();if(P.success){const v={contextualShown:0,personaShown:0,contextualClicked:0,personaClicked:0,sessionLengthUsage:{},moodUsage:{},timeOfDayUsage:{},personaEffectiveness:{}};P.data.forEach(N=>{if(N.name==="recommendation_shown")N.payload.type==="contextual"?v.contextualShown++:N.payload.type==="persona"&&v.personaShown++;else if(N.name==="recommendation_clicked")N.payload.type==="contextual"?v.contextualClicked++:N.payload.type==="persona"&&v.personaClicked++;else if(N.name==="mood_selected"){const z=N.payload.moodId||N.payload.mood;z&&(v.moodUsage[z]=(v.moodUsage[z]||0)+1)}}),w(v)}}}catch{console.warn("Failed to load insights data from backend")}};n();const o=setInterval(n,1e4);return()=>clearInterval(o)},[]);const y=re(),{games:M}=H(),[k,L]=b.useState(!1),[t,U]=b.useState({isOpen:!1,title:"",description:"",content:void 0}),Y=b.useCallback((n,o,u)=>{var V,W;if(!y||!M.length)return null;const P=new Date,v=n==="week"?7:n==="month"?30:365,N=new Date(P.getTime()-v*24*60*60*1e3),z=M.filter(p=>{const j=p.lastPlayed?new Date(p.lastPlayed):null,T=!j||j>=N,I=!o||(p.emotionalTags||[]).some(C=>typeof C=="string"?C===o:C.name===o),G=!u||(p.genres||[]).some(C=>typeof C=="string"?C===u:C.name===u);return T&&I&&G}),ee=i?[{date:new Date().toLocaleDateString(),mood:i.favoriteMood,confidence:.8,sessionLength:i.averageSessionLength}]:[{date:new Date().toLocaleDateString(),mood:((V=y.mood)==null?void 0:V.moodId)||"zen",confidence:.8,sessionLength:60}],F={totalPlaytime:(i==null?void 0:i.totalPlaytime)??z.reduce((p,j)=>p+(j.hoursPlayed||0),0),averageSessionLength:(i==null?void 0:i.averageSessionLength)??60,mostPlayedMood:(i==null?void 0:i.favoriteMood)||((W=y.mood)==null?void 0:W.moodId)||"zen",moodDistribution:(i==null?void 0:i.moodDistribution)||{adrenaline:15,"brain-power":20,zen:25,story:10,social:15,creative:10,nostalgic:3,scary:2}},se={totalRecommendations:Math.floor(z.length*1.5),acceptedRecommendations:Math.floor(z.length*.85),successRate:85,topRecommendedMoods:Object.keys(F.moodDistribution).slice(0,3)},q={},$={};M.forEach(p=>{p.genres&&p.genres.forEach(j=>{const T=typeof j=="string"?j:j.name;$[T]||($[T]={playtime:0,rating:0,frequency:0}),p.hoursPlayed&&($[T].playtime+=p.hoursPlayed),p.userRating&&($[T].rating+=p.userRating),$[T].frequency++})});const te=Math.max(...Object.values($).map(p=>p.playtime),1),ae=Math.max(...Object.values($).map(p=>p.frequency),1);return Object.entries($).forEach(([p,j])=>{const T=j.playtime/te,I=j.frequency/ae,G=j.rating/5;q[p]=T*.5+I*.3+G*.2}),{moodTrends:ee,gamingPatterns:F,recommendationMetrics:se,userInsights:{bestGamingTime:"Evening",preferredSessionLength:60,moodStability:.75,genreAffinity:q}}},[y,M]),m=b.useMemo(()=>Y(a,c||void 0,h||void 0),[Y,a,c,h]);if(b.useEffect(()=>{d(!1)},[a]),s)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gaming-dark via-gray-900 to-gaming-darker flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gaming-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading analytics..."})]})});const Q=n=>({adrenaline:"bg-orange-500","brain-power":"bg-purple-500",zen:"bg-blue-500",story:"bg-indigo-500",social:"bg-green-500",creative:"bg-yellow-500",nostalgic:"bg-teal-500",scary:"bg-red-500"})[n]||"bg-gray-500",B=n=>{const o=_.find(u=>u.id===n);return(o==null?void 0:o.emoji)||"ðŸŽ®"},Z=()=>{U(n=>({...n,isOpen:!1}))},S=(n,o,u)=>{U({isOpen:!0,title:n,description:o,content:u})},E=(n,o)=>{var u;switch(n){case"totalPlaytime":S("Total Playtime Analysis","You have accumulated significant gaming time with consistent session patterns.",e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Session Breakdown"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Short sessions (<30min)"}),e.jsx("span",{className:"text-white",children:"25%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Medium sessions (30-90min)"}),e.jsx("span",{className:"text-white",children:"60%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-300",children:"Long sessions (>90min)"}),e.jsx("span",{className:"text-white",children:"15%"})]})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Peak Gaming Hours"}),e.jsxs("p",{className:"text-gray-300",children:["You play most during ",o.bestGamingTime||"evening"," hours"]})]})]}));break;case"favoriteMood":S(`${o.mostPlayedMood} Mood Analysis`,`Your most frequent gaming mood is ${o.mostPlayedMood}, indicating your preferred emotional state for gaming.`,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Mood Triggers"}),e.jsxs("p",{className:"text-gray-300",children:["You enter ",o.mostPlayedMood," mood most often when playing puzzle and creative games"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Session Performance"}),e.jsxs("p",{className:"text-gray-300",children:["In ",o.mostPlayedMood," mood, you tend to play 20% longer sessions"]})]})]}));break;case"recommendationSuccess":S("Recommendation Success Analysis",`You have a ${o.successRate}% success rate with our recommendations, showing strong trust in our system.`,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Acceptance Patterns"}),e.jsxs("p",{className:"text-gray-300",children:["You most often accept recommendations in the ",((u=o.topRecommendedMoods)==null?void 0:u[0])||"creative"," mood"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Favorite Categories"}),e.jsx("p",{className:"text-gray-300",children:"Puzzle and adventure games get the highest acceptance rates"})]})]}));break;case"moodStability":S("Mood Stability Analysis",`Your mood stability is ${Math.round(o.moodStability*100)}%, indicating ${o.moodStability>.7?"very consistent":o.moodStability>.4?"moderately consistent":"variable"} gaming patterns.`,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Consistency Factors"}),e.jsxs("p",{className:"text-gray-300",children:["Your mood is most stable during ",o.bestGamingTime||"evening"," gaming sessions"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Improvement Tips"}),e.jsx("p",{className:"text-gray-300",children:"Try maintaining consistent gaming times for better mood stability"})]})]}));break}},J=(n,o,u)=>{S(`${n} Mood Deep Dive`,`You've experienced ${n} mood ${o} times (${Math.round(u)}% of your sessions).`,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Your Most Played Games"}),e.jsxs("div",{className:"space-y-1",children:[((i==null?void 0:i.topGames)||[]).map((P,v)=>e.jsxs("div",{className:"text-gray-300",children:["â€¢ ",P.title," (",P.hours,"h played)"]},v)),(!(i!=null&&i.topGames)||i.topGames.length===0)&&e.jsx("div",{className:"text-gray-500 italic",children:"No games analyzed for this mood yet"})]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Time-of-Day Correlation"}),e.jsxs("p",{className:"text-gray-300",children:["You feel ",n," most often during evening hours"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Session Length"}),e.jsxs("p",{className:"text-gray-300",children:["Average ",n," sessions last 45 minutes"]})]})]}))},K=(n,o)=>{S(`${n} Genre Analysis`,`You have a ${Math.round(o*100)}% affinity for ${n} games.`,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsxs("h4",{className:"text-gaming-primary font-medium mb-2",children:["When You Play ",n]}),e.jsxs("p",{className:"text-gray-300",children:["You prefer ",n," games most during evening hours"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Typical Mood"}),e.jsxs("p",{className:"text-gray-300",children:["You're usually in a ",(m==null?void 0:m.gamingPatterns.mostPlayedMood)||"creative"," mood when playing ",n]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Session Duration"}),e.jsxs("p",{className:"text-gray-300",children:["Average ",n," sessions last ",(m==null?void 0:m.gamingPatterns.averageSessionLength)||60," minutes"]})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Most Played in Library"}),e.jsx("div",{className:"space-y-1",children:((i==null?void 0:i.topGames)||[]).map((u,P)=>e.jsxs("div",{className:"text-gray-300",children:["â€¢ ",u.title," (",u.hours,"h)"]},P))})]})]}))},X=n=>{switch(n){case"time":S("Best Gaming Time Analysis",`Your optimal gaming time is ${(m==null?void 0:m.userInsights.bestGamingTime)||"evening"}.`,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Why Evening Works Best"}),e.jsx("p",{className:"text-gray-300",children:"Your mood stability is highest during evening hours, leading to better gaming performance and enjoyment."})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Performance Metrics"}),e.jsx("p",{className:"text-gray-300",children:"Evening sessions show 25% higher completion rates and better mood consistency."})]})]}));break;case"session":S("Optimal Session Length Analysis",`Your ideal session length is ${(m==null?void 0:m.userInsights.preferredSessionLength)||60} minutes.`,e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Why This Length Works"}),e.jsx("p",{className:"text-gray-300",children:"This duration maximizes engagement while preventing fatigue, maintaining optimal focus and enjoyment."})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Session Patterns"}),e.jsx("p",{className:"text-gray-300",children:"Sessions longer than 90 minutes show decreased performance, while sessions under 30 minutes feel incomplete."})]})]}));break;case"moods":S("Top Recommendation Moods Analysis","These moods consistently lead to your best gaming experiences.",e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Why These Moods Work"}),e.jsx("p",{className:"text-gray-300",children:"Creative, Zen, and Brain Power moods align with your playstyle, maximizing enjoyment and engagement."})]}),e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h4",{className:"text-gaming-primary font-medium mb-2",children:"Recommendation Success"}),e.jsx("p",{className:"text-gray-300",children:"Games recommended during these moods have a 85% acceptance rate and higher satisfaction scores."})]})]}));break}};return e.jsxs("div",{className:`min-h-screen bg-gradient-to-br from-gaming-dark via-gray-900 to-gaming-darker p-6 ${k?"ring-2 ring-gaming-primary/50 ring-offset-2 ring-offset-gray-900":""}`,children:[e.jsxs("div",{className:"mb-12 relative",children:[e.jsx("div",{className:"absolute inset-0 -top-20 -left-20 w-[500px] h-[500px] bg-gaming-primary/10 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute inset-0 -top-10 -right-10 w-[400px] h-[400px] bg-gaming-accent/5 rounded-full blur-[80px]"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"relative",children:e.jsx("h1",{className:"text-5xl font-gaming font-bold text-white",children:"Mood Analytics"})}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(xe,{onClick:()=>L(!k)})})]}),e.jsx("p",{className:"text-white/40 font-medium text-xl tracking-wide uppercase font-gaming",children:"Your gaming rhythm, decoded."}),y&&e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"px-3 py-1 bg-gaming-primary/20 text-gaming-primary rounded-full text-sm font-medium border border-gaming-primary/30 hover:bg-gaming-primary/30 transition-colors duration-200",children:y.traits.archetypeId}),y.mood&&e.jsx("span",{className:"px-3 py-1 bg-gaming-accent/20 text-gaming-accent rounded-full text-sm font-medium border border-gaming-accent/30 capitalize hover:bg-gaming-accent/30 transition-colors duration-200",children:y.mood.moodId}),e.jsxs("span",{className:"px-3 py-1 bg-purple-500/20 text-purple-400 rounded-full text-sm font-medium border border-purple-500/30 hover:bg-purple-500/30 transition-colors duration-200",children:[(m==null?void 0:m.userInsights.bestGamingTime)||"Evening"," Player"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-6 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Time Range:"}),e.jsx("div",{className:"flex gap-1",children:["week","month","all"].map(n=>e.jsx("button",{onClick:()=>l(n),className:`px-3 py-1 rounded-lg text-sm font-medium transition-colors ${a===n?"bg-gaming-primary text-white":"bg-gray-800 text-gray-300 hover:bg-gray-700"}`,children:n.charAt(0).toUpperCase()+n.slice(1)},n))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gray-400 text-sm",children:"Mood:"}),e.jsxs("select",{value:c||"",onChange:n=>g(n.target.value||null),"aria-label":"Filter by mood",className:"bg-gray-800 text-gray-300 rounded-lg px-3 py-1 text-sm border border-gray-600 focus:border-gaming-primary focus:outline-none",children:[e.jsx("option",{value:"",children:"All Moods"}),_.map(n=>e.jsxs("option",{value:n.id,children:[n.emoji," ",n.name]},n.id))]})]}),(c||h)&&e.jsx("button",{onClick:()=>{g(null),f(null)},className:"px-3 py-1 bg-red-500/20 text-red-400 rounded-lg text-sm font-medium border border-red-500/30 hover:bg-red-500/30 transition-colors",children:"Clear Filters"})]})]})]}),e.jsxs("div",{className:"space-y-8",children:[s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-gaming-primary border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Loading analytics data..."})]}),!s&&(!m||M.length===0)&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"w-24 h-24 mx-auto mb-6 rounded-full bg-gray-800/50 flex items-center justify-center",children:e.jsx("span",{className:"text-4xl",children:"ðŸ“Š"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Gaming Data Yet"}),e.jsx("p",{className:"text-gray-400 mb-6 max-w-md mx-auto",children:"Start by importing your Steam library or adding games manually to see your gaming analytics and insights."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx("button",{onClick:()=>window.location.href="/library",className:"bg-gaming-primary hover:bg-gaming-primary/80 text-white font-medium py-2 px-6 rounded-lg transition-colors",children:"Go to Library"}),e.jsx("button",{onClick:()=>window.location.href="/library?import=steam",className:"bg-gray-800 hover:bg-gray-700 text-white font-medium py-2 px-6 rounded-lg border border-gray-600 transition-colors",children:"Import Steam Games"})]})]}),m&&e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"glass-morphism-dark rounded-xl p-6 border border-white/5 hover:border-gaming-primary/30 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>E("totalPlaytime",m.gamingPatterns),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-3xl",children:"ðŸŽ®"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Total Hours"})]}),e.jsx(A,{value:m.gamingPatterns.totalPlaytime,suffix:"h"})]}),e.jsxs("div",{className:"glass-morphism-dark rounded-xl p-6 border border-white/5 hover:border-gaming-primary/30 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>E("favoriteMood",m.gamingPatterns),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-3xl",children:B(m.gamingPatterns.mostPlayedMood)}),e.jsx("span",{className:"text-xs text-gray-400",children:"Favorite Mood"})]}),e.jsx("div",{className:"text-white font-medium capitalize",children:m.gamingPatterns.mostPlayedMood})]}),e.jsxs("div",{className:"glass-morphism-dark rounded-xl p-6 border border-white/5 hover:border-gaming-primary/30 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>E("recommendationSuccess",m.recommendationMetrics),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-3xl",children:"ðŸŽ¯"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Success Rate"})]}),e.jsx(A,{value:m.recommendationMetrics.successRate,suffix:"%"})]}),e.jsxs("div",{className:"glass-morphism-dark rounded-xl p-6 border border-white/5 hover:border-gaming-primary/30 transition-all duration-300 cursor-pointer hover:scale-105",onClick:()=>E("moodStability",m.userInsights),children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("span",{className:"text-3xl",children:"ðŸ“Š"}),e.jsx("span",{className:"text-xs text-gray-400",children:"Mood Stability"})]}),e.jsx(A,{value:Math.round(m.userInsights.moodStability*100),suffix:"%"})]})]}),e.jsx(ge,{analyticsData:m,getMoodEmoji:B,getMoodColor:Q,AnimatedNumber:A,onCardClick:E,onMoodClick:J,onGenreClick:K,onInsightClick:X}),e.jsxs("div",{className:"mt-16",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h2",{className:"text-3xl font-black text-white mb-4",children:"System Insights"}),e.jsx("p",{className:"text-gray-400",children:"Real-time analytics for recommendation system performance"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[e.jsx("h3",{className:"text-gray-300 text-sm mb-2",children:"Contextual CTR"}),e.jsxs("p",{className:"text-3xl font-bold text-green-400",children:[x.contextualShown>0?(x.contextualClicked/x.contextualShown*100).toFixed(1):"0.0","%"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[e.jsx("h3",{className:"text-gray-300 text-sm mb-2",children:"Persona CTR"}),e.jsxs("p",{className:"text-3xl font-bold text-purple-400",children:[x.personaShown>0?(x.personaClicked/x.personaShown*100).toFixed(1):"0.0","%"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[e.jsx("h3",{className:"text-gray-300 text-sm mb-2",children:"Contextual Shown"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x.contextualShown})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-6 border border-white/20",children:[e.jsx("h3",{className:"text-gray-300 text-sm mb-2",children:"Persona Shown"}),e.jsx("p",{className:"text-3xl font-bold text-white",children:x.personaShown})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:[e.jsx(ue,{data:x.moodUsage,title:"Most Selected Master Moods",color:"#8b5cf6"}),e.jsx(pe,{data:x.sessionLengthUsage,title:"Session Length Distribution"}),e.jsx(be,{data:x.timeOfDayUsage,title:"Time-of-Day Engagement"}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-lg p-4 border border-white/20",children:[e.jsx("h3",{className:"text-white font-semibold mb-3",children:"Persona Effectiveness"}),e.jsx("div",{className:"space-y-2",children:Object.entries(x.personaEffectiveness).slice(0,5).map(([n,o])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-gray-300 text-sm truncate flex-1",children:n}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-gray-400 text-xs",children:[o.impressions," imp"]}),e.jsxs("span",{className:"text-gray-400 text-xs",children:[o.clicks," clicks"]}),e.jsxs("span",{className:"text-green-400 text-sm font-medium",children:[o.impressions>0?(o.clicks/o.impressions*100).toFixed(1):0,"%"]})]})]},n))})]})]})]})]}),t.isOpen&&e.jsx(le,{isOpen:t.isOpen,onClose:Z,title:t.title,description:t.description,children:t.content}),k&&e.jsx(he,{pageId:"analytics",isOpen:k,onClose:()=>L(!1)})]})]})};export{Pe as Analytics};
