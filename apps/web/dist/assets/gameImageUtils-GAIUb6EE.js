import{r as n}from"./index-2zxZw9Mw.js";function h(e,s={}){const t=n.useRef(null),r=n.useRef(new Set);return n.useEffect(()=>(t.current=new IntersectionObserver(e,{threshold:.1,rootMargin:"50px",...s}),()=>{t.current&&(t.current.disconnect(),t.current=null),r.current.clear()}),[e,s]),{observe:a=>{t.current&&a&&(t.current.observe(a),r.current.add(a))},unobserve:a=>{t.current&&a&&(t.current.unobserve(a),r.current.delete(a))}}}class o{cache=new Map;maxSize;constructor(s=50){this.maxSize=s}get(s){const t=this.cache.get(s);return t?(this.cache.delete(s),this.cache.set(s,t),t):null}set(s,t){if(this.cache.size>=this.maxSize){const r=this.cache.keys().next().value;r&&this.cache.delete(r)}this.cache.set(s,t)}clear(){this.cache.clear()}size(){return this.cache.size}}const i=new o;function d(e){return new Promise((s,t)=>{const r=i.get(e);if(r){s(r);return}const c=new Image;c.onload=()=>{i.set(e,c),s(c)},c.onerror=t,c.src=e})}function l(e,s="616x353"){const t={square:"800x800",portrait:"600x900",landscape:"1200x900","616x353":"616x353","800x800":"800x800","1200x900":"1200x900"},r=t[s]||t["616x353"];return[`https://cdn.cloudflare.steamstatic.com/steam/apps/${e.appId||e.id}/capsule_616x353.jpg`,`https://cdn.cloudflare.steamstatic.com/steam/apps/${e.appId||e.id}/header.jpg`,`https://cdn.cloudflare.steamstatic.com/steam/apps/${e.appId||e.id}/library_600x900.jpg`,e.coverImage,e.headerImage,e.imageUrl,e.steamHeaderImage,e.steamCapsuleImage,e.capsuleImage,e.headerImage,e.smallHeaderImage,`https://picsum.photos/seed/${e.title.replace(/\s+/g,"-")}-${e.id}/${r}.jpg`].filter(Boolean)[0]||`https://picsum.photos/seed/${e.title.replace(/\s+/g,"-")}-${e.id}/${r}.jpg`}export{l as g,d as p,h as u};
