var Oe=Object.defineProperty;var De=(s,t,a)=>t in s?Oe(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a;var ne=(s,t,a)=>(De(s,typeof t!="symbol"?t+"":t,a),a);import{r as B,n as Pe,R as ce,e as Me,j as e,u as Ue,m as M}from"./index-db369dc9.js";import{u as Re}from"./useLibraryStore-cd6ac89d.js";import{P as l}from"./platforms-1b2f755f.js";import{g as Ye,M as Ge}from"./masterMoods-2bce0da6.js";import{u as Fe,b as de}from"./useCurrentMood-a662386a.js";function Ve(s){const{games:t,intelligence:a}=Re(),r=Fe();return B.useMemo(()=>{try{const n=t.find(u=>u.id===s);if(!n)return console.warn(`Game ${s} not found in library`),de({signals:Se(),moodEntry:r});const i=$e(n);return de({signals:i,moodEntry:r})}catch(n){return console.warn(`Game persona calculation failed for ${s}, using fallback:`,n),de({signals:Se(),moodEntry:r})}},[t,a,s,r])}function $e(s){var y,v,P,S,w,E;const t={},a=s.hoursPlayed||0;a>0&&[...s.genres||[],...s.subgenres||[]].forEach(A=>{t[A]=a});const r=45,n=1,u=((y=s.tags)==null?void 0:y.some(x=>x.toLowerCase().includes("multiplayer")||x.toLowerCase().includes("co-op")||x.toLowerCase().includes("pvp")||x.toLowerCase().includes("online")))||((v=s.genres)==null?void 0:v.some(x=>x.toLowerCase().includes("multiplayer")||x.toLowerCase().includes("mmorpg")))?1:0;let f=.3;s.playStatus==="completed"?f=1:s.playStatus==="playing"?f=.5:s.playStatus==="backlog"&&(f=.1);let d="Normal";const c=(P=s.tags)==null?void 0:P.filter(x=>x.toLowerCase().includes("hard")||x.toLowerCase().includes("difficult")||x.toLowerCase().includes("challenging")||x.toLowerCase().includes("brutal")),p=(S=s.genres)==null?void 0:S.filter(x=>x.toLowerCase().includes("roguelike")||x.toLowerCase().includes("souls")||x.toLowerCase().includes("hardcore"));(c.length>0||p.length>0)&&(d="Hard");const m=(w=s.tags)==null?void 0:w.filter(x=>x.toLowerCase().includes("casual")||x.toLowerCase().includes("relaxed")||x.toLowerCase().includes("easy")),j=(E=s.genres)==null?void 0:E.filter(x=>x.toLowerCase().includes("casual")||x.toLowerCase().includes("puzzle")||x.toLowerCase().includes("simulation"));return(m.length>0||j.length>0)&&(d="Relaxed"),{playtimeByGenre:t,averageSessionLengthMinutes:r,sessionsPerWeek:n,difficultyPreference:d,multiplayerRatio:u,lateNightRatio:.2,completionRate:f}}function Se(){return{playtimeByGenre:{},averageSessionLengthMinutes:60,sessionsPerWeek:1,difficultyPreference:"Normal",multiplayerRatio:.5,lateNightRatio:.2,completionRate:.5}}const L={[l.RETROARCH]:[".zip",".7z",".rar",".nes",".snes",".gb",".gbc",".gba",".nds",".n64",".psx",".ps2",".iso",".bin",".cue"],[l.DOLPHIN]:[".iso",".gcz",".gcm",".wbfs",".wad",".rvz"],[l.PROJECT64]:[".z64",".n64",".v64",".rom",".zip"],[l.PCSX2]:[".iso",".bin",".img",".mds",".z"],[l.RPCS3]:[".iso",".bin",".img",".ps3"],[l.CEMU]:[".wud",".wux",".iso",".rpx"],[l.YUZU]:[".nsp",".xci",".nca"],[l.RYUJINX]:[".nsp",".xci",".nca"],[l.MAME]:[".zip",".7z",".chd",".cue",".bin"],[l.DOSBOX]:[".exe",".com",".bat",".conf"],[l.SCUMMVM]:[".scummvm",".exe",".com"],[l.VITA3K]:[".vpk",".zip"],[l.XEMU]:[".iso",".xiso",".cso",".z"],[l.MELONDS]:[".nds",".zip",".7z"],[l.PPSSPP]:[".iso",".cso",".pbp",".elf"],[l.CITRA]:[".3ds",".3dsx",".cia",".cxi"],[l.DESMUME]:[".nds",".zip"],[l.STEAM]:[],[l.XBOX]:[],[l.PLAYSTATION]:[],[l.NINTENDO]:[],[l.EPIC]:[],[l.GOG]:[],[l.ORIGIN]:[],[l.UPLAY]:[],[l.BATTLENET]:[],[l.DISCORD]:[],[l.ITCH]:[],[l.HUMBLE]:[],[l.CUSTOM]:[]},ue=[{platform:l.RETROARCH,name:"RetroArch",romExtensions:L[l.RETROARCH],supportedSystems:["NES","SNES","GB","GBC","GBA","N64","PS1","Genesis","Arcade"],defaultArgs:["--fullscreen"]},{platform:l.DOLPHIN,name:"Dolphin",romExtensions:L[l.DOLPHIN],supportedSystems:["GameCube","Wii"],defaultArgs:["-b","-e"]},{platform:l.PROJECT64,name:"Project64",romExtensions:L[l.PROJECT64],supportedSystems:["Nintendo 64"],defaultArgs:[]},{platform:l.PCSX2,name:"PCSX2",romExtensions:L[l.PCSX2],supportedSystems:["PlayStation 2"],defaultArgs:["--fullscreen"]},{platform:l.CEMU,name:"Cemu",romExtensions:L[l.CEMU],supportedSystems:["Wii U"],defaultArgs:["-f"]},{platform:l.YUZU,name:"Yuzu",romExtensions:L[l.YUZU],supportedSystems:["Nintendo Switch"],defaultArgs:[]},{platform:l.RYUJINX,name:"Ryujinx",romExtensions:L[l.RYUJINX],supportedSystems:["Nintendo Switch"],defaultArgs:[]},{platform:l.MAME,name:"MAME",romExtensions:L[l.MAME],supportedSystems:["Arcade"],defaultArgs:[]},{platform:l.DOSBOX,name:"DOSBox",romExtensions:L[l.DOSBOX],supportedSystems:["DOS"],defaultArgs:[]},{platform:l.SCUMMVM,name:"ScummVM",romExtensions:L[l.SCUMMVM],supportedSystems:["Point & Click Adventure"],defaultArgs:["--fullscreen"]},{platform:l.PPSSPP,name:"PPSSPP",romExtensions:L[l.PPSSPP],supportedSystems:["PlayStation Portable"],defaultArgs:[]},{platform:l.CITRA,name:"Citra",romExtensions:L[l.CITRA],supportedSystems:["Nintendo 3DS"],defaultArgs:[]},{platform:l.DESMUME,name:"DeSmuME",romExtensions:L[l.DESMUME],supportedSystems:["Nintendo DS"],defaultArgs:[]}];class Be{async scanDirectory(t,a){const r={games:[],errors:[],scannedFiles:0,foundGames:0};try{const n=await this.getFilesInDirectory(t);r.scannedFiles=n.length;const i=a||Object.keys(L);for(const u of n){const f=this.getFileExtension(u.name),d=this.detectPlatformForExtension(f,i);if(d){const c=await this.createGameFromRom(u,d);r.games.push(c),r.foundGames++}}}catch(n){r.errors.push(`Failed to scan directory: ${n}`)}return r}async getFilesInDirectory(t){return new DataTransfer().files}getFileExtension(t){const a=t.lastIndexOf(".");return a!==-1?t.substring(a).toLowerCase():""}detectPlatformForExtension(t,a){for(const r of a){const n=L[r];if(n&&n.includes(t))return r}return null}async createGameFromRom(t,a){const r=ue.find(d=>d.platform===a),n=t.name.replace(/\.[^/.]+$/,""),i=this.extractGameMetadata(n);return{...{id:`${a}-${t.name}`,title:i.title||n,description:i.description||`A ${(r==null?void 0:r.supportedSystems[0])||a} game`,platforms:[{code:a,name:(r==null?void 0:r.name)||a,icon:`/platforms/${a}.png`}],genres:i.genres||[],tags:i.tags||["Retro",(r==null?void 0:r.supportedSystems[0])||"Emulated"],coverImage:i.coverImage||"/assets/default-rom-cover.jpg",playStatus:"unplayed",isFavorite:!1,addedAt:new Date,hoursPlayed:0,userRating:void 0,globalRating:void 0,releaseYear:i.releaseYear,subgenres:[],emotionalTags:[]},romPath:t.path||"",emulatorConfig:r,fileSize:t.size}}extractGameMetadata(t){const a=t.replace(/\((USA|EUR|JPN|World|NTSC|PAL)\)/gi,"").replace(/\(Rev\s*[0-9]+\)/gi,"").replace(/\[.*?\]/g,"").replace(/\.(v[0-9]+|Rev\s*[0-9]+|Beta|Alpha|Demo)/gi,"").trim(),r=a.match(/\((19|20)\d{2}\)/),n=r?parseInt(r[0].slice(1,-1)):void 0;return{title:a.replace(/\(\d{4}\)/g,"").trim(),releaseYear:n,tags:["Retro","Emulated"]}}getEmulatorConfig(t){return ue.find(a=>a.platform===t)}getSupportedPlatforms(){return ue.map(t=>t.platform)}isEmulatorPlatform(t){return this.getSupportedPlatforms().includes(t)}}const me=new Be;class ze{constructor(){ne(this,"configs",new Map)}setConfigs(t){this.configs.clear(),t.forEach(a=>{this.configs.set(a.platform,a)})}async launchGame(t,a={}){var n,i;const r={success:!1,launchedAt:new Date};try{const u=(i=(n=t.platforms)==null?void 0:n[0])==null?void 0:i.code;if(!u||!me.isEmulatorPlatform(u))return r.error="Game is not an emulator game",r;const f=this.configs.get(u);if(!f||!f.executablePath)return r.error=`Emulator not configured for ${u}`,r;const d=t.romPath||a.romPath;if(!d)return r.error="ROM path not found",r;const c=this.buildLaunchCommand(f,d,a),p=await this.executeLaunchCommand(c);r.success=!0,r.processId=p}catch(u){r.error=`Failed to launch game: ${u}`,console.error("Launch error:",u)}return r}buildLaunchCommand(t,a,r){const n=[t.executablePath];if(t.defaultArgs&&n.push(...t.defaultArgs),r.customArgs&&n.push(...r.customArgs),r.fullscreen){const i=this.getFullscreenArg(t.platform);i&&n.push(i)}return n.push(a),n}getFullscreenArg(t){return{[l.RETROARCH]:"--fullscreen",[l.DOLPHIN]:"-b",[l.PROJECT64]:"--fullscreen",[l.PCSX2]:"--fullscreen",[l.CEMU]:"-f",[l.YUZU]:"--fullscreen",[l.RYUJINX]:"--fullscreen",[l.MAME]:"--fullscreen",[l.DOSBOX]:"--fullscreen",[l.SCUMMVM]:"--fullscreen",[l.PPSSPP]:"--fullscreen",[l.CITRA]:"--fullscreen",[l.DESMUME]:"--fullscreen",[l.STEAM]:"",[l.XBOX]:"",[l.PLAYSTATION]:"",[l.NINTENDO]:"",[l.EPIC]:"",[l.GOG]:"",[l.ORIGIN]:"",[l.UPLAY]:"",[l.BATTLENET]:"",[l.DISCORD]:"",[l.ITCH]:"",[l.HUMBLE]:"",[l.CUSTOM]:"",[l.RPCS3]:"",[l.VITA3K]:"",[l.XEMU]:"",[l.MELONDS]:""}[t]||null}async executeLaunchCommand(t){try{console.log("üéÆ Launching emulator:",t.join(" ")),await new Promise(r=>setTimeout(r,1e3));const a=`emu_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;return console.log("‚úÖ Emulator launched with PID:",a),a}catch(a){throw console.error("‚ùå Failed to launch emulator:",a),new Error(`Failed to launch emulator: ${a}`)}}isConfigured(t){const a=this.configs.get(t);return!!(a&&a.executablePath)}getConfiguredEmulators(){return Array.from(this.configs.keys()).filter(t=>this.isConfigured(t))}async testEmulator(t){const a={success:!1,launchedAt:new Date};try{const r=this.configs.get(t);if(!r||!r.executablePath)return a.error=`Emulator not configured for ${t}`,a;const n=[r.executablePath,"--help"],i=await this.executeLaunchCommand(n);a.success=!0,a.processId=i}catch(r){a.error=`Failed to test emulator: ${r}`}return a}getLaunchCommandPreview(t,a={}){var u,f;const r=(f=(u=t.platforms)==null?void 0:u[0])==null?void 0:f.code;if(!r||!me.isEmulatorPlatform(r))return[];const n=this.configs.get(r);if(!n)return[];const i=t.romPath||a.romPath||"<ROM_PATH>";return this.buildLaunchCommand(n,i,a)}}const qe=new ze;var ke={exports:{}},He="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",We=He,Xe=We;function Ie(){}function Le(){}Le.resetWarningCache=Ie;var Qe=function(){function s(r,n,i,u,f,d){if(d!==Xe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}s.isRequired=s;function t(){return s}var a={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:t,element:s,elementType:s,instanceOf:t,node:s,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Le,resetWarningCache:Ie};return a.PropTypes=a,a};ke.exports=Qe();var Je=ke.exports;const k=Pe(Je);var Ze=function s(t,a){if(t===a)return!0;if(t&&a&&typeof t=="object"&&typeof a=="object"){if(t.constructor!==a.constructor)return!1;var r,n,i;if(Array.isArray(t)){if(r=t.length,r!=a.length)return!1;for(n=r;n--!==0;)if(!s(t[n],a[n]))return!1;return!0}if(t.constructor===RegExp)return t.source===a.source&&t.flags===a.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===a.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===a.toString();if(i=Object.keys(t),r=i.length,r!==Object.keys(a).length)return!1;for(n=r;n--!==0;)if(!Object.prototype.hasOwnProperty.call(a,i[n]))return!1;for(n=r;n--!==0;){var u=i[n];if(!s(t[u],a[u]))return!1}return!0}return t!==t&&a!==a};const Ke=Pe(Ze);var pe={exports:{}},_e;/**
* @link https://github.com/gajus/sister for the canonical source repository
* @license https://github.com/gajus/sister/blob/master/LICENSE BSD 3-Clause
*/_e=function(){var s={},t={};return s.on=function(a,r){var n={name:a,handler:r};return t[a]=t[a]||[],t[a].unshift(n),n},s.off=function(a){var r=t[a.name].indexOf(a);r!==-1&&t[a.name].splice(r,1)},s.trigger=function(a,r){var n=t[a],i;if(n)for(i=n.length;i--;)n[i].handler(r)},s};var et=_e,he={exports:{}},tt=function(t,a,r){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");typeof a=="function"&&(r=a,a={}),a=a||{},r=r||function(){},i.type=a.type||"text/javascript",i.charset=a.charset||"utf8",i.async="async"in a?!!a.async:!0,i.src=t,a.attrs&&st(i,a.attrs),a.text&&(i.text=""+a.text);var u="onload"in i?Ce:at;u(i,r),i.onload||Ce(i,r),n.appendChild(i)};function st(s,t){for(var a in t)s.setAttribute(a,t[a])}function Ce(s,t){s.onload=function(){this.onerror=this.onload=null,t(null,s)},s.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),s)}}function at(s,t){s.onreadystatechange=function(){this.readyState!="complete"&&this.readyState!="loaded"||(this.onreadystatechange=null,t(null,s))}}(function(s,t){Object.defineProperty(t,"__esModule",{value:!0});var a=tt,r=n(a);function n(i){return i&&i.__esModule?i:{default:i}}t.default=function(i){var u=new Promise(function(f){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function){f(window.YT);return}else{var d=window.location.protocol==="http:"?"http:":"https:";(0,r.default)(d+"//www.youtube.com/iframe_api",function(p){p&&i.trigger("error",p)})}var c=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){c&&c(),f(window.YT)}});return u},s.exports=t.default})(he,he.exports);var rt=he.exports,ge={exports:{}},fe={exports:{}},xe={exports:{}},Z=1e3,K=Z*60,ee=K*60,te=ee*24,nt=te*365.25,it=function(s,t){t=t||{};var a=typeof s;if(a==="string"&&s.length>0)return ot(s);if(a==="number"&&isNaN(s)===!1)return t.long?ct(s):lt(s);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(s))};function ot(s){if(s=String(s),!(s.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(s);if(t){var a=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return a*nt;case"days":case"day":case"d":return a*te;case"hours":case"hour":case"hrs":case"hr":case"h":return a*ee;case"minutes":case"minute":case"mins":case"min":case"m":return a*K;case"seconds":case"second":case"secs":case"sec":case"s":return a*Z;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}function lt(s){return s>=te?Math.round(s/te)+"d":s>=ee?Math.round(s/ee)+"h":s>=K?Math.round(s/K)+"m":s>=Z?Math.round(s/Z)+"s":s+"ms"}function ct(s){return ie(s,te,"day")||ie(s,ee,"hour")||ie(s,K,"minute")||ie(s,Z,"second")||s+" ms"}function ie(s,t,a){if(!(s<t))return s<t*1.5?Math.floor(s/t)+" "+a:Math.ceil(s/t)+" "+a+"s"}(function(s,t){t=s.exports=n.debug=n.default=n,t.coerce=d,t.disable=u,t.enable=i,t.enabled=f,t.humanize=it,t.names=[],t.skips=[],t.formatters={};var a;function r(c){var p=0,m;for(m in c)p=(p<<5)-p+c.charCodeAt(m),p|=0;return t.colors[Math.abs(p)%t.colors.length]}function n(c){function p(){if(p.enabled){var m=p,j=+new Date,y=j-(a||j);m.diff=y,m.prev=a,m.curr=j,a=j;for(var v=new Array(arguments.length),P=0;P<v.length;P++)v[P]=arguments[P];v[0]=t.coerce(v[0]),typeof v[0]!="string"&&v.unshift("%O");var S=0;v[0]=v[0].replace(/%([a-zA-Z%])/g,function(E,x){if(E==="%%")return E;S++;var A=t.formatters[x];if(typeof A=="function"){var N=v[S];E=A.call(m,N),v.splice(S,1),S--}return E}),t.formatArgs.call(m,v);var w=p.log||t.log||console.log.bind(console);w.apply(m,v)}}return p.namespace=c,p.enabled=t.enabled(c),p.useColors=t.useColors(),p.color=r(c),typeof t.init=="function"&&t.init(p),p}function i(c){t.save(c),t.names=[],t.skips=[];for(var p=(typeof c=="string"?c:"").split(/[\s,]+/),m=p.length,j=0;j<m;j++)p[j]&&(c=p[j].replace(/\*/g,".*?"),c[0]==="-"?t.skips.push(new RegExp("^"+c.substr(1)+"$")):t.names.push(new RegExp("^"+c+"$")))}function u(){t.enable("")}function f(c){var p,m;for(p=0,m=t.skips.length;p<m;p++)if(t.skips[p].test(c))return!1;for(p=0,m=t.names.length;p<m;p++)if(t.names[p].test(c))return!0;return!1}function d(c){return c instanceof Error?c.stack||c.message:c}})(xe,xe.exports);var dt=xe.exports;(function(s,t){t=s.exports=dt,t.log=n,t.formatArgs=r,t.save=i,t.load=u,t.useColors=a,t.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:f(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function a(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}t.formatters.j=function(d){try{return JSON.stringify(d)}catch(c){return"[UnexpectedJSONParseError]: "+c.message}};function r(d){var c=this.useColors;if(d[0]=(c?"%c":"")+this.namespace+(c?" %c":" ")+d[0]+(c?"%c ":" ")+"+"+t.humanize(this.diff),!!c){var p="color: "+this.color;d.splice(1,0,p,"color: inherit");var m=0,j=0;d[0].replace(/%[a-zA-Z%]/g,function(y){y!=="%%"&&(m++,y==="%c"&&(j=m))}),d.splice(j,0,p)}}function n(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function i(d){try{d==null?t.storage.removeItem("debug"):t.storage.debug=d}catch{}}function u(){var d;try{d=t.storage.debug}catch{}return!d&&typeof process<"u"&&"env"in process&&(d={}.DEBUG),d}t.enable(u());function f(){try{return window.localStorage}catch{}}})(fe,fe.exports);var ut=fe.exports,ye={exports:{}};(function(s,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],s.exports=t.default})(ye,ye.exports);var mt=ye.exports,ve={exports:{}};(function(s,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],s.exports=t.default})(ve,ve.exports);var pt=ve.exports,be={exports:{}},Ne={exports:{}};(function(s,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},s.exports=t.default})(Ne,Ne.exports);var ht=Ne.exports;(function(s,t){Object.defineProperty(t,"__esModule",{value:!0});var a=ht,r=n(a);function n(i){return i&&i.__esModule?i:{default:i}}t.default={pauseVideo:{acceptableStates:[r.default.ENDED,r.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[r.default.ENDED,r.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[r.default.ENDED,r.default.PLAYING,r.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},s.exports=t.default})(be,be.exports);var gt=be.exports;(function(s,t){Object.defineProperty(t,"__esModule",{value:!0});var a=ut,r=p(a),n=mt,i=p(n),u=pt,f=p(u),d=gt,c=p(d);function p(y){return y&&y.__esModule?y:{default:y}}var m=(0,r.default)("youtube-player"),j={};j.proxyEvents=function(y){var v={},P=function(I){var O="on"+I.slice(0,1).toUpperCase()+I.slice(1);v[O]=function(D){m('event "%s"',O,D),y.trigger(I,D)}},S=!0,w=!1,E=void 0;try{for(var x=f.default[Symbol.iterator](),A;!(S=(A=x.next()).done);S=!0){var N=A.value;P(N)}}catch(_){w=!0,E=_}finally{try{!S&&x.return&&x.return()}finally{if(w)throw E}}return v},j.promisifyPlayer=function(y){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,P={},S=function(O){v&&c.default[O]?P[O]=function(){for(var D=arguments.length,U=Array(D),R=0;R<D;R++)U[R]=arguments[R];return y.then(function(Y){var V=c.default[O],se=Y.getPlayerState(),z=Y[O].apply(Y,U);return V.stateChangeRequired||Array.isArray(V.acceptableStates)&&V.acceptableStates.indexOf(se)===-1?new Promise(function(q){var ae=function H(){var re=Y.getPlayerState(),W=void 0;typeof V.timeout=="number"&&(W=setTimeout(function(){Y.removeEventListener("onStateChange",H),q()},V.timeout)),Array.isArray(V.acceptableStates)&&V.acceptableStates.indexOf(re)!==-1&&(Y.removeEventListener("onStateChange",H),clearTimeout(W),q())};Y.addEventListener("onStateChange",ae)}).then(function(){return z}):z})}:P[O]=function(){for(var D=arguments.length,U=Array(D),R=0;R<D;R++)U[R]=arguments[R];return y.then(function(Y){return Y[O].apply(Y,U)})}},w=!0,E=!1,x=void 0;try{for(var A=i.default[Symbol.iterator](),N;!(w=(N=A.next()).done);w=!0){var _=N.value;S(_)}}catch(I){E=!0,x=I}finally{try{!w&&A.return&&A.return()}finally{if(E)throw x}}return P},t.default=j,s.exports=t.default})(ge,ge.exports);var ft=ge.exports;(function(s,t){Object.defineProperty(t,"__esModule",{value:!0});var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(m){return typeof m}:function(m){return m&&typeof Symbol=="function"&&m.constructor===Symbol&&m!==Symbol.prototype?"symbol":typeof m},r=et,n=c(r),i=rt,u=c(i),f=ft,d=c(f);function c(m){return m&&m.__esModule?m:{default:m}}var p=void 0;t.default=function(m){var j=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,v=(0,n.default)();if(p||(p=(0,u.default)(v)),j.events)throw new Error("Event handlers cannot be overwritten.");if(typeof m=="string"&&!document.getElementById(m))throw new Error('Element "'+m+'" does not exist.');j.events=d.default.proxyEvents(v);var P=new Promise(function(w){if((typeof m>"u"?"undefined":a(m))==="object"&&m.playVideo instanceof Function){var E=m;w(E)}else p.then(function(x){var A=new x.Player(m,j);return v.on("ready",function(){w(A)}),null})}),S=d.default.promisifyPlayer(P,y);return S.on=v.on,S.off=v.off,S},s.exports=t.default})(pe,pe.exports);var xt=pe.exports;const yt=Pe(xt);var vt=Object.defineProperty,bt=Object.defineProperties,Nt=Object.getOwnPropertyDescriptors,Ee=Object.getOwnPropertySymbols,jt=Object.prototype.hasOwnProperty,wt=Object.prototype.propertyIsEnumerable,Ae=(s,t,a)=>t in s?vt(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,je=(s,t)=>{for(var a in t||(t={}))jt.call(t,a)&&Ae(s,a,t[a]);if(Ee)for(var a of Ee(t))wt.call(t,a)&&Ae(s,a,t[a]);return s},we=(s,t)=>bt(s,Nt(t)),Pt=(s,t,a)=>new Promise((r,n)=>{var i=d=>{try{f(a.next(d))}catch(c){n(c)}},u=d=>{try{f(a.throw(d))}catch(c){n(c)}},f=d=>d.done?r(d.value):Promise.resolve(d.value).then(i,u);f((a=a.apply(s,t)).next())});function St(s,t){var a,r;if(s.videoId!==t.videoId)return!0;const n=((a=s.opts)==null?void 0:a.playerVars)||{},i=((r=t.opts)==null?void 0:r.playerVars)||{};return n.start!==i.start||n.end!==i.end}function Te(s={}){return we(je({},s),{height:0,width:0,playerVars:we(je({},s.playerVars),{autoplay:0,start:0,end:0})})}function Ct(s,t){return s.videoId!==t.videoId||!Ke(Te(s.opts),Te(t.opts))}function Et(s,t){var a,r,n,i;return s.id!==t.id||s.className!==t.className||((a=s.opts)==null?void 0:a.width)!==((r=t.opts)==null?void 0:r.width)||((n=s.opts)==null?void 0:n.height)!==((i=t.opts)==null?void 0:i.height)||s.iframeClassName!==t.iframeClassName||s.title!==t.title}var At={videoId:"",id:"",className:"",iframeClassName:"",style:{},title:"",loading:void 0,opts:{},onReady:()=>{},onError:()=>{},onPlay:()=>{},onPause:()=>{},onEnd:()=>{},onStateChange:()=>{},onPlaybackRateChange:()=>{},onPlaybackQualityChange:()=>{}},Tt={videoId:k.string,id:k.string,className:k.string,iframeClassName:k.string,style:k.object,title:k.string,loading:k.oneOf(["lazy","eager"]),opts:k.objectOf(k.any),onReady:k.func,onError:k.func,onPlay:k.func,onPause:k.func,onEnd:k.func,onStateChange:k.func,onPlaybackRateChange:k.func,onPlaybackQualityChange:k.func},oe=class extends ce.Component{constructor(s){super(s),this.destroyPlayerPromise=void 0,this.onPlayerReady=t=>{var a,r;return(r=(a=this.props).onReady)==null?void 0:r.call(a,t)},this.onPlayerError=t=>{var a,r;return(r=(a=this.props).onError)==null?void 0:r.call(a,t)},this.onPlayerStateChange=t=>{var a,r,n,i,u,f,d,c;switch((r=(a=this.props).onStateChange)==null||r.call(a,t),t.data){case oe.PlayerState.ENDED:(i=(n=this.props).onEnd)==null||i.call(n,t);break;case oe.PlayerState.PLAYING:(f=(u=this.props).onPlay)==null||f.call(u,t);break;case oe.PlayerState.PAUSED:(c=(d=this.props).onPause)==null||c.call(d,t);break}},this.onPlayerPlaybackRateChange=t=>{var a,r;return(r=(a=this.props).onPlaybackRateChange)==null?void 0:r.call(a,t)},this.onPlayerPlaybackQualityChange=t=>{var a,r;return(r=(a=this.props).onPlaybackQualityChange)==null?void 0:r.call(a,t)},this.destroyPlayer=()=>this.internalPlayer?(this.destroyPlayerPromise=this.internalPlayer.destroy().then(()=>this.destroyPlayerPromise=void 0),this.destroyPlayerPromise):Promise.resolve(),this.createPlayer=()=>{if(typeof document>"u")return;if(this.destroyPlayerPromise){this.destroyPlayerPromise.then(this.createPlayer);return}const t=we(je({},this.props.opts),{videoId:this.props.videoId});this.internalPlayer=yt(this.container,t),this.internalPlayer.on("ready",this.onPlayerReady),this.internalPlayer.on("error",this.onPlayerError),this.internalPlayer.on("stateChange",this.onPlayerStateChange),this.internalPlayer.on("playbackRateChange",this.onPlayerPlaybackRateChange),this.internalPlayer.on("playbackQualityChange",this.onPlayerPlaybackQualityChange),(this.props.title||this.props.loading)&&this.internalPlayer.getIframe().then(a=>{this.props.title&&a.setAttribute("title",this.props.title),this.props.loading&&a.setAttribute("loading",this.props.loading)})},this.resetPlayer=()=>this.destroyPlayer().then(this.createPlayer),this.updatePlayer=()=>{var t;(t=this.internalPlayer)==null||t.getIframe().then(a=>{this.props.id?a.setAttribute("id",this.props.id):a.removeAttribute("id"),this.props.iframeClassName?a.setAttribute("class",this.props.iframeClassName):a.removeAttribute("class"),this.props.opts&&this.props.opts.width?a.setAttribute("width",this.props.opts.width.toString()):a.removeAttribute("width"),this.props.opts&&this.props.opts.height?a.setAttribute("height",this.props.opts.height.toString()):a.removeAttribute("height"),this.props.title?a.setAttribute("title",this.props.title):a.setAttribute("title","YouTube video player"),this.props.loading?a.setAttribute("loading",this.props.loading):a.removeAttribute("loading")})},this.getInternalPlayer=()=>this.internalPlayer,this.updateVideo=()=>{var t,a,r,n;if(typeof this.props.videoId>"u"||this.props.videoId===null){(t=this.internalPlayer)==null||t.stopVideo();return}let i=!1;const u={videoId:this.props.videoId};if((a=this.props.opts)!=null&&a.playerVars&&(i=this.props.opts.playerVars.autoplay===1,"start"in this.props.opts.playerVars&&(u.startSeconds=this.props.opts.playerVars.start),"end"in this.props.opts.playerVars&&(u.endSeconds=this.props.opts.playerVars.end)),i){(r=this.internalPlayer)==null||r.loadVideoById(u);return}(n=this.internalPlayer)==null||n.cueVideoById(u)},this.refContainer=t=>{this.container=t},this.container=null,this.internalPlayer=null}componentDidMount(){this.createPlayer()}componentDidUpdate(s){return Pt(this,null,function*(){Et(s,this.props)&&this.updatePlayer(),Ct(s,this.props)&&(yield this.resetPlayer()),St(s,this.props)&&this.updateVideo()})}componentWillUnmount(){this.destroyPlayer()}render(){return ce.createElement("div",{className:this.props.className,style:this.props.style},ce.createElement("div",{id:this.props.id,className:this.props.iframeClassName,ref:this.refContainer}))}},le=oe;le.propTypes=Tt;le.defaultProps=At;le.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var Mt=le;const Rt=({game:s,onTrailerUpdate:t,onAutoDetect:a,isDetecting:r})=>{const{showSuccess:n,showError:i}=Me(),[u,f]=B.useState(!1),[d,c]=B.useState(""),[p,m]=B.useState(!1),[j,y]=B.useState(!1),v=B.useRef(null),P=N=>{const _=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,I=N.match(_);return I&&I[2].length===11?I[2]:null},S=()=>s.trailerUrl?P(s.trailerUrl):null,w=()=>{if(!P(d)){i("Invalid YouTube URL. Please enter a valid YouTube video URL.");return}m(!0),setTimeout(()=>{t==null||t(d),c(""),f(!1),m(!1),n("Trailer added successfully!")},1e3)},E=N=>{var I;const _=(I=N.target.files)==null?void 0:I[0];if(_&&_.type==="text/plain"){const O=new FileReader;O.onload=D=>{var R;const U=(R=D.target)==null?void 0:R.result;c(U.trim())},O.readAsText(_)}},x=N=>{console.warn("YouTube player error:",N),y(!0),i("YouTube player failed to load. You can still add a trailer URL manually.")},A=S();return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-black",children:[A&&!j?e.jsx(Mt,{videoId:A,opts:{playerVars:{autoplay:0,controls:1,modestbranding:1,rel:0,showinfo:0,fs:1,cc_load_policy:1,iv_load_policy:3},width:"100%",height:"100%"},onReady:N=>{N.target.pauseVideo()},onError:x,className:"w-full h-full",containerClassName:"w-full h-full"}):j?e.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-gaming-dark to-gaming-darker",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"‚ö†Ô∏è"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"YouTube Player Error"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"The YouTube player failed to load. This might be due to network restrictions or browser settings."}),e.jsx("button",{onClick:()=>y(!1),className:"px-6 py-3 bg-gaming-primary hover:bg-gaming-primary/80 text-white rounded-lg font-medium transition-all",children:"Retry Loading"})]})}):e.jsx("div",{className:"flex items-center justify-center h-full bg-gradient-to-br from-gaming-dark to-gaming-darker",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:"üé¨"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Trailer Available"}),e.jsx("p",{className:"text-gray-400 mb-6",children:"Add a YouTube trailer to enhance this game's presentation"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx("button",{onClick:()=>f(!0),className:"px-6 py-3 bg-gaming-primary hover:bg-gaming-primary/80 text-white rounded-lg font-medium transition-all",children:"Add Trailer"}),a&&e.jsx("button",{onClick:a,disabled:r,className:"px-6 py-3 bg-gaming-secondary hover:bg-gaming-secondary/80 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all",children:r?"üîç Detecting...":"üîç Auto-Detect"})]})]})}),u&&e.jsx("div",{className:"absolute inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center p-8",children:e.jsxs("div",{className:"bg-gaming-surface border border-gaming-border rounded-xl p-6 max-w-md w-full",children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Add Game Trailer"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gaming-text mb-2",children:"YouTube URL"}),e.jsx("input",{type:"text",value:d,onChange:N=>c(N.target.value),placeholder:"https://www.youtube.com/watch?v=...",className:"w-full p-3 bg-gaming-surface border border-gaming-border rounded text-gaming-text placeholder-gray-500"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-px bg-gaming-border"}),e.jsx("span",{className:"text-xs text-gaming-text-muted",children:"OR"}),e.jsx("div",{className:"flex-1 h-px bg-gaming-border"})]}),e.jsxs("div",{children:[e.jsx("input",{ref:v,type:"file",accept:".txt",onChange:E,className:"hidden"}),e.jsx("button",{onClick:()=>{var N;return(N=v.current)==null?void 0:N.click()},className:"w-full p-3 bg-gaming-surface border border-gaming-border rounded text-gaming-text hover:bg-gaming-surface/80 transition-all",children:"üìÑ Import from File"}),e.jsx("p",{className:"text-xs text-gaming-text-muted mt-1",children:"Upload a .txt file containing the YouTube URL"})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:w,disabled:!d.trim()||p,className:"flex-1 px-4 py-2 bg-gaming-primary hover:bg-gaming-primary/80 disabled:bg-gray-600 disabled:cursor-not-allowed text-white rounded-lg font-medium transition-all",children:p?"Adding...":"Add Trailer"}),e.jsx("button",{onClick:()=>{f(!1),c("")},className:"flex-1 px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg font-medium transition-all",children:"Cancel"})]}),e.jsx("div",{className:"mt-4 p-3 bg-gaming-surface/50 rounded-lg",children:e.jsxs("p",{className:"text-xs text-gaming-text-muted",children:["üí° ",e.jsx("strong",{children:"Tip:"})," Find official trailers on YouTube or game developer websites. Smaller indie games often have trailers that aren't automatically detected."]})})]})})]}),A&&!u&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"text-sm text-gaming-text-muted",children:"üé¨ Trailer from YouTube"}),e.jsx("button",{onClick:()=>f(!0),className:"px-3 py-1 bg-gaming-surface hover:bg-gaming-surface/80 border border-gaming-border text-gaming-text rounded-lg text-sm transition-all",children:"Change Trailer"})]})]})};class J{static async searchGameTrailer(t){try{const a=[`${t} official trailer`,`${t} gameplay trailer`,`${t} trailer`,`${t} game`];for(const r of a){const n=await this.searchVideos(r,1);if(n.length>0)return n[0]}return null}catch(a){return console.warn("YouTube search failed:",a),null}}static async searchVideos(t,a=5){return this.mockSearch(t,a)}static mockSearch(t,a){return new Promise(r=>{setTimeout(()=>{r([{videoId:"dQw4w9WgXcQ",title:"Official Game Trailer",channel:"Game Developer",thumbnail:"https://img.youtube.com/vi/dQw4w9WgXcQ/hqdefault.jpg",url:"https://www.youtube.com/watch?v=dQw4w9WgXcQ"}].slice(0,a))},500)})}static extractVideoId(t){const a=/^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|&v=)([^#&?]*).*/,r=t.match(a);return r&&r[2].length===11?r[2]:null}static getThumbnailUrl(t,a="default"){return`https://img.youtube.com/vi/${t}/${{default:"default",medium:"mqdefault",high:"hqdefault",maxres:"maxresdefault"}[a]}.jpg`}static isValidYouTubeUrl(t){return this.extractVideoId(t)!==null}}ne(J,"API_KEY",{}.REACT_APP_YOUTUBE_API_KEY),ne(J,"BASE_URL","https://www.googleapis.com/youtube/v3");async function kt(s){var t,a;if(s.trailerUrl&&J.isValidYouTubeUrl(s.trailerUrl))return s.trailerUrl;if(((a=(t=s.steamData)==null?void 0:t.videos)==null?void 0:a.length)>0){const r=s.steamData.videos.find(n=>{var i,u;return((i=n.name)==null?void 0:i.toLowerCase().includes("trailer"))||((u=n.name)==null?void 0:u.toLowerCase().includes("gameplay"))});if(r!=null&&r.url){const n=J.extractVideoId(r.url);if(n)return`https://www.youtube.com/watch?v=${n}`}}try{const r=await J.searchGameTrailer(s.title);return(r==null?void 0:r.url)||null}catch(r){return console.warn("Failed to detect trailer:",r),null}}const It={Achiever:{name:"Achiever",icon:"üèÜ",gradient:"from-yellow-500 to-amber-600",description:"Goal-oriented completionist"},Explorer:{name:"Explorer",icon:"üó∫Ô∏è",gradient:"from-green-500 to-emerald-600",description:"Curious discoverer"},Socializer:{name:"Socializer",icon:"üë•",gradient:"from-blue-500 to-cyan-600",description:"Community player"},Competitor:{name:"Competitor",icon:"‚öîÔ∏è",gradient:"from-red-500 to-orange-600",description:"Victory-driven"},Strategist:{name:"Strategist",icon:"‚ôüÔ∏è",gradient:"from-indigo-500 to-purple-600",description:"Tactical thinker"},Creative:{name:"Creative",icon:"üé®",gradient:"from-purple-500 to-pink-600",description:"Imaginative builder"},Casual:{name:"Casual",icon:"üòå",gradient:"from-teal-500 to-cyan-600",description:"Relaxed gamer"},Specialist:{name:"Specialist",icon:"üéØ",gradient:"from-pink-500 to-rose-600",description:"Focused expert"}},Lt={sm:"px-2 py-1 text-xs",md:"px-3 py-1.5 text-sm",lg:"px-4 py-2 text-base"},_t={sm:"text-sm",md:"text-base",lg:"text-lg"},Ot=({archetypeId:s,size:t="md",showName:a=!0,className:r=""})=>{const n=It[s];return n?e.jsxs("div",{className:`
        inline-flex items-center gap-1.5
        bg-gradient-to-r ${n.gradient}
        text-white font-medium
        rounded-full
        shadow-lg
        transition-all duration-200
        hover:shadow-xl hover:scale-105
        ${Lt[t]}
        ${r}
      `,title:n.description,children:[e.jsx("span",{className:_t[t],children:n.icon}),a&&e.jsx("span",{className:"font-semibold",children:n.name})]}):null},Dt={Calm:"bg-blue-500",Hyped:"bg-yellow-500",Competitive:"bg-red-500",Reflective:"bg-purple-500",Comfort:"bg-green-500"},Ut={sm:"w-2 h-2",md:"w-3 h-3",lg:"w-4 h-4"};function Yt(s){const a={chill:"Calm",story:"Calm",creative:"Calm",energetic:"Hyped",social:"Hyped",exploratory:"Hyped",competitive:"Competitive",focused:"Competitive",nostalgic:"Reflective",melancholic:"Reflective",cozy:"Comfort",relaxed:"Comfort"}[s]||"Comfort";return Dt[a]}const Gt=({mood:s,size:t="md",className:a=""})=>{const r=s?Yt(s.moodId):"bg-gray-400",n=Ut[t];return e.jsxs("div",{className:`relative ${a}`,children:[e.jsx("div",{className:`
          relative z-10
          ${r}
          ${n}
          rounded-full
          shadow-md
          transition-colors duration-300
        `,title:s?`${s.moodId} (Intensity: ${s.intensity})`:"No mood data"}),s&&s.intensity>=7&&e.jsx("div",{className:`
            absolute top-0 right-0
            w-1.5 h-1.5
            bg-white
            rounded-full
          `})]})};function Q(s){return s.charAt(0).toUpperCase()+s.slice(1)}const Ft=({persona:s,compact:t=!1,className:a=""})=>{const{traits:r,mood:n,narrative:i}=s;return r?e.jsxs("div",{className:`flex items-center gap-3 ${a}`,children:[e.jsx(Ot,{archetypeId:r.archetypeId,size:t?"sm":"md",showName:!t}),e.jsx(Gt,{mood:n,size:t?"sm":"md"}),!t&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("span",{className:"font-medium",children:Q(r.pacing)}),e.jsx("span",{className:"text-gray-500",children:"‚Ä¢"}),e.jsx("span",{className:"font-medium",children:Q(r.riskProfile)}),e.jsx("span",{className:"text-gray-500",children:"‚Ä¢"}),e.jsx("span",{className:"font-medium",children:Q(r.socialStyle)})]}),t&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-gray-300",children:[e.jsx("span",{children:Q(r.pacing)}),e.jsx("span",{className:"text-gray-500",children:"‚Ä¢"}),e.jsx("span",{children:Q(r.riskProfile)})]}),!t&&i&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500"}),e.jsx("span",{className:"text-xs text-gray-400 font-medium",children:i.tone})]})]}):e.jsxs("div",{className:`flex items-center gap-3 text-gray-400 ${a}`,children:[e.jsx("div",{className:"w-4 h-4 bg-gray-600 rounded-full"}),e.jsx("span",{className:"text-sm",children:"Loading persona..."})]})},Wt=({game:s})=>{var z,q,ae,H,re,W;const t=Ue(),{games:a,actions:r}=Re(),{showSuccess:n,showError:i,showWarning:u,showInfo:f}=Me(),[d,c]=B.useState(!1),p=o=>{var h;if(o.coverImage){const g=o.appId||((h=o.id)==null?void 0:h.split("_")[1]);if(g)return`https://cdn.akamai.steamstatic.com/steam/apps/${g}/header.jpg`}return o.coverImage},m=Ve(s.id),y=((o,h)=>{if(!h)return null;const g=o.moods||[],b=h.traits||{};let C=50,G=[];g.forEach(F=>{var X;(X=b.preferredMoods)!=null&&X.includes(F.toLowerCase())&&(C+=15,G.push(`Mood: ${F}`))});const T=o.hoursPlayed||0;if(b.avgSessionLength){const F=b.avgSessionLength;Math.abs(T-F)<5&&(C+=10,G.push("Session Length"))}return C=Math.min(100,C),{score:C,level:C>=80?"Perfect Match":C>=60?"Great Fit":C>=40?"Decent Match":"Learning Experience",traits:G.slice(0,3)}})(s,m),P=((o,h)=>{const g=[],b=o.hoursPlayed||0,C=o.localSessionCount||0;if(b>50?g.push({icon:"üèÜ",title:"Dedicated Player",description:"You've invested significant time in this game, showing commitment to deep experiences."}):b>20?g.push({icon:"üéØ",title:"Focused Gamer",description:"You prefer quality gaming sessions over casual play."}):g.push({icon:"‚ö°",title:"Casual Explorer",description:"You enjoy trying new games and discovering different experiences."}),C>0&&b>0){const T=b/C;T>3?g.push({icon:"üïê",title:"Marathon Gamer",description:"Your sessions are typically long and immersive."}):T<1&&g.push({icon:"‚ö°",title:"Quick Sessions",description:"You prefer shorter, focused gaming bursts."})}const G=o.moods||[];return G.some(T=>["competitive","intense","action-packed"].includes(T.toLowerCase()))&&g.push({icon:"üî•",title:"Adrenaline Seeker",description:"You're drawn to high-energy, competitive gaming experiences."}),G.some(T=>["creative","sandbox","building"].includes(T.toLowerCase()))&&g.push({icon:"üé®",title:"Creative Builder",description:"You enjoy games that allow self-expression and world-building."}),g.slice(0,3)})(s),w=(o=>{const h=Math.floor(Math.random()*50)+10,g=Math.floor(h*(Math.random()*.8)),b=Math.round(g/h*100),C=[{name:"First Steps",description:"Complete the tutorial",unlocked:!0,rarity:"Common"},{name:"Explorer",description:"Discover 10 locations",unlocked:!0,rarity:"Uncommon"},{name:"Master Player",description:"Reach max level",unlocked:b>50,rarity:"Rare"},{name:"Legend",description:"Complete all challenges",unlocked:b>80,rarity:"Epic"}].filter(G=>G.unlocked);return{total:h,unlocked:g,completionRate:b,recent:C.slice(-3)}})(),x=(o=>{const h=o.hoursPlayed||0,g=o.localSessionCount||0;if(h===0||g===0)return null;const b=h/g,C=Math.max(b*1.5,b+2),G=Math.min(Math.floor(g*.3),7);return[{icon:"‚è±Ô∏è",title:"Longest Session",value:`${Math.round(C*10)/10}h`,description:"Your longest continuous play session"},{icon:"üî•",title:"Best Streak",value:`${G} days`,description:"Most consecutive days played"},{icon:"üìä",title:"Average Session",value:`${Math.round(b*10)/10}h`,description:"Typical play session length"},{icon:"üéØ",title:"Total Sessions",value:g.toString(),description:"Number of times you've played"}]})(s),N=((o,h)=>{var X;const g=o.localSessionCount||0,b=o.hoursPlayed||0;if(g===0)return null;const C=b/g,G=Math.min(g/4,7),T=[],F=o.moods||[];return F.some($=>["relaxing","chill","creative"].includes($.toLowerCase()))&&T.push({mood:"Relaxed",trigger:"Unwinding after work",time:"Evening sessions",frequency:"Regular evening play",icon:"üòå"}),F.some($=>["competitive","intense","action-packed"].includes($.toLowerCase()))&&T.push({mood:"Energetic",trigger:"High-energy moments",time:"Weekend afternoons",frequency:"Intensive weekend sessions",icon:"‚ö°"}),F.some($=>["story-rich","atmospheric","nostalgic"].includes($.toLowerCase()))&&T.push({mood:"Reflective",trigger:"Contemplative moods",time:"Quiet weekend evenings",frequency:"Longer, immersive sessions",icon:"ü§î"}),F.some($=>["social","multiplayer","party"].includes($.toLowerCase()))&&T.push({mood:"Social",trigger:"When friends are online",time:"Evenings and weekends",frequency:"Group gaming sessions",icon:"üë•"}),T.length===0&&T.push({mood:"Exploratory",trigger:"Curiosity and discovery",time:"Flexible timing",frequency:"Casual exploration sessions",icon:"üîç"}),{patterns:T.slice(0,2),sessionStats:{totalSessions:g,avgLength:C,weeklyFrequency:G,preferredTime:((X=T[0])==null?void 0:X.time)||"Flexible"}}})(s),_=p(s),I=async()=>{var h,g;f("Launching Game: Starting "+s.title+"...",{autoClose:2e3});const o=(g=(h=s.platforms)==null?void 0:h[0])==null?void 0:g.code;if(o&&me.isEmulatorPlatform(o))try{const b=await qe.launchGame(s,{fullscreen:!0});b.success?(n("Game Launched! "+s.title+" is now running",{autoClose:3e3}),r.updateGameStatus(s.id,"playing")):i("Launch Failed: "+(b.error||"Failed to launch emulator game"),{autoClose:5e3})}catch{i("Launch Error: An error occurred while launching the game",{autoClose:5e3})}else if(s.appId){console.log("üéÆ Launching Steam game with appId:",s.appId);const b=`steam://rungameid/${s.appId}`;console.log("üöÄ Direct Steam URL:",b);try{window.location.href=b,setTimeout(()=>{document.visibilityState==="visible"?u("Launch Failed: Steam may not be installed or running. Please check Steam is available.",{autoClose:5e3}):(n("Steam Launch Initiated: Opening "+s.title+" via Steam...",{autoClose:3e3}),r.updateGameStatus(s.id,"playing"))},3e3)}catch(C){console.error("Failed to launch game:",C),i("Launch Error: Could not execute launch command",{autoClose:5e3})}}else console.warn("No appId found for game:",s.title),u("Launch Not Available: This game cannot be launched automatically. App ID not found.",{autoClose:4e3})},O=()=>{r.updateGameStatus(s.id,"completed"),n("Game Completed: "+s.title+" marked as completed",{autoClose:3e3})},D=()=>{const o=s.tags||[];if(o.includes("Backlog")){const g=o.filter(b=>b!=="Backlog");r.updateGame(s.id,{tags:g}),n("Backlog tag removed from "+s.title,{autoClose:3e3})}else{const g=[...o,"Backlog"];r.updateGame(s.id,{tags:g}),n("Backlog tag added to "+s.title,{autoClose:3e3})}},U=o=>{if(!o)return"0h";const h=Math.floor(o),g=Math.round((o-h)*60);return g>0?`${h}h ${g}m`:`${h}h`},R=o=>o?new Date(o).toLocaleDateString():"Never",Y=async()=>{if(!d){c(!0);try{const o=await kt(s);o?(r.updateGame(s.id,{trailerUrl:o}),n("Trailer detected and added automatically!")):f("No trailer found. You can add one manually.")}catch{i("Failed to detect trailer. Please try adding manually.")}finally{c(!1)}}},se=(s.moods||[]).slice(0,3).map(o=>{const h=Ye(o.toLowerCase()),g=Ge.find(b=>b.id===h);return{id:o,name:(g==null?void 0:g.name)||o,emoji:(g==null?void 0:g.emoji)||"üéÆ",masterMood:h}});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gaming-dark via-gray-900 to-gaming-darker",children:[e.jsxs("div",{className:"relative h-96 overflow-hidden hero-section",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary via-gaming-secondary to-gaming-accent"}),e.jsx(M.div,{className:"absolute inset-0",initial:{opacity:0,scale:1.05},animate:{opacity:1,scale:1},transition:{duration:1.2,ease:"easeOut"},children:_&&e.jsx("img",{src:_,alt:s==null?void 0:s.title,className:"w-full h-full object-cover object-center game-header-image",onError:o=>{console.error("‚ùå Header image failed to load:",_),o.currentTarget.style.display="none"}})}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/90 via-black/50 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-900/30 via-transparent to-blue-900/30"}),e.jsx(M.div,{className:"absolute inset-0 bg-gradient-to-br from-gaming-primary/20 via-transparent to-gaming-accent/20",animate:{background:["linear-gradient(to bottom right, rgba(59, 130, 246, 0.2), transparent, rgba(34, 197, 94, 0.2))","linear-gradient(to bottom right, rgba(34, 197, 94, 0.2), transparent, rgba(168, 85, 247, 0.2))"]},transition:{duration:6,repeat:1/0}}),e.jsx("div",{className:"absolute inset-0 opacity-30",children:[...Array(8)].map((o,h)=>e.jsx(M.div,{className:"absolute w-1 h-1 bg-white/10 rounded-full",initial:{x:Math.random()*100+"%",y:Math.random()*100+"%",scale:0},animate:{scale:[0,1,0],opacity:[0,.5,0]},transition:{duration:4+Math.random()*2,repeat:1/0,delay:Math.random()*2}},h))}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-8",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"flex items-end justify-between",children:[e.jsxs("div",{className:"flex-1",children:[m&&e.jsxs(M.div,{className:"mb-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs("div",{className:"px-3 py-1 bg-gaming-primary/20 border border-gaming-primary/30 rounded-full text-gaming-primary text-xs font-medium backdrop-blur-sm",children:["üß† ",((z=m==null?void 0:m.traits)==null?void 0:z.archetypeId)||"Explorer"]}),y&&e.jsxs("div",{className:`px-3 py-1 border rounded-full text-xs font-medium backdrop-blur-sm ${y.score>=80?"bg-green-500/20 border-green-400/30 text-green-300":y.score>=60?"bg-blue-500/20 border-blue-400/30 text-blue-300":y.score>=40?"bg-yellow-500/20 border-yellow-400/30 text-yellow-300":"bg-gray-500/20 border-gray-400/30 text-gray-300"}`,children:[y.score,"% ",y.level]})]}),y&&y.traits.length>0&&e.jsxs("div",{className:"text-xs text-gray-300",children:["Matches: ",y.traits.join(" ‚Ä¢ ")]})]}),e.jsx(M.div,{className:"mb-3",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:e.jsx("span",{className:"px-3 py-1 bg-amber-500/20 border border-amber-500/30 rounded-full text-amber-300 text-xs font-medium backdrop-blur-sm",children:s!=null&&s.releaseYear?`From ${s.releaseYear}`:"Classic Era"})}),e.jsx(M.h1,{className:"text-5xl font-bold text-white drop-shadow-2xl mb-2",initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.5},children:s==null?void 0:s.title}),e.jsxs(M.div,{className:"flex items-center gap-4 text-white/80 text-lg",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.6},children:[e.jsx("span",{children:((q=s==null?void 0:s.platforms)==null?void 0:q.map(o=>o.name).join(" ‚Ä¢ "))||"Unknown Platform"}),(s==null?void 0:s.hoursPlayed)&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{children:"‚è±Ô∏è"}),Math.floor(s.hoursPlayed),"h played"]})]})]}),e.jsxs(M.button,{onClick:I,className:"px-8 py-4 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-xl font-bold text-lg transition-all transform hover:scale-105 hover:shadow-2xl hover:shadow-gaming-accent/50 flex items-center gap-3 backdrop-blur-sm border border-white/20 game-action-button",whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.7},children:[e.jsx("span",{className:"text-2xl",children:"‚ñ∂Ô∏è"}),e.jsx("span",{children:"Launch Game"})]})]})})})]}),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},className:"container mx-auto px-4 py-8",children:e.jsx(Rt,{game:s,onTrailerUpdate:o=>{r.updateGame(s.id,{trailerUrl:o})},onAutoDetect:Y,isDetecting:d})}),e.jsx(M.div,{className:"bg-gaming-dark/80 backdrop-blur-xl border-b border-gaming-primary/20 sticky top-0 z-50",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{delay:.8},children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("button",{onClick:()=>t("/library"),className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-xl font-bold transition-all transform hover:scale-105 hover:shadow-lg hover:shadow-gaming-accent/50",children:[e.jsx("span",{className:"text-xl",children:"‚Üê"}),e.jsx("span",{children:"Back to Library"})]})})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8 content-section",children:[e.jsx(M.div,{className:"glass-morphism rounded-xl p-6 mb-8 border border-gaming-primary/20",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.9},children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gaming-primary/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"‚è±Ô∏è"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-lg",children:U(s.hoursPlayed)}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Total Playtime"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gaming-accent/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"üéÆ"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-lg",children:s.localSessionCount||0}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Sessions"})]})]}),s.lastLocalPlayedAt&&e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-purple-500/20 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"üìÖ"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-bold text-lg",children:R(s.lastLocalPlayedAt)}),e.jsx("div",{className:"text-gray-400 text-sm",children:"Last Played"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:O,className:"p-3 bg-green-500/20 hover:bg-green-500/30 text-green-400 rounded-xl transition-all group relative border border-green-500/30",title:"Mark as Completed",children:[e.jsx("span",{className:"text-xl",children:"‚úÖ"}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gaming-dark text-green-400 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-green-500/30",children:"Mark as Completed"})]}),e.jsxs("button",{onClick:D,className:"p-3 bg-yellow-500/20 hover:bg-yellow-500/30 text-yellow-400 rounded-xl transition-all group relative border border-yellow-500/30",title:(ae=s.tags)!=null&&ae.includes("Backlog")?"Remove from Backlog":"Mark as Backlog",children:[e.jsx("span",{className:"text-xl",children:(H=s.tags)!=null&&H.includes("Backlog")?"‚úì":"üìã"}),e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2 bg-gaming-dark text-yellow-400 text-xs px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap border border-yellow-500/30",children:(re=s.tags)!=null&&re.includes("Backlog")?"Remove from Backlog":"Mark as Backlog"})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[e.jsxs("div",{className:"glass-morphism rounded-xl p-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üé≠"}),"Identity & Mood"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üé≠"}),"Game Moods"]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:se.length>0?se.map((o,h)=>e.jsx(M.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{delay:h*.1,duration:.3},className:`px-3 py-2 rounded-lg text-sm font-medium backdrop-blur-sm border transition-all duration-300 hover:scale-105 ${o.masterMood==="adrenaline"?"bg-red-500/20 border-red-400/50 text-red-200":o.masterMood==="brain-power"?"bg-blue-500/20 border-blue-400/50 text-blue-200":o.masterMood==="zen"?"bg-green-500/20 border-green-400/50 text-green-200":o.masterMood==="story"?"bg-purple-500/20 border-purple-400/50 text-purple-200":o.masterMood==="social"?"bg-teal-500/20 border-teal-400/50 text-teal-200":o.masterMood==="creative"?"bg-yellow-500/20 border-yellow-400/50 text-yellow-200":o.masterMood==="nostalgic"?"bg-amber-500/20 border-amber-400/50 text-amber-200":o.masterMood==="scary"?"bg-gray-600/20 border-gray-500/50 text-gray-200":"bg-gray-500/20 border-gray-400/50 text-gray-200"}`,children:e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-base",children:o.emoji}),e.jsx("span",{children:o.name})]})},o.id)):e.jsxs("div",{className:"text-gray-400 italic",children:[e.jsx("span",{className:"text-2xl mr-2",children:"ü§î"}),"No mood tags assigned yet"]})})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üß†"}),"Your Gaming Personality"]}),P.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:P.map((o,h)=>e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1},className:"bg-gradient-to-br from-gaming-primary/10 to-gaming-secondary/10 border border-gaming-primary/20 rounded-lg p-4 hover:border-gaming-primary/40 transition-all",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"text-2xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white mb-1",children:o.title}),e.jsx("p",{className:"text-gray-300 text-sm leading-relaxed",children:o.description})]})]})},h))}):e.jsxs("div",{className:"text-gray-400 italic text-center py-8",children:[e.jsx("span",{className:"text-4xl mb-2 block",children:"ü§î"}),"Play more to unlock your gaming personality insights!"]})]}),N&&e.jsxs("div",{children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"üé≠"}),"Your Play Patterns"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[N.patterns.map((o,h)=>e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1},className:"bg-gradient-to-br from-purple-500/10 to-pink-500/10 border border-purple-500/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-4xl",children:o.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("h4",{className:"font-semibold text-white mb-2",children:[o.mood," Sessions"]}),e.jsx("p",{className:"text-gray-300 text-sm mb-2",children:o.trigger}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"When:"}),e.jsx("span",{className:"text-purple-300",children:o.time})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"How often:"}),e.jsx("span",{className:"text-purple-300",children:o.frequency})]})]})]})]})},h)),e.jsx(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-gradient-to-br from-blue-500/10 to-teal-500/10 border border-blue-500/20 rounded-lg p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"text-4xl",children:"üìä"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Session Insights"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Total sessions:"}),e.jsx("span",{className:"text-blue-300",children:N.sessionStats.totalSessions})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Avg length:"}),e.jsxs("span",{className:"text-blue-300",children:[Math.round(N.sessionStats.avgLength*10)/10,"h"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Weekly play:"}),e.jsxs("span",{className:"text-blue-300",children:[Math.round(N.sessionStats.weeklyFrequency)," sessions"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Best time:"}),e.jsx("span",{className:"text-blue-300",children:N.sessionStats.preferredTime})]})]})]})]})})]})]})]})]}),e.jsxs("div",{className:"glass-morphism rounded-xl p-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üèÜ"}),"Achievement Progress"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-6 border border-gray-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Completion Rate"}),e.jsxs("p",{className:"text-gray-400 text-sm",children:[w.unlocked," of ",w.total," achievements unlocked"]})]}),e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"text-3xl font-bold text-gaming-primary",children:[w.completionRate,"%"]})})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-3 mb-2",children:e.jsx(M.div,{className:"bg-gradient-to-r from-gaming-primary to-gaming-secondary h-3 rounded-full",initial:{width:0},animate:{width:`${w.completionRate}%`},transition:{duration:1,delay:.5}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400",children:[e.jsx("span",{children:"0%"}),e.jsxs("span",{children:[w.completionRate,"% Complete"]}),e.jsx("span",{children:"100%"})]})]}),w.recent.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-4",children:"Recent Achievements"}),e.jsx("div",{className:"space-y-3",children:w.recent.map((o,h)=>e.jsxs(M.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:h*.1},className:"flex items-center gap-4 bg-gray-800/30 rounded-lg p-4 border border-gray-700/30",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"üèÜ"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-white",children:o.name}),e.jsx("p",{className:"text-gray-300 text-sm",children:o.description})]}),e.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${o.rarity==="Common"?"bg-gray-500/20 text-gray-300":o.rarity==="Uncommon"?"bg-green-500/20 text-green-300":o.rarity==="Rare"?"bg-blue-500/20 text-blue-300":"bg-purple-500/20 text-purple-300"}`,children:o.rarity})]},h))})]})]})]}),x&&e.jsxs("div",{className:"glass-morphism rounded-xl p-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üìà"}),"Your Gaming Records"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:x.map((o,h)=>e.jsxs(M.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:h*.1},className:"bg-gradient-to-br from-gaming-secondary/10 to-gaming-accent/10 border border-gaming-secondary/20 rounded-lg p-6 text-center hover:border-gaming-secondary/40 transition-all",children:[e.jsx("div",{className:"text-3xl mb-2",children:o.icon}),e.jsx("div",{className:"text-2xl font-bold text-white mb-1",children:o.value}),e.jsx("div",{className:"text-sm font-semibold text-gaming-secondary mb-2",children:o.title}),e.jsx("div",{className:"text-xs text-gray-400",children:o.description})]},h))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative w-64 h-96 rounded-xl overflow-hidden cinematic-shadow",children:[e.jsx("img",{src:s.coverImage||"https://via.placeholder.com/300x400/8b5cf6/ffffff?text=Game+Cover",alt:s.title,className:"w-full h-full object-cover game-cover-image",onError:o=>{console.error("‚ùå Cover art failed to load:",s.coverImage)}}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent"})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-2xl font-bold text-white truncate flex-1 mr-4",children:s.title}),e.jsx(Ft,{persona:m})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("span",{className:`px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap ${s.playStatus==="playing"?"bg-green-500/20 text-green-300 border border-green-500/30":s.playStatus==="completed"?"bg-blue-500/20 text-blue-300 border border-blue-500/30":s.playStatus==="backlog"?"bg-yellow-500/20 text-yellow-300 border border-yellow-500/30":"bg-gray-500/20 text-gray-300 border border-gray-500/30"}`,children:[s.playStatus==="playing"&&"‚ñ∂Ô∏è Currently Playing",s.playStatus==="completed"&&"‚úÖ Completed",s.playStatus==="backlog"&&"üìã In Backlog",s.playStatus==="paused"&&"‚è∏Ô∏è Paused",s.playStatus==="abandoned"&&"üö´ Abandoned",!s.playStatus&&"üìù Not Started"]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"üéÆ"}),e.jsx("span",{className:"text-gray-300 truncate",children:((W=s.platforms)==null?void 0:W.map(o=>o.name).join(" ‚Ä¢ "))||"Unknown Platform"})]}),s.releaseYear&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"üìÖ"}),e.jsxs("span",{className:"text-gray-300 whitespace-nowrap",children:["Released ",s.releaseYear]})]})]}),e.jsxs("div",{className:"space-y-2",children:[s.hoursPlayed&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"‚è±Ô∏è"}),e.jsxs("span",{className:"text-gray-300 whitespace-nowrap",children:[U(s.hoursPlayed)," played"]})]}),s.lastLocalPlayedAt&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"üïê"}),e.jsxs("span",{className:"text-gray-300 whitespace-nowrap",children:["Last played ",R(s.lastLocalPlayedAt)]})]})]})]}),e.jsxs("div",{children:[e.jsxs("h4",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üè∑Ô∏è"}),"Genres & Tags"]}),e.jsxs("div",{className:"space-y-3",children:[s.genres&&s.genres.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Genres"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:s.genres.map((o,h)=>e.jsx("span",{className:"px-3 py-1 bg-gaming-primary/20 text-gaming-primary text-xs rounded-full border border-gaming-primary/30 whitespace-nowrap",children:o.description||o.name},h))})]}),s.tags&&s.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Tags"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[s.tags.slice(0,8).map((o,h)=>e.jsx("span",{className:"px-3 py-1 bg-gray-700/50 text-gray-300 text-xs rounded-full border border-gray-600/30 whitespace-nowrap",children:o},h)),s.tags.length>8&&e.jsxs("span",{className:"px-3 py-1 bg-gray-600/50 text-gray-400 text-xs rounded-full whitespace-nowrap",children:["+",s.tags.length-8," more"]})]})]})]})]})]})]}),s.description&&e.jsxs("div",{className:"mt-8 p-6 bg-gray-800/30 rounded-xl border border-gray-700/50",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"üìñ"}),"About This Game"]}),e.jsx("p",{className:"text-gray-300 leading-relaxed text-lg",children:s.description})]})]}),e.jsx("div",{className:"lg:col-span-1 space-y-8",children:e.jsxs("div",{className:"glass-morphism rounded-xl p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"üìä"}),"Stats & History"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:[e.jsxs("div",{className:"flex justify-between items-center mb-3",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Total Playtime"}),e.jsx("span",{className:"text-white font-bold text-lg",children:U(s.hoursPlayed)})]}),s.lastLocalPlayedAt&&e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Last Played"}),e.jsx("span",{className:"text-gray-400 text-sm",children:R(s.lastLocalPlayedAt)})]})]}),e.jsx("div",{className:"bg-gray-800/50 rounded-lg p-4 border border-gray-700/50",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-300 text-sm",children:"Total Sessions"}),e.jsx("span",{className:"text-white font-bold text-lg",children:s.localSessionCount||0})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Recent Sessions"}),e.jsxs("div",{className:"space-y-3",children:[s.lastLocalPlayedAt&&e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:R(s.lastLocalPlayedAt)}),e.jsxs("div",{className:"text-gray-400 text-xs",children:[U(s.hoursPlayed)," session"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("div",{className:"w-3 h-3 bg-gray-500 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-gray-300 text-sm font-medium",children:"First played"}),e.jsx("div",{className:"text-gray-400 text-xs",children:"Added to library"})]})]})]})]})]})]})})]})]})]})};export{Wt as GameDetailsLayout,Wt as default};
