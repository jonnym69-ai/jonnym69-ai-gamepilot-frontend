import{r as u,j as e}from"./index-2zxZw9Mw.js";import"./useCurrentMood-DCnI8z6_.js";import{u as te}from"./useLibraryStore-BvHGHpT8.js";import{u as ie}from"./useLibraryPersona-BzYMiu7h.js";import{u as le}from"./useMoodRecommendations-BYSk3rof.js";import{u as oe}from"./profileStore-CgGiwr5x.js";import{M as _}from"./masterMoods-YBYEbnnW.js";const F={USER_IDENTITY:"gamepilot-user-identity",USER_PROFILE:"gamepilot-user-profile",USER_PREFERENCES:"gamepilot-user-preferences",USER_PLAYSTYLE:"gamepilot-user-playstyle",USER_GENRES:"gamepilot-user-genres",USER_MOODS:"gamepilot-user-moods",USER_STATS:"gamepilot-user-stats"};class O{get(a){try{const d=localStorage.getItem(a);return d?JSON.parse(d):null}catch(d){return console.error(`Error reading from localStorage for key ${a}:`,d),null}}set(a,d){try{localStorage.setItem(a,JSON.stringify(d))}catch(g){console.error(`Error writing to localStorage for key ${a}:`,g)}}remove(a){try{localStorage.removeItem(a)}catch(d){console.error(`Error removing from localStorage for key ${a}:`,d)}}getUserIdentity(){return this.get(F.USER_IDENTITY)}setUserIdentity(a){this.set(F.USER_IDENTITY,a)}getUserProfile(){return this.get(F.USER_PROFILE)}setUserProfile(a){this.set(F.USER_PROFILE,a)}getUserPreferences(){return this.get(F.USER_PREFERENCES)}setUserPreferences(a){this.set(F.USER_PREFERENCES,a)}getUserPlaystyle(){return this.get(F.USER_PLAYSTYLE)}setUserPlaystyle(a){this.set(F.USER_PLAYSTYLE,a)}getUserGenres(){return this.get(F.USER_GENRES)||[]}setUserGenres(a){this.set(F.USER_GENRES,a)}getUserMoods(){return this.get(F.USER_MOODS)||[]}setUserMoods(a){this.set(F.USER_MOODS,a)}getUserStats(){return this.get(F.USER_STATS)}setUserStats(a){this.set(F.USER_STATS,a)}initializeDefaultData(){const a={profile:{id:`user-${Date.now()}`,username:`gamer_${Math.floor(Math.random()*1e4)}`,displayName:"New Gamer",avatar:"",joinedAt:new Date().toISOString(),lastActive:new Date().toISOString(),bio:"Passionate gamer with diverse interests",isPublic:!1,level:1,experience:0},preferences:{theme:"dark",language:"en",timezone:"UTC",notifications:{email:!0,push:!0,achievements:!0,recommendations:!0,friendActivity:!1},privacy:{profileVisibility:"private",showPlaytime:!0,showAchievements:!0,showGameLibrary:!1},display:{compactMode:!1,showGameCovers:!0,animateTransitions:!0,showRatings:!0},profileVisibility:"private",showPlaytime:!0,showAchievements:!0,showGameLibrary:!1},playstyle:{primary:{id:"casual",name:"Casual",description:"Relaxed gaming experience",icon:"ðŸŽ®",color:"#4CAF50",traits:["relaxed","exploratory"]},traits:["relaxed","exploratory"],preferences:{sessionLength:"short",difficulty:"casual",socialPreference:"solo",storyFocus:50,graphicsFocus:50,gameplayFocus:50}},favoriteGenres:[],favoriteMoods:[],stats:{totalPlaytime:0,gamesPlayed:0,gamesCompleted:0,achievementsUnlocked:0,averageRating:0,favoriteGenres:[],favoriteMoods:[],currentStreak:0,longestStreak:0},connectedPlatforms:[],customTags:[]};return this.get(F.USER_IDENTITY)||this.set(F.USER_IDENTITY,a),this.get(F.USER_IDENTITY)||a}clearAllUserData(){Object.values(F).forEach(a=>{this.remove(a)})}exportUserData(){const a=this.getUserIdentity();if(!a)return null;try{return JSON.stringify(a,null,2)}catch(d){return console.error("Error exporting user data:",d),null}}importUserData(a){try{const d=JSON.parse(a);return d&&typeof d=="object"?(this.setUserIdentity(d),!0):!1}catch(d){return console.error("Error importing user data:",d),!1}}updateUserPreferences(a){const d=this.getUserPreferences();if(!d)return null;const g={...d,...a};return this.setUserPreferences(g),g}updateUserPlaystyle(a){const d=this.getUserPlaystyle();if(!d)return null;const g={...d,...a};return this.setUserPlaystyle(g),g}updateUserGenre(a,d){const g=this.getUserGenres(),r=g.findIndex(b=>b.id===a);if(r>=0){const b=[...g];return b[r]={...b[r],...d},this.setUserGenres(b),b}return g}updateUserMood(a,d){const g=this.getUserMoods(),r=g.findIndex(b=>b.id===a);if(r>=0){const b=[...g];return b[r]={...b[r],...d},this.setUserMoods(b),b}return g}updateUserStats(a){const d=this.getUserStats();if(!d)return null;const g={...d,...a};return this.setUserStats(g),g}}const ce=({onProfileUpdate:f})=>{const a=new O,{games:d}=te(),{updateProfile:g}=oe(),[r,b]=u.useState(null),[v,M]=u.useState(!1),[k,G]=u.useState({}),[p,h]=u.useState([]),[j,E]=u.useState(!1),[w,T]=u.useState({name:"",value:"",type:"text",isPublic:!1,order:0}),[C,L]=u.useState(null),R=u.useRef(null),[N,P]=u.useState(!0),A=i=>{const y=i.target.files?.[0];if(y){if(!["image/jpeg","image/jpg","image/png","image/gif","image/webp"].includes(y.type)){alert("Please select a valid image file (JPEG, PNG, GIF, or WebP)");return}if(y.size>5242880){alert("Image size must be less than 5MB");return}const m=new FileReader;m.onload=x=>{const $=x.target?.result;L($),c("avatar",$)},m.readAsDataURL(y)}},t=()=>{L(null),c("avatar",null)};u.useEffect(()=>{(()=>{const y=a.getUserProfile();if(y)b(y),G(y),h(y.customFields||[]);else{const s=a.initializeDefaultData().profile;b(s),G(s),h(s.customFields||[])}P(!1)})()},[]);const o=()=>{if(!r)return;const i={...r,...k,lastActive:new Date().toISOString(),customFields:p};a.setUserProfile(i),b(i),g({preferredGreeting:i.preferredGreeting,greetingPhrases:i.greetingPhrases}),M(!1),E(!1),f?.(i)},n=()=>{r&&G(r),M(!1)},c=(i,y)=>{G(s=>({...s,[i]:y}))},U=(i,y)=>{const l=[...k.greetingPhrases||r?.greetingPhrases||["Ready to crush some games?","Time to level up!","Let the gaming begin!"]];l[i]=y,c("greetingPhrases",l)},S=()=>{const y=[...k.greetingPhrases||r?.greetingPhrases||["Ready to crush some games?","Time to level up!","Let the gaming begin!"],""];c("greetingPhrases",y)},Y=i=>{const s=(k.greetingPhrases||r?.greetingPhrases||["Ready to crush some games?","Time to level up!","Let the gaming begin!"]).filter((l,m)=>m!==i);c("greetingPhrases",s)},H=()=>{if(!w.name?.trim())return;const i={id:`custom-${Date.now()}`,name:w.name.trim(),value:w.value||"",type:w.type||"text",isPublic:w.isPublic||!1,order:p.length};h([...p,i]),T({name:"",value:"",type:"text",isPublic:!1,order:0}),E(!1)},I=(i,y)=>{h(p.map(s=>s.id===i?{...s,...y}:s))},q=i=>{h(p.filter(y=>y.id!==i))},B=(i,y)=>{const s=[...p],[l]=s.splice(i,1);s.splice(y,0,l);const m=s.map((x,$)=>({...x,order:$}));h(m)},V=i=>new Date(i).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}),z=()=>{const i=[];return r?.avatar&&i.push({name:"Profile Picture",icon:"ðŸ“¸",color:"bg-purple-500"}),r?.bio&&r.bio.length>10&&i.push({name:"Storyteller",icon:"ðŸ“–",color:"bg-blue-500"}),r?.location&&i.push({name:"Location Pioneer",icon:"ðŸ“",color:"bg-green-500"}),r?.website&&i.push({name:"Web Wanderer",icon:"ðŸŒ",color:"bg-cyan-500"}),r?.customFields&&r.customFields.length>0&&i.push({name:"Custom Creator",icon:"ðŸŽ¨",color:"bg-pink-500"}),d&&d.length>0&&i.push({name:"Game Collector",icon:"ðŸŽ®",color:"bg-gaming-primary"}),d&&d.reduce((y,s)=>y+(s.playtime||0),0)>100&&i.push({name:"Gaming Veteran",icon:"ðŸ†",color:"bg-yellow-500"}),i};return(()=>{let i=0;return r?.displayName&&(i+=15),r?.avatar&&(i+=20),r?.bio&&(i+=15),r?.email&&(i+=10),r?.location&&(i+=10),r?.website&&(i+=10),r?.customFields&&r.customFields.length>0&&(i+=10),d&&d.length>0&&(i+=10),Math.min(i,100)})(),N?e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ‘¤"})}),e.jsx("p",{className:"text-gray-400",children:"Loading profile..."})]}):r?e.jsxs("div",{className:"glass-morphism rounded-xl p-6 cinematic-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-white flex items-center gap-3",children:[e.jsx("span",{children:"ðŸ‘¤"}),"User Profile"]}),e.jsx("button",{onClick:()=>v?n():M(!0),className:"px-4 py-2 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg hover:opacity-90 transition-opacity",children:v?"Cancel":"Edit Profile"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative inline-block group",children:[e.jsx("div",{className:"w-32 h-32 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-full mx-auto mb-4 flex items-center justify-center ring-4 ring-white/20 hover:ring-white/40 transition-all duration-300",children:C||r.avatar?e.jsx("img",{src:C||r.avatar,alt:r.displayName,className:"w-full h-full rounded-full object-cover"}):e.jsx("span",{className:"text-5xl",children:"ðŸ‘¤"})}),v&&e.jsxs("div",{className:"absolute -bottom-2 left-1/2 transform -translate-x-1/2 flex gap-2",children:[e.jsx("button",{onClick:()=>R.current?.click(),className:"w-8 h-8 bg-gaming-accent rounded-full flex items-center justify-center text-white text-sm hover:bg-gaming-accent/80 transition-colors shadow-lg",title:"Upload new avatar",children:"ðŸ“·"}),(C||r.avatar)&&e.jsx("button",{onClick:t,className:"w-8 h-8 bg-red-600 rounded-full flex items-center justify-center text-white text-sm hover:bg-red-700 transition-colors shadow-lg",title:"Remove avatar",children:"ï¿½ï¸"})]}),e.jsx("input",{ref:R,type:"file",accept:"image/jpeg,image/jpg,image/png,image/gif,image/webp",onChange:A,className:"hidden","aria-label":"Upload profile avatar",title:"Choose an image file for your profile avatar"})]}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-1",children:v?e.jsx("input",{type:"text",value:k.displayName||"",onChange:i=>c("displayName",i.target.value),className:"bg-gray-800 border border-gray-700 rounded px-2 py-1 text-center text-white",placeholder:"Display Name"}):r.displayName}),e.jsxs("p",{className:"text-gray-400 mb-4",children:["@",v?e.jsx("input",{type:"text",value:k.username||"",onChange:i=>c("username",i.target.value),className:"bg-gray-800 border border-gray-700 rounded px-2 py-1 text-center text-gray-400",placeholder:"username"}):r.username]}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Games Owned:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-gaming-accent",children:"ðŸŽ®"}),e.jsx("span",{className:"text-white font-medium",children:d?.length||0})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Hours Played:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-blue-400",children:"â±ï¸"}),e.jsxs("span",{className:"text-white font-medium",children:[d?.reduce((i,y)=>i+(y.playtime||0),0)||0,"h"]})]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-gray-400",children:"Achievements:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-yellow-400",children:"ðŸ†"}),e.jsx("span",{className:"text-white font-medium",children:d?.reduce((i,y)=>i+(y.achievements?.length||0),0)||0})]})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-3 mt-3",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Joined:"}),e.jsx("span",{className:"text-white",children:V(r.joinedAt)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Last Active:"}),e.jsx("span",{className:"text-white",children:V(r.lastActive)})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-400",children:"Profile:"}),e.jsx("span",{className:`px-2 py-1 rounded text-xs ${r.isPublic?"bg-green-500/20 text-green-400":"bg-gray-500/20 text-gray-400"}`,children:r.isPublic?"Public":"Private"})]})]})]})]})}),e.jsx("div",{className:"lg:col-span-2 space-y-4",children:v?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("input",{type:"email",value:k.email||"",onChange:i=>c("email",i.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Bio"}),e.jsx("textarea",{value:k.bio||"",onChange:i=>c("bio",i.target.value),rows:4,className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none resize-none",placeholder:"Tell us about your gaming style..."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Location"}),e.jsx("input",{type:"text",value:k.location||"",onChange:i=>c("location",i.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none",placeholder:"City, Country"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Website"}),e.jsx("input",{type:"url",value:k.website||"",onChange:i=>c("website",i.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none",placeholder:"https://yourwebsite.com"})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsxs("h3",{className:"text-lg font-medium text-white mb-4 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ‘‹"}),"Homepage Greeting"]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Preferred Name (for homepage greeting)"}),e.jsx("input",{type:"text",value:k.preferredGreeting||"",onChange:i=>c("preferredGreeting",i.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none",placeholder:"Gamer, Champion, Legend, etc."}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:'This name will be used in the "Welcome back, [Name]" greeting on your homepage'})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Custom Greeting Phrases"}),e.jsx("div",{className:"space-y-2 mb-3",children:(k.greetingPhrases||r?.greetingPhrases||["Ready to crush some games?","Time to level up!","Let the gaming begin!"]).map((i,y)=>e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:i,onChange:s=>U(y,s.target.value),className:"flex-1 px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none text-sm",placeholder:"Enter a greeting phrase..."}),e.jsx("button",{type:"button",onClick:()=>Y(y),className:"px-3 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors text-sm",children:"Remove"})]},y))}),e.jsx("button",{type:"button",onClick:S,className:"px-4 py-2 bg-gaming-accent text-white rounded-lg hover:opacity-90 transition-opacity text-sm",children:"+ Add Phrase"}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"These phrases will appear randomly below your welcome message on the homepage"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:k.isPublic||!1,onChange:i=>c("isPublic",i.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsx("span",{className:"text-sm text-gray-300",children:"Make my profile public"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Public profiles can be discovered by other users"})]}),e.jsxs("div",{className:"border-t border-gray-700 pt-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Custom Fields"}),e.jsx("button",{type:"button",onClick:()=>E(!0),className:"px-3 py-1 bg-gaming-accent text-white rounded-lg hover:opacity-90 transition-opacity text-sm",children:"+ Add Field"})]}),p.length>0&&e.jsx("div",{className:"space-y-3 mb-4",children:p.map((i,y)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex-1 grid grid-cols-1 md:grid-cols-2 gap-2",children:[e.jsx("input",{type:"text",value:i.name,onChange:s=>I(i.id,{name:s.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Field name"}),i.type==="textarea"?e.jsx("textarea",{value:i.value,onChange:s=>I(i.id,{value:s.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none",placeholder:"Field value",rows:2}):e.jsx("input",{type:i.type,value:i.value,onChange:s=>I(i.id,{value:s.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Field value"})]}),e.jsxs("select",{value:i.type,onChange:s=>I(i.id,{type:s.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm","aria-label":`Field type for ${i.name}`,children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"url",children:"URL"}),e.jsx("option",{value:"textarea",children:"Textarea"})]}),e.jsxs("label",{className:"flex items-center gap-1 text-xs text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:i.isPublic,onChange:s=>I(i.id,{isPublic:s.target.checked}),className:"w-3 h-3"}),"Public"]}),e.jsxs("div",{className:"flex gap-1",children:[y>0&&e.jsx("button",{type:"button",onClick:()=>B(y,y-1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†‘"}),y<p.length-1&&e.jsx("button",{type:"button",onClick:()=>B(y,y+1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†“"}),e.jsx("button",{type:"button",onClick:()=>q(i.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xs",children:"Ã—"})]})]},i.id))}),j&&e.jsxs("div",{className:"p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Add New Custom Field"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:w.name||"",onChange:i=>T({...w,name:i.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Field name"}),w.type==="textarea"?e.jsx("textarea",{value:w.value||"",onChange:i=>T({...w,value:i.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm resize-none",placeholder:"Field value",rows:2}):e.jsx("input",{type:w.type||"text",value:w.value||"",onChange:i=>T({...w,value:i.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Field value"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("select",{value:w.type||"text",onChange:i=>T({...w,type:i.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm","aria-label":"New custom field type",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"email",children:"Email"}),e.jsx("option",{value:"url",children:"URL"}),e.jsx("option",{value:"textarea",children:"Textarea"})]}),e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:w.isPublic||!1,onChange:i=>T({...w,isPublic:i.target.checked}),className:"w-4 h-4"}),"Public"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{type:"button",onClick:()=>{E(!1),T({name:"",value:"",type:"text",isPublic:!1,order:0})},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:H,disabled:!w.name?.trim(),className:"px-3 py-1 bg-gaming-accent text-white rounded hover:opacity-90 transition-opacity text-sm disabled:opacity-50",children:"Add Field"})]})]})]})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{onClick:o,className:"px-6 py-2 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg hover:opacity-90 transition-opacity",children:"Save Changes"}),e.jsx("button",{onClick:n,className:"px-6 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Cancel"})]})]}):e.jsxs("div",{className:"space-y-4",children:[r.email&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Email"}),e.jsx("p",{className:"text-white",children:r.email})]}),r.bio&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Bio"}),e.jsx("p",{className:"text-gray-100 leading-relaxed",children:r.bio})]}),r.location&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Location"}),e.jsxs("p",{className:"text-white flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ“"}),r.location]})]}),r.website&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-1",children:"Website"}),e.jsxs("a",{href:r.website,target:"_blank",rel:"noopener noreferrer",className:"text-accent-400 hover:text-accent-300 transition-colors flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”—"}),r.website.replace(/^https?:\/\//,"")]})]}),r.customFields&&r.customFields.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-2",children:"Custom Fields"}),e.jsx("div",{className:"space-y-2",children:r.customFields.sort((i,y)=>i.order-y.order).map(i=>e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsxs("h5",{className:"text-sm font-medium text-white min-w-0",children:[i.name,":"]}),e.jsx("div",{className:"flex-1 min-w-0",children:i.type==="url"&&i.value?e.jsx("a",{href:i.value,target:"_blank",rel:"noopener noreferrer",className:"text-accent-400 hover:text-accent-300 transition-colors break-all",children:i.value}):i.type==="textarea"?e.jsx("p",{className:"text-gray-100 whitespace-pre-wrap break-all",children:i.value}):i.type==="email"&&i.value?e.jsx("a",{href:`mailto:${i.value}`,className:"text-accent-400 hover:text-accent-300 transition-colors break-all",children:i.value}):e.jsx("p",{className:"text-gray-100 break-all",children:i.value||e.jsx("span",{className:"text-gray-500",children:"Not set"})})}),i.isPublic&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded",children:"Public"})]},i.id))})]}),z().length>0&&e.jsxs("div",{children:[e.jsxs("h4",{className:"text-sm font-medium text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ†"}),"Achievements (",z().length,")"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:z().map((i,y)=>e.jsxs("div",{className:`${i.color} text-white px-3 py-2 rounded-lg text-xs font-medium flex items-center gap-2 shadow-lg hover:scale-105 transition-transform duration-200`,style:{animationDelay:`${y*100}ms`},children:[e.jsx("span",{className:"text-sm",children:i.icon}),e.jsx("span",{children:i.name})]},i.name))})]}),!r.email&&!r.bio&&!r.location&&!r.website&&(!r.customFields||r.customFields.length===0)&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:'No additional information added yet. Click "Edit Profile" to personalize your profile.'})})]})})]})]}):e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"âš ï¸"})}),e.jsx("p",{className:"text-gray-400",children:"Unable to load profile"})]})},de=({onPreferencesUpdate:f})=>{const a=new O,[d,g]=u.useState(null),[r,b]=u.useState({}),[v,M]=u.useState([]),[k,G]=u.useState(!1),[p,h]=u.useState({name:"",value:"",type:"text",category:"general",order:0,isPublic:!1,options:[]}),[j,E]=u.useState(!0);u.useEffect(()=>{(()=>{const o=a.getUserPreferences();if(o)g(o),b(o),M(o.customItems||[]);else{const n=a.initializeDefaultData().preferences;g(n),b(n),M(n.customItems||[])}E(!1)})()},[]);const w=()=>{if(!d)return;const t={...d,...r,notifications:{...d.notifications,...r.notifications},privacy:{...d.privacy,...r.privacy},display:{...d.display,...r.display},customItems:v};a.setUserPreferences(t),g(t),G(!1),f?.(t)},T=()=>{const t=a.initializeDefaultData().preferences;b(t)},C=(t,o,n)=>{b(t==="notifications"||t==="privacy"||t==="display"?c=>({...c,[t]:{...c[t],[o]:n}}):c=>({...c,[o]:n}))},L=()=>{if(!p.name?.trim())return;const t={id:`custom-${Date.now()}`,name:p.name.trim(),value:p.type==="boolean"?!1:p.value||"",type:p.type||"text",category:p.category||"general",order:v.length,isPublic:p.isPublic||!1,options:p.options||[]};M([...v,t]),h({name:"",value:"",type:"text",category:"general",order:0,isPublic:!1,options:[]}),G(!1)},R=(t,o)=>{M(v.map(n=>n.id===t?{...n,...o}:n))},N=t=>{M(v.filter(o=>o.id!==t))},P=(t,o)=>{const n=[...v],[c]=n.splice(t,1);n.splice(o,0,c);const U=n.map((S,Y)=>({...S,order:Y}));M(U)},A=t=>v.filter(o=>o.category===t).sort((o,n)=>o.order-n.order);return j?e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"âš™ï¸"})}),e.jsx("p",{className:"text-gray-400",children:"Loading preferences..."})]}):d?e.jsxs("div",{className:"glass-morphism rounded-xl p-6 cinematic-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-white flex items-center gap-3",children:[e.jsx("span",{children:"âš™ï¸"}),"Preferences"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",children:"Reset to Default"}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg hover:opacity-90 transition-opacity",children:"Save Changes"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"General"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Theme"}),e.jsxs("select",{value:r.theme||"dark",onChange:t=>C("theme","theme",t.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none",children:[e.jsx("option",{value:"dark",children:"ðŸŒ™ Dark"}),e.jsx("option",{value:"light",children:"â˜€ï¸ Light"}),e.jsx("option",{value:"auto",children:"ðŸ”„ Auto"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Language"}),e.jsxs("select",{value:r.language||"en",onChange:t=>C("language","language",t.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none",children:[e.jsx("option",{value:"en",children:"English"}),e.jsx("option",{value:"es",children:"EspaÃ±ol"}),e.jsx("option",{value:"fr",children:"FranÃ§ais"}),e.jsx("option",{value:"de",children:"Deutsch"}),e.jsx("option",{value:"ja",children:"æ—¥æœ¬èªž"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Timezone"}),e.jsxs("select",{value:r.timezone||"UTC",onChange:t=>C("timezone","timezone",t.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none",children:[e.jsx("option",{value:"UTC",children:"UTC"}),e.jsx("option",{value:"America/New_York",children:"Eastern Time"}),e.jsx("option",{value:"America/Chicago",children:"Central Time"}),e.jsx("option",{value:"America/Denver",children:"Mountain Time"}),e.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx("option",{value:"Europe/London",children:"London"}),e.jsx("option",{value:"Europe/Paris",children:"Paris"}),e.jsx("option",{value:"Asia/Tokyo",children:"Tokyo"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Display"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.display?.compactMode||!1,onChange:t=>C("display","compactMode",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Compact Mode"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Show more content in less space"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.display?.showGameCovers!==!1,onChange:t=>C("display","showGameCovers",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Show Game Covers"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Display game cover images"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.display?.animateTransitions!==!1,onChange:t=>C("display","animateTransitions",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Animate Transitions"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Enable smooth animations"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.display?.showRatings!==!1,onChange:t=>C("display","showRatings",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Show Ratings"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Display game ratings"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Notifications"}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.email!==!1,onChange:t=>C("notifications","email",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Receive updates via email"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.push!==!1,onChange:t=>C("notifications","push",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Push Notifications"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Browser push notifications"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.achievements!==!1,onChange:t=>C("notifications","achievements",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Achievement Alerts"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Notify about new achievements"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.recommendations!==!1,onChange:t=>C("notifications","recommendations",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Recommendations"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Get personalized game suggestions"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.notifications?.friendActivity||!1,onChange:t=>C("notifications","friendActivity",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Friend Activity"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Updates about friends' gaming"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4",children:"Privacy"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Profile Visibility"}),e.jsxs("select",{value:r.privacy?.profileVisibility||"private",onChange:t=>C("privacy","profileVisibility",t.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none",children:[e.jsx("option",{value:"public",children:"ðŸŒ Public"}),e.jsx("option",{value:"friends",children:"ðŸ‘¥ Friends Only"}),e.jsx("option",{value:"private",children:"ðŸ”’ Private"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Control who can see your profile"})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.privacy?.showPlaytime!==!1,onChange:t=>C("privacy","showPlaytime",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Show Playtime"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Display your total playtime"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.privacy?.showAchievements!==!1,onChange:t=>C("privacy","showAchievements",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Show Achievements"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Display your achievements"})]})]}),e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:r.privacy?.showGameLibrary||!1,onChange:t=>C("privacy","showGameLibrary",t.target.checked),className:"w-4 h-4 text-gaming-accent bg-gray-800 border-gray-600 rounded focus:ring-gaming-accent"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Show Game Library"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Display your game collection"})]})]}),A("privacy").map((t,o)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-800/50 rounded-lg",children:[e.jsx("input",{type:"text",value:t.name,onChange:n=>R(t.id,{name:n.target.value}),className:"flex-1 px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Preference name"}),t.type==="boolean"?e.jsx("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:e.jsx("input",{type:"checkbox",checked:t.value,onChange:n=>R(t.id,{value:n.target.checked}),className:"w-4 h-4"})}):t.type==="select"?e.jsx("select",{value:t.value,onChange:n=>R(t.id,{value:n.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:t.options?.map(n=>e.jsx("option",{value:n,children:n},n))}):e.jsx("input",{type:t.type,value:t.value,onChange:n=>R(t.id,{value:n.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm w-32",placeholder:"Value"}),e.jsxs("div",{className:"flex gap-1",children:[o>0&&e.jsx("button",{type:"button",onClick:()=>P(v.findIndex(n=>n.id===t.id),v.findIndex(n=>n.id===t.id)-1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†‘"}),o<A("privacy").length-1&&e.jsx("button",{type:"button",onClick:()=>P(v.findIndex(n=>n.id===t.id),v.findIndex(n=>n.id===t.id)+1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†“"}),e.jsx("button",{type:"button",onClick:()=>N(t.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xs",children:"Ã—"})]})]},t.id))]})]}),e.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Custom Preferences"}),e.jsx("button",{type:"button",onClick:()=>G(!0),className:"px-4 py-2 bg-gaming-accent text-white rounded-lg hover:opacity-90 transition-opacity",children:"+ Add Custom Preference"})]}),k&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Add New Custom Preference"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",value:p.name||"",onChange:t=>h({...p,name:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Preference name"}),e.jsxs("select",{value:p.type||"text",onChange:t=>h({...p,type:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[e.jsx("option",{value:"text",children:"Text"}),e.jsx("option",{value:"number",children:"Number"}),e.jsx("option",{value:"boolean",children:"Boolean"}),e.jsx("option",{value:"select",children:"Select"})]}),e.jsxs("select",{value:p.category||"general",onChange:t=>h({...p,category:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[e.jsx("option",{value:"general",children:"General"}),e.jsx("option",{value:"display",children:"Display"}),e.jsx("option",{value:"notifications",children:"Notifications"}),e.jsx("option",{value:"privacy",children:"Privacy"})]}),p.type==="select"&&e.jsx("input",{type:"text",value:p.options?.join(", ")||"",onChange:t=>h({...p,options:t.target.value.split(",").map(o=>o.trim()).filter(Boolean)}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm md:col-span-2 lg:col-span-3",placeholder:"Options (comma-separated)"}),p.type!=="boolean"&&e.jsx("input",{type:p.type==="number"?"number":"text",value:p.value||"",onChange:t=>h({...p,value:p.type==="number"?parseFloat(t.target.value)||0:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Default value"})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3",children:[e.jsxs("label",{className:"flex items-center gap-2 text-sm text-gray-300",children:[e.jsx("input",{type:"checkbox",checked:p.isPublic||!1,onChange:t=>h({...p,isPublic:t.target.checked}),className:"w-4 h-4"}),"Public"]}),e.jsxs("div",{className:"flex gap-2 ml-auto",children:[e.jsx("button",{type:"button",onClick:()=>{G(!1),h({name:"",value:"",type:"text",category:"general",order:0,isPublic:!1,options:[]})},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:L,disabled:!p.name?.trim(),className:"px-3 py-1 bg-gaming-accent text-white rounded hover:opacity-90 transition-opacity text-sm disabled:opacity-50",children:"Add Preference"})]})]})]}),["general","display","notifications","privacy"].map(t=>{const o=A(t);return o.length===0?null:e.jsxs("div",{className:"mb-6",children:[e.jsxs("h4",{className:"text-lg font-medium text-white mb-3 capitalize",children:[t," Custom Preferences"]}),e.jsx("div",{className:"space-y-2",children:o.map(n=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm font-medium text-gray-300",children:n.name}),e.jsx("div",{className:"mt-1",children:n.type==="boolean"?e.jsxs("label",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",checked:n.value,onChange:c=>R(n.id,{value:c.target.checked}),className:"w-4 h-4"}),e.jsx("span",{className:"text-sm text-white",children:n.value?"Enabled":"Disabled"})]}):n.type==="select"?e.jsx("select",{value:n.value,onChange:c=>R(n.id,{value:c.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:n.options?.map(c=>e.jsx("option",{value:c,children:c},c))}):e.jsx("input",{type:n.type,value:n.value,onChange:c=>R(n.id,{value:c.target.value}),className:"px-2 py-1 bg-gray-700 border border-gray-600 rounded text-white text-sm w-full"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[n.isPublic&&e.jsx("span",{className:"text-xs px-2 py-1 bg-green-500/20 text-green-400 rounded",children:"Public"}),e.jsx("button",{type:"button",onClick:()=>N(n.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xs",children:"Remove"})]})]},n.id))})]},t)})]})]}):e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"âš ï¸"})}),e.jsx("p",{className:"text-gray-400",children:"Unable to load preferences"})]})},J=[{id:"explorer",name:"Explorer",description:"Loves discovering new worlds and secrets",icon:"ðŸ—ºï¸",color:"from-green-500 to-emerald-600",traits:["curious","thorough","patient"]},{id:"achiever",name:"Achiever",description:"Driven by completing challenges and earning rewards",icon:"ðŸ†",color:"from-yellow-500 to-orange-600",traits:["competitive","dedicated","goal-oriented"]},{id:"storyteller",name:"Storyteller",description:"Values narrative and emotional experiences",icon:"ðŸ“š",color:"from-purple-500 to-pink-600",traits:["imaginative","empathetic","reflective"]},{id:"competitor",name:"Competitor",description:"Thrives on challenge and competition",icon:"âš”ï¸",color:"from-red-500 to-rose-600",traits:["aggressive","strategic","focused"]},{id:"creator",name:"Creator",description:"Enjoys building, customizing, and expressing creativity",icon:"ðŸŽ¨",color:"from-blue-500 to-indigo-600",traits:["creative","innovative","expressive"]},{id:"socializer",name:"Socializer",description:"Values community and multiplayer experiences",icon:"ðŸ‘¥",color:"from-teal-500 to-cyan-600",traits:["outgoing","cooperative","friendly"]}],K=[{id:"action",name:"Action",tags:["fast-paced","exciting"]},{id:"adventure",name:"Adventure",tags:["exploration","story"]},{id:"rpg",name:"RPG",tags:["character progression","story"]},{id:"strategy",name:"Strategy",tags:["tactical","planning"]},{id:"simulation",name:"Simulation",tags:["realistic","detailed"]},{id:"sports",name:"Sports",tags:["competitive","athletic"]},{id:"racing",name:"Racing",tags:["speed","competition"]},{id:"puzzle",name:"Puzzle",tags:["brain-teaser","logic"]},{id:"platformer",name:"Platformer",tags:["precision","jumping"]},{id:"fps",name:"FPS",tags:["shooting","first-person"]},{id:"moba",name:"MOBA",tags:["team-based","competitive"]},{id:"roguelike",name:"Roguelike",tags:["procedural","challenging"]},{id:"horror",name:"Horror",tags:["scary","suspenseful"]},{id:"indie",name:"Indie",tags:["unique","creative"]},{id:"casual",name:"Casual",tags:["relaxing","accessible"]}],Q=[{id:"relaxed",name:"Relaxed",emoji:"ðŸ˜Œ",color:"from-green-500 to-teal-500",associatedGenres:["simulation","puzzle","casual"]},{id:"energetic",name:"Energetic",emoji:"âš¡",color:"from-yellow-500 to-orange-500",associatedGenres:["action","racing","sports"]},{id:"focused",name:"Focused",emoji:"ðŸŽ¯",color:"from-blue-500 to-indigo-500",associatedGenres:["strategy","puzzle","rpg"]},{id:"creative",name:"Creative",emoji:"ðŸŽ¨",color:"from-purple-500 to-pink-500",associatedGenres:["simulation","indie","adventure"]},{id:"competitive",name:"Competitive",emoji:"ðŸ†",color:"from-red-500 to-rose-500",associatedGenres:["fps","moba","sports","fighting"]},{id:"social",name:"Social",emoji:"ðŸ‘¥",color:"from-cyan-500 to-blue-500",associatedGenres:["moba","mmorpg","party"]},{id:"nostalgic",name:"Nostalgic",emoji:"ðŸ“»",color:"from-amber-500 to-yellow-500",associatedGenres:["retro","platformer","indie"]},{id:"adventurous",name:"Adventurous",emoji:"ðŸ—ºï¸",color:"from-emerald-500 to-green-500",associatedGenres:["adventure","rpg","exploration"]}],me=({onGenresUpdate:f})=>{const[a,d]=u.useState([]),[g,r]=u.useState([]),[b,v]=u.useState(!0),[M,k]=u.useState(!1),[G,p]=u.useState(null),h=new O,[j,E]=u.useState({id:"",name:"",tags:[]});u.useEffect(()=>{(()=>{const o=h.getUserGenres();d(o);const n=o.filter(c=>!K.find(U=>U.id===c.id));r(n.map(c=>({id:c.id,name:c.name,tags:c.tags}))),v(!1)})()},[]);const w=t=>{let o=[...a];if(a.find(c=>c.id===t))o=a.filter(c=>c.id!==t);else{const c=[...K].find(U=>U.id===t);if(c){const U={...c,preference:50};o=[...a,U]}else o=a}d(o),h.setUserGenres(o),f?.(o)},T=()=>{if(!j.name?.trim())return;const t={id:`custom-${Date.now()}`,name:j.name.trim(),tags:j.tags||[]};r([...g,t]),E({id:"",name:"",tags:[]}),k(!1)},C=(t,o)=>{r(g.map(n=>n.id===t?{...n,...o}:n)),d(a.map(n=>n.id===t?{...n,...o}:n))},L=t=>{r(g.filter(n=>n.id!==t));const o=a.filter(n=>n.id!==t);d(o),h.setUserGenres(o),f?.(o)},R=(t,o)=>{const n=[...a],[c]=n.splice(t,1);n.splice(o,0,c),d(n),h.setUserGenres(n),f?.(n)},N=(t,o)=>{const n=a.map(c=>c.id===t?{...c,preference:o}:c);d(n),h.setUserGenres(n),f?.(n)},P=t=>t>=80?"from-green-500 to-emerald-600":t>=60?"from-blue-500 to-cyan-600":t>=40?"from-yellow-500 to-orange-600":"from-gray-500 to-gray-600",A=t=>t>=80?"Love":t>=60?"Like":t>=40?"Neutral":"Dislike";return b?e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸŽ­"})}),e.jsx("p",{className:"text-gray-400",children:"Loading genres..."})]}):e.jsxs("div",{className:"glass-morphism rounded-xl p-6 cinematic-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-white flex items-center gap-3",children:[e.jsx("span",{children:"ðŸŽ­"}),"Favorite Genres"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[a.length," selected"]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-300",children:"Select your favorite game genres and rate your preference level. This helps us provide better recommendations."})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...K,...g].map(t=>{const o=a.find(S=>S.id===t.id),n=!!o,c=o?.preference||0,U=g.find(S=>S.id===t.id);return e.jsxs("div",{className:`
                relative group cursor-pointer transition-all duration-300 transform
                ${n?"scale-105":"scale-100"}
                ${n?"ring-2 ring-gaming-accent":""}
              `,onClick:()=>w(t.id),children:[e.jsxs("div",{className:`
                glass-morphism rounded-lg p-4 border-2 transition-all duration-200
                ${n?"border-gaming-accent bg-gaming-accent/10":"border-gray-700 hover:border-gray-600"}
              `,children:[e.jsxs("div",{className:`
                  w-12 h-12 rounded-lg mx-auto mb-3 flex items-center justify-center text-2xl
                  bg-gradient-to-r ${n?P(c):"from-gray-500 to-gray-600"}
                `,children:[t.id==="action"&&"âš”ï¸",t.id==="adventure"&&"ðŸ—ºï¸",t.id==="rpg"&&"ðŸ‰",t.id==="strategy"&&"â™Ÿï¸",t.id==="simulation"&&"ðŸ—ï¸",t.id==="sports"&&"âš½",t.id==="racing"&&"ðŸŽï¸",t.id==="puzzle"&&"ðŸ§©",t.id==="platformer"&&"ðŸ¦˜",t.id==="fps"&&"ðŸ”«",t.id==="moba"&&"ðŸ‘¥",t.id==="roguelike"&&"ðŸŽ²",t.id==="horror"&&"ðŸ‘»",t.id==="indie"&&"ðŸŽ¨",t.id==="casual"&&"ðŸ˜Š",U&&"ðŸŽ®"]}),e.jsxs("h3",{className:"text-white font-medium text-sm text-center mb-2",children:[t.name,U&&e.jsx("span",{className:"ml-1 text-xs text-gaming-accent",children:"Custom"})]}),e.jsx("div",{className:"flex flex-wrap gap-1 justify-center mb-3",children:t.tags?.slice(0,2).map(S=>e.jsx("span",{className:"text-xs px-2 py-1 bg-gray-700/50 text-gray-300 rounded-full",children:S},S))}),n&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-gray-400",children:"Preference"}),e.jsx("span",{className:`font-medium ${P(c).split(" ")[0].replace("from-","text-")}`,children:A(c)})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:c,onChange:S=>{S.stopPropagation(),N(t.id,parseInt(S.target.value))},className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gaming-accent","aria-label":`Preference level for ${t.name} genre`,title:`Preference level for ${t.name} genre`,style:{background:`linear-gradient(to right, ${P(c).replace("from-","").replace(" to-",", ")}) 0%, ${P(c).replace("from-","").replace(" to-",", ")} ${c}%, #374151 ${c}%, #374151 100%)`}}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:c}),e.jsx("span",{children:"100"})]})]}),e.jsx("div",{className:"absolute top-2 right-2",children:n?e.jsx("div",{className:"w-6 h-6 bg-gaming-accent rounded-full flex items-center justify-center text-white text-xs",children:"âœ“"}):e.jsx("div",{className:"w-6 h-6 bg-gray-700 rounded-full flex items-center justify-center text-gray-400 text-xs",children:"+"})}),U&&e.jsxs("div",{className:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),p(t.id)},className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs mr-1",children:"âœï¸"}),e.jsx("button",{type:"button",onClick:S=>{S.stopPropagation(),L(t.id)},className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center text-white text-xs",children:"Ã—"})]})]}),n&&e.jsx("div",{className:`
                  absolute inset-0 rounded-lg bg-gradient-to-r ${P(c)}
                  opacity-20 blur-xl -z-10
                `})]},t.id)})}),e.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Custom Genres"}),e.jsx("button",{type:"button",onClick:()=>k(!0),className:"px-4 py-2 bg-gaming-accent text-white rounded-lg hover:opacity-90 transition-opacity",children:"+ Add Custom Genre"})]}),M&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Add New Custom Genre"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:j.name||"",onChange:t=>E({...j,name:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Genre name","aria-label":"New genre name",title:"Enter name for new custom genre"}),e.jsx("input",{type:"text",value:j.tags?.join(", ")||"",onChange:t=>E({...j,tags:t.target.value.split(",").map(o=>o.trim()).filter(Boolean)}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Tags (comma-separated)","aria-label":"Tags for new genre",title:"Enter tags for new custom genre"})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>{k(!1),E({id:"",name:"",tags:[]})},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:T,disabled:!j.name?.trim(),className:"px-3 py-1 bg-gaming-accent text-white rounded hover:opacity-90 transition-opacity text-sm disabled:opacity-50",children:"Add Genre"})]})]}),G&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Edit Custom Genre"}),(()=>{const t=g.find(o=>o.id===G);return t?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:t.name,onChange:o=>C(t.id,{name:o.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Genre name","aria-label":`Edit genre name for ${t.name}`,title:`Edit genre name for ${t.name}`}),e.jsx("input",{type:"text",value:t.tags?.join(", ")||"",onChange:o=>C(t.id,{tags:o.target.value.split(",").map(n=>n.trim()).filter(Boolean)}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Tags (comma-separated)","aria-label":`Edit tags for ${t.name}`,title:`Edit tags for ${t.name}`})]}):null})(),e.jsx("div",{className:"flex gap-2 mt-3",children:e.jsx("button",{type:"button",onClick:()=>p(null),className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"Done"})})]}),a.length>1&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-3",children:"Reorder Selected Genres"}),e.jsx("div",{className:"space-y-2",children:a.map((t,o)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("span",{className:"text-white font-medium flex-1",children:t.name}),e.jsxs("div",{className:"flex gap-1",children:[o>0&&e.jsx("button",{type:"button",onClick:()=>R(o,o-1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†‘"}),o<a.length-1&&e.jsx("button",{type:"button",onClick:()=>R(o,o+1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†“"})]})]},t.id))})]})]}),a.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-800/30 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-2",children:"Your Genre Profile"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:a.sort((t,o)=>o.preference-t.preference).slice(0,5).map(t=>e.jsxs("span",{className:`
                    px-3 py-1 rounded-full text-xs font-medium
                    bg-gradient-to-r ${P(t.preference)} text-white
                  `,children:[t.name," (",t.preference,"%)"]},t.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Top genres influence your recommendations the most"})]}),a.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:"No genres selected yet. Click on genres above to build your gaming profile."})})]})},se="gamepilot_user_preferences",Z={moodCustomizations:{},theme:"dark",language:"en"};function W(){try{const f=localStorage.getItem(se);if(f){const a=JSON.parse(f);return{...Z,...a}}}catch(f){console.warn("Failed to load user preferences:",f)}return Z}function ae(f){try{const d={...W(),...f};localStorage.setItem(se,JSON.stringify(d))}catch(a){console.warn("Failed to save user preferences:",a)}}function ge(){return W().moodCustomizations}function xe(f,a){const g={...W().moodCustomizations,[f]:a};ae({moodCustomizations:g})}function ee(f){const a=W(),{[f]:d,...g}=a.moodCustomizations;ae({moodCustomizations:g})}function re(f){const a=_.find(r=>r.id===f);if(!a)return{id:f,name:f,emoji:"â“",description:"Unknown mood",isCustom:!1};const g=ge()[f];return{id:f,name:g?.name||a.name,emoji:g?.emoji||a.emoji,description:g?.description||a.description,isCustom:!!g}}function ue(){return _.map(f=>re(f.id))}const he=({onMoodsUpdate:f})=>{const[a,d]=u.useState([]),[g,r]=u.useState([]),[b,v]=u.useState(!0),[M,k]=u.useState(!1),[G,p]=u.useState(null),[h,j]=u.useState(null),[E,w]=u.useState({}),[T,C]=u.useState({}),[L,R]=u.useState({}),N=new O,[P,A]=u.useState({id:"",name:"",emoji:"ðŸ˜Š",color:"from-gray-500 to-gray-600",frequency:1,preference:0,associatedGenres:[]});u.useEffect(()=>{(()=>{const l=N.getUserMoods();d(l);const m=l.filter(x=>!Q.find($=>$.id===x.id));r(m.map(x=>({id:x.id,name:x.name,emoji:x.emoji,color:x.color,frequency:x.frequency||1,preference:x.preference||0,associatedGenres:x.associatedGenres||[]}))),v(!1)})()},[]);const t=s=>{let l=[...a];if(a.find(x=>x.id===s))l=a.filter(x=>x.id!==s);else{const x=[...Q].find($=>$.id===s);if(x){const $={...x,preference:50,frequency:1};l=[...a,$]}else l=a}d(l),N.setUserMoods(l),N.setUserMoods(l),N.setUserMoods(l),N.setUserMoods(l),N.setUserMoods(l),f?.(l)},o=()=>{if(!P.name?.trim())return;const s={id:`custom-${Date.now()}`,name:P.name.trim(),emoji:P.emoji||"ðŸ˜Š",color:P.color||"from-gray-500 to-gray-600",frequency:1,preference:0,associatedGenres:P.associatedGenres||[]};r([...g,s]),A({id:"",name:"",emoji:"ðŸ˜Š",color:"from-gray-500 to-gray-600",frequency:1,preference:0,associatedGenres:[]}),k(!1),d([...a,s]),N.setUserMoods([...a,s])},n=(s,l)=>{r(g.map(m=>m.id===s?{...m,...l}:m)),d(a.map(m=>m.id===s?{...m,...l}:m)),N.setUserMoods(a),N.setUserMoods(a),N.setUserMoods(a),N.setUserMoods(a),N.setUserMoods(a),f?.(a)},c=s=>{r(g.filter(m=>m.id!==s));const l=a.filter(m=>m.id!==s);d(l),N.setUserMoods(l),N.setUserMoods(l),N.setUserMoods(l),N.setUserMoods(l),f?.(l)},U=(s,l)=>{const m=[...a],[x]=m.splice(s,1);m.splice(l,0,x),d(m),N.setUserMoods(m),f?.(m)},S=(s,l)=>{const m=a.map(x=>x.id===s?{...x,preference:l}:x);d(m),N.setUserMoods(m),f?.(m)},Y=(s,l)=>{const m=a.map(x=>x.id===s?{...x,frequency:l}:x);d(m),N.setUserMoods(m),f?.(m)},H=s=>{const l=re(s);w(m=>({...m,[s]:l.name})),C(m=>({...m,[s]:l.emoji})),R(m=>({...m,[s]:l.description})),j(s)},I=s=>{const l=E[s]?.trim(),m=T[s]?.trim(),x=L[s]?.trim();(l||m||x)&&xe(s,{...l&&{name:l},...m&&{emoji:m},...x&&{description:x}}),j(null)},q=s=>{w(l=>{const{[s]:m,...x}=l;return x}),C(l=>{const{[s]:m,...x}=l;return x}),R(l=>{const{[s]:m,...x}=l;return x}),j(null)},B=s=>{ee(s),q(s)},V=()=>{confirm("Are you sure you want to reset all mood customizations to defaults?")&&(_.forEach(s=>{ee(s.id)}),w({}),C({}),R({}),j(null))},z=s=>s>=80?"from-purple-500 to-pink-600":s>=60?"from-blue-500 to-cyan-600":s>=40?"from-green-500 to-teal-600":"from-gray-500 to-gray-600",i=s=>s>=80?"Love":s>=60?"Like":s>=40?"Sometimes":"Rarely",y=s=>s>=5?"Very Often":s>=3?"Often":s>=1?"Sometimes":"Rarely";return b?e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ˜Š"})}),e.jsx("p",{className:"text-gray-400",children:"Loading moods..."})]}):e.jsxs("div",{className:"glass-morphism rounded-xl p-6 cinematic-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-white flex items-center gap-3",children:[e.jsx("span",{children:"ðŸ˜Š"}),"Gaming Moods"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[a.length," selected"]})]}),e.jsx("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-300",children:"Select the moods you experience while gaming. This helps us recommend games that match your emotional state."})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[...Q,...g].map(s=>{const l=a.find(D=>D.id===s.id),m=!!l,x=l?.preference||0,$=l?.frequency||0,X=g.find(D=>D.id===s.id);return e.jsxs("div",{className:`
                relative group cursor-pointer transition-all duration-300 transform
                ${m?"scale-105":"scale-100"}
                ${m?"ring-2 ring-gaming-accent":""}
              `,onClick:()=>t(s.id),children:[e.jsxs("div",{className:`
                glass-morphism rounded-lg p-4 border-2 transition-all duration-200
                ${m?"border-gaming-accent bg-gaming-accent/10":"border-gray-700 hover:border-gray-600"}
              `,children:[e.jsx("div",{className:`
                  w-16 h-16 rounded-xl mx-auto mb-3 flex items-center justify-center text-3xl
                  bg-gradient-to-r ${m?z(x):s.color}
                `,children:s.emoji}),e.jsxs("h3",{className:"text-white font-medium text-sm text-center mb-2",children:[s.name,X&&e.jsx("span",{className:"ml-1 text-xs text-gaming-accent",children:"Custom"})]}),m&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Preference"}),e.jsx("span",{className:`font-medium ${z(x).split(" ")[0].replace("from-","text-")}`,children:i(x)})]}),e.jsx("input",{type:"range",min:"0",max:"100",step:"10",value:x,onChange:D=>{D.stopPropagation(),S(s.id,parseInt(D.target.value))},className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gaming-accent","aria-label":`Preference level for ${s.name} mood`,title:`Preference level for ${s.name} mood`,style:{background:`linear-gradient(to right, ${z(x).replace("from-","").replace(" to-",", ")}) 0%, ${z(x).replace("from-","").replace(" to-",", ")} ${x}%, #374151 ${x}%, #374151 100%)`}})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-gray-400",children:"Frequency"}),e.jsx("span",{className:"text-gray-300",children:y($)})]}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(D=>e.jsx("button",{onClick:ne=>{ne.stopPropagation(),Y(s.id,D)},className:`
                          flex-1 h-6 rounded text-xs font-medium transition-colors
                          ${$>=D?"bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}
                        `,children:D},D))})]})]}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[m?e.jsx("div",{className:"w-6 h-6 bg-gaming-accent rounded-full flex items-center justify-center text-white text-xs",children:"âœ“"}):e.jsx("div",{className:"w-6 h-6 bg-gray-700 rounded-full flex items-center justify-center text-gray-400 text-xs",children:"+"}),m&&e.jsx("button",{onClick:D=>{D.stopPropagation(),H(s.id)},className:"w-6 h-6 bg-purple-600 hover:bg-purple-700 rounded-full flex items-center justify-center text-white text-xs opacity-0 group-hover:opacity-100 transition-opacity",title:`Customize ${s.name} display`,children:"ðŸŽ¨"})]}),X&&e.jsxs("div",{className:"absolute top-2 left-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),p(s.id)},className:"w-6 h-6 bg-blue-600 rounded-full flex items-center justify-center text-white text-xs mr-1",children:"âœï¸"}),e.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),c(s.id)},className:"w-6 h-6 bg-red-600 rounded-full flex items-center justify-center text-white text-xs",children:"Ã—"})]})]}),m&&e.jsx("div",{className:`
              absolute inset-0 rounded-lg bg-gradient-to-r ${z(x)}
              opacity-20 blur-xl -z-10
            `})]},s.id)})}),h&&e.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-semibold text-white flex items-center gap-3",children:[e.jsx("span",{children:"ðŸŽ¨"}),"Customize Mood Display"]}),e.jsx("button",{onClick:V,className:"px-3 py-1 bg-red-600 hover:bg-red-700 text-white rounded-lg text-sm",children:"Reset All"})]}),e.jsx("div",{className:"space-y-4",children:(()=>{const s=ue().find(l=>l.id===h);return s?e.jsxs("div",{className:"p-6 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"text-3xl",children:s.emoji}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-medium text-white",children:s.name}),e.jsx("p",{className:"text-sm text-gray-400",children:s.description}),s.isCustom&&e.jsx("span",{className:"text-xs text-gaming-primary",children:"(Custom)"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Name"}),e.jsx("input",{type:"text",value:E[h]||"",onChange:l=>w(m=>({...m,[h]:l.target.value})),placeholder:_.find(l=>l.id===h)?.name,className:"w-full p-3 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none",maxLength:30})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Emoji"}),e.jsx("input",{type:"text",value:T[h]||"",onChange:l=>C(m=>({...m,[h]:l.target.value})),placeholder:_.find(l=>l.id===h)?.emoji,className:"w-full p-3 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none",maxLength:2})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),e.jsx("input",{type:"text",value:L[h]||"",onChange:l=>R(m=>({...m,[h]:l.target.value})),placeholder:_.find(l=>l.id===h)?.description,className:"w-full p-3 bg-gray-700 border border-gray-600 rounded text-white placeholder-gray-400 focus:border-gaming-accent focus:outline-none",maxLength:100})]})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx("button",{onClick:()=>I(h),className:"px-4 py-2 bg-gaming-primary hover:bg-gaming-primary/80 text-white rounded-lg transition-colors",children:"Save Changes"}),e.jsx("button",{onClick:()=>q(h),className:"px-4 py-2 bg-gray-600 hover:bg-gray-700 text-white rounded-lg transition-colors",children:"Cancel"}),e.jsx("button",{onClick:()=>B(h),className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors ml-auto",children:"Reset to Default"})]})]}):null})()}),e.jsx("div",{className:"mt-4 p-3 bg-gaming-surface/50 border border-gaming-border rounded-lg",children:e.jsxs("p",{className:"text-sm text-gaming-text-muted",children:["ðŸ’¡ ",e.jsx("strong",{children:"Tip:"})," Customize mood names and emojis to make them more personal to you! The underlying mood categories remain the same - only the display changes."]})})]}),e.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Custom Moods"}),e.jsx("button",{type:"button",onClick:()=>k(!0),className:"px-4 py-2 bg-gaming-accent text-white rounded-lg hover:opacity-90 transition-opacity",children:"+ Add Custom Mood"})]}),M&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Add New Custom Mood"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",value:P.name,onChange:s=>A({...P,name:s.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Mood name","aria-label":"New mood name",title:"Enter name for new custom mood"}),e.jsx("input",{type:"text",value:P.emoji,onChange:s=>A({...P,emoji:s.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Emoji",maxLength:2,"aria-label":"New mood emoji",title:"Enter emoji for new custom mood"}),e.jsxs("select",{value:P.color,onChange:s=>A({...P,color:s.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm","aria-label":"New mood color",children:[e.jsx("option",{value:"from-gray-500 to-gray-600",children:"Gray"}),e.jsx("option",{value:"from-red-500 to-rose-600",children:"Red"}),e.jsx("option",{value:"from-orange-500 to-amber-600",children:"Orange"}),e.jsx("option",{value:"from-yellow-500 to-lime-600",children:"Yellow"}),e.jsx("option",{value:"from-green-500 to-emerald-600",children:"Green"}),e.jsx("option",{value:"from-blue-500 to-indigo-600",children:"Blue"}),e.jsx("option",{value:"from-purple-500 to-pink-600",children:"Purple"}),e.jsx("option",{value:"from-teal-500 to-cyan-600",children:"Teal"})]}),e.jsx("input",{type:"text",value:P.associatedGenres.join(", "),onChange:s=>A({...P,associatedGenres:s.target.value.split(",").map(l=>l.trim()).filter(l=>l)}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm lg:col-span-3",placeholder:"Associated genres (comma separated)","aria-label":"Associated genres for new mood",title:"Enter associated genres for new custom mood"})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>{k(!1),A({id:"",name:"",emoji:"ðŸ˜Š",color:"from-gray-500 to-gray-600",frequency:1,preference:0,associatedGenres:[]})},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:o,disabled:!P.name?.trim(),className:"px-3 py-1 bg-gaming-accent text-white rounded hover:opacity-90 transition-opacity text-sm disabled:opacity-50",children:"Add Mood"})]})]}),G&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Edit Custom Mood"}),(()=>{const s=g.find(l=>l.id===G);return s?e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:[e.jsx("input",{type:"text",value:s.name,onChange:l=>n(s.id,{name:l.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Mood name","aria-label":`Edit mood name for ${s.name}`,title:`Edit mood name for ${s.name}`}),e.jsx("input",{type:"text",value:s.emoji,onChange:l=>n(s.id,{emoji:l.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Emoji",maxLength:2,"aria-label":`Edit mood emoji for ${s.name}`,title:`Edit mood emoji for ${s.name}`}),e.jsxs("select",{value:s.color,onChange:l=>n(s.id,{color:l.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm","aria-label":`Edit color for ${s.name} mood`,children:[e.jsx("option",{value:"from-gray-500 to-gray-600",children:"Gray"}),e.jsx("option",{value:"from-red-500 to-rose-600",children:"Red"}),e.jsx("option",{value:"from-orange-500 to-amber-600",children:"Orange"}),e.jsx("option",{value:"from-yellow-500 to-lime-600",children:"Yellow"}),e.jsx("option",{value:"from-green-500 to-emerald-600",children:"Green"}),e.jsx("option",{value:"from-blue-500 to-indigo-600",children:"Blue"}),e.jsx("option",{value:"from-purple-500 to-pink-600",children:"Purple"}),e.jsx("option",{value:"from-teal-500 to-cyan-600",children:"Teal"})]}),e.jsx("input",{type:"text",value:s.associatedGenres.join(", "),onChange:l=>n(s.id,{associatedGenres:l.target.value.split(",").map(m=>m.trim()).filter(Boolean)}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm lg:col-span-3",placeholder:"Associated genres (comma-separated)","aria-label":`Edit associated genres for ${s.name}`,title:`Edit associated genres for ${s.name}`})]}):null})(),e.jsx("div",{className:"flex gap-2 mt-3",children:e.jsx("button",{type:"button",onClick:()=>p(null),className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"Done"})})]}),a.length>1&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-3",children:"Reorder Selected Moods"}),e.jsx("div",{className:"space-y-2",children:a.map((s,l)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("span",{className:"text-2xl",children:s.emoji}),e.jsx("span",{className:"text-white font-medium flex-1",children:s.name}),e.jsxs("div",{className:"flex gap-1",children:[l>0&&e.jsx("button",{type:"button",onClick:()=>U(l,l-1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†‘"}),l<a.length-1&&e.jsx("button",{type:"button",onClick:()=>U(l,l+1),className:"px-2 py-1 bg-gray-700 text-white rounded hover:bg-gray-600 text-xs",children:"â†“"})]})]},s.id))})]})]}),a.length>0&&e.jsxs("div",{className:"mt-6 p-4 bg-gray-800/30 rounded-lg",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-300 mb-3",children:"Your Mood Profile"}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-3",children:a.sort((s,l)=>l.preference*l.frequency-s.preference*s.frequency).slice(0,5).map(s=>e.jsxs("span",{className:`
                px-3 py-1 rounded-full text-xs font-medium flex items-center gap-1
                bg-gradient-to-r ${z(s.preference)} text-white
              `,children:[e.jsx("span",{children:s.emoji}),s.name]},s.id))}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400",children:"Most Frequent"}),e.jsxs("div",{className:"text-white font-medium",children:[a.reduce((s,l)=>l.frequency>s.frequency?l:s).emoji," ",a.reduce((s,l)=>l.frequency>s.frequency?l:s).name]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400",children:"Highest Preference"}),e.jsxs("div",{className:"text-white font-medium",children:[a.reduce((s,l)=>l.preference>s.preference?l:s).emoji," ",a.reduce((s,l)=>l.preference>s.preference?l:s).name]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400",children:"Avg Preference"}),e.jsxs("div",{className:"text-white font-medium",children:[Math.round(a.reduce((s,l)=>s+l.preference,0)/a.length),"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400",children:"Total Moods"}),e.jsx("div",{className:"text-white font-medium",children:a.length})]})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:"Your mood preferences help us suggest the perfect games for how you're feeling"})]}),a.length===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-gray-400",children:"No moods selected yet. Click on moods above to tell us how you like to feel while gaming."})})]})},pe=({onPlaystyleUpdate:f})=>{const a=new O,[d,g]=u.useState(null),[r,b]=u.useState({}),[v,M]=u.useState([]),[k,G]=u.useState(!0),[p,h]=u.useState(!1),[j,E]=u.useState({id:"",name:"",description:"",icon:"ðŸŽ®",color:"from-gray-500 to-gray-600",traits:[]});u.useEffect(()=>{(()=>{const o=a.getUserPlaystyle();if(o)g(o),b(o),M(o.customPlaystyles||[]);else{const n=a.initializeDefaultData().playstyle;g(n),b(n),M(n.customPlaystyles||[])}G(!1)})()},[]);const w=()=>{if(!d)return;const t={...d,...r,preferences:{...d.preferences,...r.preferences},customPlaystyles:v};a.setUserPlaystyle(t),g(t),h(!1),f?.(t)},T=()=>{const t=a.initializeDefaultData().playstyle;b(t),a.setUserPlaystyle(t)},C=t=>{const n=[...J,...v].find(c=>c.id===t);n&&b(c=>({...c,primary:n}))},L=t=>{if(t==="none")b(o=>({...o,secondary:void 0}));else{const n=[...J,...v].find(c=>c.id===t);n&&b(c=>({...c,secondary:n}))}},R=()=>{if(!j.name?.trim())return;const t={id:`custom-${Date.now()}`,name:j.name.trim(),description:j.description||"",icon:j.icon||"ðŸŽ®",color:j.color||"from-gray-500 to-gray-600",traits:j.traits||[]},o=[...v,t];M(o),E({id:"",name:"",description:"",icon:"ðŸŽ®",color:"from-gray-500 to-gray-600",traits:[]}),h(!1)},N=(t,o)=>{b(n=>({...n,preferences:{...n.preferences,[t]:o}}))},P=t=>{const o=v.filter(n=>n.id!==t);M(o)},A=t=>{const o=r.traits||d?.traits||[],n=o.includes(t)?o.filter(c=>c!==t):[...o,t];b(c=>({...c,traits:n}))};return k?e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸŽ¯"})}),e.jsx("p",{className:"text-gray-400",children:"Loading playstyle..."})]}):d?e.jsxs("div",{className:"glass-morphism rounded-xl p-6 cinematic-shadow",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-2xl font-semibold text-white flex items-center gap-3",children:[e.jsx("span",{children:"ðŸŽ¯"}),"Playstyle Profile"]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:T,className:"px-4 py-2 bg-gray-700 text-white rounded-lg hover:bg-gray-600 transition-colors",title:"Reset playstyle to default","aria-label":"Reset playstyle to default",children:"Reset to Default"}),e.jsx("button",{onClick:w,className:"px-4 py-2 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg hover:opacity-90 transition-opacity",title:"Save playstyle changes","aria-label":"Save playstyle changes",children:"Save Changes"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Primary Playstyle"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[...J,...v].map(t=>{const o=v.find(n=>n.id===t.id);return e.jsxs("button",{onClick:()=>C(t.id),className:`
                    relative group cursor-pointer transition-all duration-300 transform
                    ${r.primary?.id===t.id?"scale-105 ring-2 ring-gaming-accent":"scale-100 hover:scale-102"}
                  `,title:`Select ${t.name} as primary playstyle`,"aria-label":`Select ${t.name} as primary playstyle`,children:[o&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("button",{type:"button",onClick:n=>{n.stopPropagation(),P(t.id)},className:"w-5 h-5 bg-red-600 rounded-full flex items-center justify-center text-white text-xs hover:bg-red-700",title:`Remove custom playstyle ${t.name}`,"aria-label":`Remove custom playstyle ${t.name}`,children:"Ã—"})}),e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:`
                      w-10 h-10 rounded-lg flex items-center justify-center text-xl
                      bg-gradient-to-r ${t.color}
                    `,children:t.icon}),e.jsxs("span",{className:"text-white font-medium",children:[t.name,o&&e.jsx("span",{className:"ml-1 text-xs text-gaming-accent",children:"Custom"})]})]}),e.jsx("p",{className:"text-xs text-gray-400",children:t.description})]},t.id)})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Secondary Playstyle (Optional)"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("button",{onClick:()=>L("none"),className:`
                w-full p-3 rounded-lg border-2 transition-all duration-200 text-left
                ${r.secondary?"border-gray-700 hover:border-gray-600":"border-gaming-accent bg-gaming-accent/10"}
              `,title:"Select no secondary playstyle","aria-label":"Select no secondary playstyle",children:e.jsx("span",{className:"text-gray-400",children:"No secondary playstyle"})}),[...J,...v].filter(t=>t.id!==r.primary?.id).map(t=>{const o=v.find(n=>n.id===t.id);return e.jsxs("button",{onClick:()=>L(t.id),className:`
                      w-full p-3 rounded-lg border-2 transition-all duration-200 text-left relative
                      ${r.secondary?.id===t.id?"border-gaming-accent bg-gaming-accent/10":"border-gray-700 hover:border-gray-600"}
                    `,title:`Select ${t.name} as secondary playstyle`,"aria-label":`Select ${t.name} as secondary playstyle`,children:[o&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("button",{type:"button",onClick:n=>{n.stopPropagation(),P(t.id)},className:"w-5 h-5 bg-red-600 rounded-full flex items-center justify-center text-white text-xs hover:bg-red-700",title:`Remove custom playstyle ${t.name}`,"aria-label":`Remove custom playstyle ${t.name}`,children:"Ã—"})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`
                        w-8 h-8 rounded-lg flex items-center justify-center text-sm
                        bg-gradient-to-r ${t.color}
                      `,children:t.icon}),e.jsxs("div",{children:[e.jsxs("span",{className:"text-white font-medium",children:[t.name,o&&e.jsx("span",{className:"ml-1 text-xs text-gaming-accent",children:"Custom"})]}),e.jsx("p",{className:"text-xs text-gray-400",children:t.description})]})]})]},t.id)})]})]})]}),e.jsxs("div",{className:"mt-8 space-y-6",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Gaming Preferences"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Session Length"}),e.jsxs("select",{value:r.preferences?.sessionLength||"medium",onChange:t=>N("sessionLength",t.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none",children:[e.jsx("option",{value:"short",children:"âš¡ Short (0-30 min)"}),e.jsx("option",{value:"medium",children:"â±ï¸ Medium (30-90 min)"}),e.jsx("option",{value:"long",children:"ðŸ• Long (90+ min)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Difficulty Preference"}),e.jsxs("select",{value:r.preferences?.difficulty||"normal",onChange:t=>N("difficulty",t.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none",children:[e.jsx("option",{value:"casual",children:"ðŸ˜Œ Casual"}),e.jsx("option",{value:"normal",children:"ðŸŽ¯ Normal"}),e.jsx("option",{value:"hard",children:"ðŸ’ª Hard"}),e.jsx("option",{value:"expert",children:"ðŸ”¥ Expert"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Social Preference"}),e.jsxs("select",{value:r.preferences?.socialPreference||"solo",onChange:t=>N("socialPreference",t.target.value),className:"w-full px-3 py-2 bg-gray-800 border border-gray-700 rounded-lg text-white focus:border-gaming-accent focus:outline-none",children:[e.jsx("option",{value:"solo",children:"ðŸ‘¤ Solo"}),e.jsx("option",{value:"cooperative",children:"ðŸ¤ Cooperative"}),e.jsx("option",{value:"competitive",children:"âš”ï¸ Competitive"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"text-md font-medium text-gray-300",children:"Focus Areas"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Story Focus"}),e.jsxs("span",{className:"text-sm text-white",children:[r.preferences?.storyFocus||70,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:r.preferences?.storyFocus||70,onChange:t=>N("storyFocus",parseInt(t.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gaming-accent"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Graphics Focus"}),e.jsxs("span",{className:"text-sm text-white",children:[r.preferences?.graphicsFocus||60,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:r.preferences?.graphicsFocus||60,onChange:t=>N("graphicsFocus",parseInt(t.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gaming-accent"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("label",{className:"text-sm text-gray-300",children:"Gameplay Focus"}),e.jsxs("span",{className:"text-sm text-white",children:[r.preferences?.gameplayFocus||80,"%"]})]}),e.jsx("input",{type:"range",min:"0",max:"100",value:r.preferences?.gameplayFocus||80,onChange:t=>N("gameplayFocus",parseInt(t.target.value)),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-gaming-accent"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-medium text-gray-300 mb-3",children:"Personality Traits"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.primary?.traits?.map(t=>e.jsx("button",{onClick:()=>A(t),className:`
                  px-3 py-1 rounded-full text-sm transition-all duration-200
                  ${(r.traits||[]).includes(t)?"bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}
                `,children:t},t)),r.secondary?.traits?.map(t=>e.jsx("button",{onClick:()=>A(t),className:`
                  px-3 py-1 rounded-full text-sm transition-all duration-200
                  ${(r.traits||[]).includes(t)?"bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white":"bg-gray-700 text-gray-400 hover:bg-gray-600"}
                `,children:t},t))]}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Select traits that describe your gaming personality"})]})]}),e.jsxs("div",{className:"mt-8 p-4 bg-gray-800/30 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-gray-300 mb-3",children:"Your Playstyle Profile"}),e.jsxs("div",{className:"flex items-center gap-4 mb-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`
              w-10 h-10 rounded-lg flex items-center justify-center
              bg-gradient-to-r ${r.primary?.color}
            `,children:r.primary?.icon}),e.jsx("span",{className:"text-white font-medium",children:r.primary?.name})]}),r.secondary&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-gray-500",children:"+"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`
                  w-10 h-10 rounded-lg flex items-center justify-center
                  bg-gradient-to-r ${r.secondary.color}
                `,children:r.secondary.icon}),e.jsx("span",{className:"text-white font-medium",children:r.secondary.name})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(r.traits||[]).map(t=>e.jsx("span",{className:"px-2 py-1 bg-gaming-primary/20 text-gaming-primary rounded text-xs",children:t},t))})]}),e.jsxs("div",{className:"mt-8 border-t border-gray-700 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"text-xl font-semibold text-white",children:"Custom Playstyles"}),e.jsx("button",{type:"button",onClick:()=>h(!0),className:"px-4 py-2 bg-gaming-accent text-white rounded-lg hover:opacity-90 transition-opacity",children:"+ Add Custom Playstyle"})]}),p&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-3",children:"Add New Custom Playstyle"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[e.jsx("input",{type:"text",value:j.name,onChange:t=>E({...j,name:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Playstyle name"}),e.jsx("input",{type:"text",value:j.description,onChange:t=>E({...j,description:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Description"}),e.jsx("input",{type:"text",value:j.icon,onChange:t=>E({...j,icon:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",placeholder:"Emoji",maxLength:2}),e.jsxs("select",{value:j.color,onChange:t=>E({...j,color:t.target.value}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm",children:[e.jsx("option",{value:"from-gray-500 to-gray-600",children:"Gray"}),e.jsx("option",{value:"from-red-500 to-rose-600",children:"Red"}),e.jsx("option",{value:"from-orange-500 to-amber-600",children:"Orange"}),e.jsx("option",{value:"from-yellow-500 to-lime-600",children:"Yellow"}),e.jsx("option",{value:"from-green-500 to-emerald-600",children:"Green"}),e.jsx("option",{value:"from-blue-500 to-indigo-600",children:"Blue"}),e.jsx("option",{value:"from-purple-500 to-pink-600",children:"Purple"}),e.jsx("option",{value:"from-teal-500 to-cyan-600",children:"Teal"})]}),e.jsx("input",{type:"text",value:j.traits?.join(", ")||"",onChange:t=>E({...j,traits:t.target.value.split(",").map(o=>o.trim()).filter(Boolean)}),className:"px-3 py-2 bg-gray-700 border border-gray-600 rounded text-white text-sm md:col-span-2",placeholder:"Traits (comma-separated)"})]}),e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{type:"button",onClick:()=>{h(!1),E({id:"",name:"",description:"",icon:"ðŸŽ®",color:"from-gray-500 to-gray-600",traits:[]})},className:"px-3 py-1 bg-gray-600 text-white rounded hover:bg-gray-700 text-sm",children:"Cancel"}),e.jsx("button",{type:"button",onClick:R,disabled:!j.name?.trim(),className:"px-3 py-1 bg-gaming-accent text-white rounded hover:opacity-90 transition-opacity text-sm disabled:opacity-50",children:"Add Playstyle"})]})]}),v.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h4",{className:"text-lg font-medium text-white mb-3",children:"Your Custom Playstyles"}),e.jsx("div",{className:"space-y-2",children:v.map(t=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-800/30 rounded-lg",children:[e.jsx("div",{className:`
                    w-10 h-10 rounded-lg flex items-center justify-center
                    bg-gradient-to-r ${t.color}
                  `,children:t.icon}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-white font-medium",children:t.name}),e.jsx("div",{className:"text-xs text-gray-400",children:t.description})]}),e.jsx("button",{type:"button",onClick:()=>{},className:"px-2 py-1 bg-blue-600 text-white rounded hover:bg-blue-700 text-xs",children:"Edit"}),e.jsx("button",{type:"button",onClick:()=>P(t.id),className:"px-2 py-1 bg-red-600 text-white rounded hover:bg-red-700 text-xs",children:"Delete"})]},t.id))})]})]})]}):e.jsxs("div",{className:"glass-morphism rounded-xl p-8 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"âš ï¸"})}),e.jsx("p",{className:"text-gray-400",children:"Unable to load playstyle"})]})},ye=new O,Pe=()=>{const{intelligence:f,actions:a,games:d}=te(),[g,r]=u.useState("profile"),[b,v]=u.useState(null),[M,k]=u.useState(null),[G,p]=u.useState([]),[h,j]=u.useState([]),[E,w]=u.useState(null),[T,C]=u.useState(!0);ie();const{primaryMood:L,hasRecommendations:R}=le({games:d});u.useEffect(()=>{(()=>{const U=ye.initializeDefaultData();v(U.profile),k(U.preferences),w(U.playstyle),p(f.preferredGenres.map(S=>({id:S,name:S?S.charAt(0).toUpperCase()+S.slice(1):"Unknown",preference:75}))),j(f.preferredMoods.map(S=>({id:S,name:S?S.charAt(0).toUpperCase()+S.slice(1):"Unknown",emoji:"ðŸ˜Š",color:"#3b82f6",frequency:3,preference:75,associatedGenres:[]}))),C(!1)})()},[f.preferredGenres,f.preferredMoods]);const N=c=>{v(c)},P=c=>{k(c)},A=c=>{p(c),a.setPreferredGenres(c.map(U=>U.id))},t=c=>{j(c),a.setPreferredMoods(c.map(U=>U.id))},o=c=>{w(c),a.setPreferredSessionStyle(c.preferences.sessionLength)},n=[{id:"profile",label:"Profile",icon:"ðŸ‘¤"},{id:"preferences",label:"Preferences",icon:"âš™ï¸"},{id:"genres",label:"Genres",icon:"ðŸŽ­"},{id:"moods",label:"Moods",icon:"ðŸ˜Š"},{id:"playstyle",label:"Playstyle",icon:"ðŸŽ¯"}];return T?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gaming-dark via-gray-900 to-gaming-darker flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸ‘¤"})}),e.jsx("p",{className:"text-gray-400",children:"Loading your identity..."})]})}):e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gaming-dark via-gray-900 to-gaming-darker",children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("header",{className:"mb-16",children:e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold font-gaming bg-gradient-to-r from-gaming-primary to-gaming-accent to-gaming-secondary bg-clip-text text-transparent mb-2",children:"Gaming Identity"}),e.jsx("p",{className:"text-gray-300",children:"Your unified profile across all gaming platforms"}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 text-sm",children:[e.jsxs("a",{href:"/customisation",className:"flex items-center gap-2 px-3 py-2 bg-purple-500/20 hover:bg-purple-500/30 text-purple-300 rounded-lg transition-colors",children:[e.jsx("span",{children:"ðŸŽ¨"}),e.jsx("span",{children:"Customize Appearance"})]}),e.jsx("span",{className:"text-gray-500",children:"â€¢"}),e.jsx("span",{className:"text-gray-400",children:"Personalize themes, colors, and presets"})]}),R&&L&&e.jsx("div",{className:"mt-4 pt-4 border-t border-purple-500/30",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm text-gray-400",children:"Current Mood:"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ˜Š"}),e.jsx("span",{className:"text-white font-medium",children:L})]})]})})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:"0"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Achievements"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-400",children:"0"}),e.jsx("div",{className:"text-xs text-gray-400",children:"Snapshots"})]}),e.jsxs("button",{className:"px-4 py-2 bg-gradient-to-r from-yellow-600 to-orange-600 hover:from-yellow-700 hover:to-orange-700 text-white rounded-lg font-medium transition-all transform hover:scale-105 flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ†"}),"View Achievements"]})]})]})}),e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex flex-wrap gap-2 p-1 glass-morphism rounded-xl",children:n.map(c=>e.jsxs("button",{onClick:()=>r(c.id),className:`
                  flex items-center gap-2 px-4 py-2 rounded-lg font-medium transition-all duration-200
                  ${g===c.id?"bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white":"text-gray-400 hover:text-white hover:bg-gray-800/50"}
                `,children:[e.jsx("span",{children:c.icon}),e.jsx("span",{children:c.label})]},c.id))})}),e.jsxs("div",{className:"space-y-6",children:[g==="profile"&&e.jsx(ce,{onProfileUpdate:N}),g==="preferences"&&e.jsx(de,{onPreferencesUpdate:P}),g==="genres"&&e.jsx(me,{onGenresUpdate:A}),g==="moods"&&e.jsx(he,{onMoodsUpdate:t}),g==="playstyle"&&e.jsx(pe,{onPlaystyleUpdate:o})]}),e.jsxs("div",{className:"mt-12 glass-morphism rounded-xl p-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-white mb-4 flex items-center gap-3",children:[e.jsx("span",{children:"ðŸ“Š"}),"Identity Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-lg mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ‘¤"})}),e.jsx("h3",{className:"text-white font-medium mb-1",children:b?.displayName}),e.jsxs("p",{className:"text-sm text-gray-400",children:["@",b?.username]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-500 to-pink-600 rounded-lg mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸŽ­"})}),e.jsxs("h3",{className:"text-white font-medium mb-1",children:[G.length," Genres"]}),e.jsx("p",{className:"text-sm text-gray-400",children:G.length>0?G[0].name:"None selected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-blue-500 to-cyan-600 rounded-lg mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ˜Š"})}),e.jsxs("h3",{className:"text-white font-medium mb-1",children:[h.length," Moods"]}),e.jsx("p",{className:"text-sm text-gray-400",children:h.length>0?h[0].name:"None selected"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-green-500 to-teal-600 rounded-lg mx-auto mb-2 flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸŽ¯"})}),e.jsx("h3",{className:"text-white font-medium mb-1",children:E?.primary.name}),e.jsx("p",{className:"text-sm text-gray-400",children:E?.secondary?.name||"No secondary"})]})]}),e.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-gray-300",children:"Profile Completion"}),e.jsxs("span",{className:"text-sm text-white",children:[Math.round((b?.displayName?20:0)+(G.length>0?20:0)+(h.length>0?20:0)+(E?.primary?20:0)+(M?20:0)),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2",children:e.jsx("div",{className:"bg-gradient-to-r from-gaming-primary to-gaming-secondary h-2 rounded-full transition-all duration-500",style:{width:`${(b?.displayName?20:0)+(G.length>0?20:0)+(h.length>0?20:0)+(E?.primary?20:0)+(M?20:0)}%`}})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Complete your profile to get better recommendations and a more personalized experience."})]})]})]})})};export{Pe as Identity};
