const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/useLibraryStore-BvHGHpT8.js","assets/index-2zxZw9Mw.js","assets/index-DdnCAQik.css"])))=>i.map(i=>d[i]);
import{c as ye,d as be,p as ve,r as f,a as B,j as e,m as E,A as we,_ as je,u as Ne,b as Se,e as Pe}from"./index-2zxZw9Mw.js";import{u as X,a as ke,n as Ie}from"./useLibraryStore-BvHGHpT8.js";import{u as Ae}from"./profileStore-CgGiwr5x.js";import{u as ae}from"./usePersonaSnapshot-D4t0v41N.js";import"./useCurrentMood-DCnI8z6_.js";import{M as se}from"./masterMoods-YBYEbnnW.js";import{P as U}from"./platforms-F_h9JJJP.js";import{u as Me,p as Ge,g as Te}from"./gameImageUtils-GAIUb6EE.js";const Le=ye()(be(ve((a,s)=>({games:[],libraryLoading:!1,libraryError:null,integrations:{steam:{connected:!1},discord:{connected:!1},youtube:{connected:!1}},integrationLoading:!1,userPreferences:{theme:"dark",animations:!0,reducedMotion:!1,language:"en",notifications:{achievements:!0,friendActivity:!0,gameRecommendations:!0}},setGames:t=>a({games:t}),addGame:t=>a(n=>({games:[...n.games,t]})),updateGame:(t,n)=>a(r=>({games:r.games.map(i=>i.id===t?{...i,...n}:i)})),removeGame:t=>a(n=>({games:n.games.filter(r=>r.id!==t)})),setIntegrationStatus:(t,n)=>a(r=>({integrations:{...r.integrations,[t]:{...r.integrations[t],...n}}})),setSteamId:t=>a({currentSteamId:t}),updateUserPreferences:t=>a(n=>({userPreferences:{...n.userPreferences,...t}})),getGamesByStatus:t=>{const{games:n}=s();return n.filter(r=>r.playStatus===t)},getTotalPlaytime:()=>{const{games:t}=s();return t.reduce((n,r)=>n+(r.hoursPlayed||0),0)},getRecentlyPlayed:(t=5)=>{const{games:n}=s();return n.filter(r=>r.lastPlayed).sort((r,i)=>(i.lastPlayed?.getTime()||0)-(r.lastPlayed?.getTime()||0)).slice(0,t)}}),{name:"gamepilot-store",partialize:a=>({games:a.games,userPreferences:a.userPreferences,integrations:a.integrations,currentSteamId:a.currentSteamId})}),{name:"GamePilotStore"}));function Re(a,s){if(!a||typeof a!="number"||a<=0){console.warn("Invalid appId provided for game launch:",a);return}const t="steam";try{let n;switch(t){case"steam":n=`steam://run/${a}`;break;case"epic":n=`com.epicgames://launch/app/${a}`;break;case"xbox":n=`xbox://${a}`;break;case"playstation":n=`playstation://${a}`;break;default:n=`steam://run/${a}`;break}const r=document.createElement("div");switch(r.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50 transition-all duration-300",r.innerHTML=`
      <div class="flex items-center gap-2">
        <span class="text-2xl">ðŸŽ®</span>
        <span class="font-bold">Launching ${t} game...</span>
      </div>
    `,document.body.appendChild(r),setTimeout(()=>{document.body.contains(r)&&document.body.removeChild(r)},3e3),t){case"steam":typeof window<"u"&&window.steam?window.steam.openGame(a.toString()):window.location.href=n;break;case"epic":typeof window<"u"&&window.open?window.open(n,"_blank"):window.location.href=n;break;case"xbox":typeof window<"u"&&window.xbox?console.warn("Xbox launch not implemented"):window.location.href=`xbox://${a}`;break;case"playstation":typeof window<"u"&&window.playstation?console.warn("PlayStation launch not implemented"):window.location.href=`playstation://${a}`;break;default:window.location.href=n;break}}catch(n){console.error(`Failed to launch ${t} game:`,n);const r=`Failed to launch ${t} game. Please ensure ${t} is installed and available.`;typeof window<"u"?alert(r):console.error(r)}}class Fe{static AFFILIATES={humbleBundle:{name:"Humble Bundle",label:"Humble",commission:"5-10%",color:"from-orange-500 to-red-500",icon:"ðŸŽ",baseUrl:"https://www.humblebundle.com/store/search",placeholderUrl:"https://www.humblebundle.com/store"},fanatical:{name:"Fanatical",label:"Fanatical",commission:"3-8%",color:"from-purple-500 to-pink-500",icon:"ðŸŽ¯",baseUrl:"https://www.fanatical.com",placeholderUrl:"https://www.fanatical.com"},greenManGaming:{name:"Green Man Gaming",label:"GMG",commission:"2-6%",color:"from-green-500 to-teal-500",icon:"ðŸŒ¿",baseUrl:"https://www.greenmangaming.com",placeholderUrl:"https://www.greenmangaming.com"},gog:{name:"GOG",label:"GOG",commission:"5%",color:"from-blue-500 to-cyan-500",icon:"ðŸŽ®",baseUrl:"https://www.gog.com",placeholderUrl:"https://www.gog.com"},epic:{name:"Epic Games Store",label:"Epic",commission:"5%",color:"from-gray-500 to-gray-600",icon:"âš¡",baseUrl:"https://www.epicgames.com/store",placeholderUrl:"https://www.epicgames.com/store"}};static generateAffiliateLinks(s,t){const n=[];return n.push({store:"humbleBundle",label:this.AFFILIATES.humbleBundle.label,url:`${this.AFFILIATES.humbleBundle.baseUrl}?search=${encodeURIComponent(s)}`,commission:this.AFFILIATES.humbleBundle.commission,color:this.AFFILIATES.humbleBundle.color,icon:this.AFFILIATES.humbleBundle.icon}),n.push({store:"fanatical",label:this.AFFILIATES.fanatical.label,url:`${this.AFFILIATES.fanatical.baseUrl}/en/search?search=${encodeURIComponent(s)}`,commission:this.AFFILIATES.fanatical.commission,color:this.AFFILIATES.fanatical.color,icon:this.AFFILIATES.fanatical.icon}),n.push({store:"greenManGaming",label:this.AFFILIATES.greenManGaming.label,url:`${this.AFFILIATES.greenManGaming.baseUrl}/search?query=${encodeURIComponent(s)}`,commission:this.AFFILIATES.greenManGaming.commission,color:this.AFFILIATES.greenManGaming.color,icon:this.AFFILIATES.greenManGaming.icon}),n.push({store:"gog",label:this.AFFILIATES.gog.label,url:`${this.AFFILIATES.gog.baseUrl}/en/games?query=${encodeURIComponent(s)}`,commission:this.AFFILIATES.gog.commission,color:this.AFFILIATES.gog.color,icon:this.AFFILIATES.gog.icon}),n.push({store:"epic",label:this.AFFILIATES.epic.label,url:`${this.AFFILIATES.epic.baseUrl}/en-US/browse?q=${encodeURIComponent(s)}`,commission:this.AFFILIATES.epic.commission,color:this.AFFILIATES.epic.color,icon:this.AFFILIATES.epic.icon}),n}static getPurchaseOptions(s,t,n,r,i){return{steam:{url:`https://store.steampowered.com/app/${t}`,price:n,originalPrice:r,discountPercent:i},affiliates:this.generateAffiliateLinks(s,t)}}static hasAffiliateIds(){return!1}static getAffiliateStatusMessage(){return this.hasAffiliateIds()?"ðŸ’° Affiliate links active - earn commission on purchases!":"ðŸ”— Direct store links - sign up for affiliates to earn commission"}}class ne{static BASE_URL="https://store.steampowered.com/api";static async getGameDetails(s){try{console.log("ðŸ” Fetching Steam store data for app:",s);const t=await fetch(`/api/steam/store-details?appids=${s}`,{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)return console.warn("âŒ Backend proxy request failed:",t.status),null;const r=(await t.json())[s.toString()];return!r||!r.success?(console.warn("âŒ Steam API returned no data for app:",s),null):(console.log("âœ… Retrieved Steam store data for:",r.data.name),r.data)}catch(t){return console.error("âŒ Error fetching Steam store data:",t),null}}static async getMultipleGameDetails(s){const t=new Map;for(const n of s){const r=await this.getGameDetails(n);r&&t.set(n,r),await new Promise(i=>setTimeout(i,200))}return t}static async searchGames(s,t=20){try{return console.log("ðŸ” Steam search not fully supported, query:",s),[]}catch(n){return console.error("âŒ Error searching Steam games:",n),[]}}static steamGameToRecommendation(s,t,n,r,i){return{appId:s.appid,title:s.name,description:s.short_description,price:s.price_overview?.final||0,originalPrice:s.price_overview?.initial,discountPercent:s.price_overview?.discount_percent,headerImage:s.header_image,genres:s.genres?.map(l=>l.description)||[],platforms:Object.entries(s.platforms).filter(([l,m])=>m).map(([l,m])=>l),releaseDate:s.release_date?.date||"TBA",metacriticScore:s.metacritic?.score,recommendationCount:s.recommendations?.total,reasoning:t,alignmentScore:n,moodSuitability:r,estimatedPlaytime:i,affiliateLinks:[]}}static async getPurchaseRecommendations(s,t=[],n=[],r=50,i=10){try{console.log("ðŸ›’ Generating purchase recommendations...");const l=[1174180,1426210,1245620,1817070,1085660,359550,730,578080,236390,440],m=await this.getMultipleGameDetails(l.slice(0,i)),g=[];for(const[o,d]of m){if(s.some(v=>v.appId===o||v.title.toLowerCase()===d.name.toLowerCase())||!d.price_overview||d.price_overview.final===0||d.price_overview.final>r*100)continue;const p=this.generatePurchaseReasoning(d,t,n),x=this.calculateAlignmentScore(d,t,n),I=this.determineMoodSuitability(d),M=this.estimatePlaytime(d);if(x>.3){const v=this.steamGameToRecommendation(d,p,x,I,M);v.affiliateLinks=Fe.generateAffiliateLinks(d.name,d.appid),g.push(v)}}return g.sort((o,d)=>d.alignmentScore-o.alignmentScore).slice(0,i)}catch(l){return console.error("âŒ Error generating purchase recommendations:",l),[]}}static generatePurchaseReasoning(s,t,n){const r=[],i=s.genres?.map(m=>m.description.toLowerCase())||[],l=t.filter(m=>i.some(g=>g.includes(m.toLowerCase())));if(l.length>0&&r.push(`Matches your love for ${l.join(", ")} games`),s.price_overview?.discount_percent&&s.price_overview.discount_percent>0&&r.push(`Currently ${s.price_overview.discount_percent}% off`),s.metacritic?.score&&s.metacritic.score>80&&r.push(`Critically acclaimed with ${s.metacritic.score}/100 Metacritic score`),s.recommendations?.total&&s.recommendations.total>1e4){const m=Math.floor(s.recommendations.total/1e3);r.push(`Loved by ${m}k+ Steam users`)}return r.length===0&&r.push("Highly rated game with great potential"),r.join(". ")}static calculateAlignmentScore(s,t,n){let r=.5;const i=s.genres?.map(m=>m.description.toLowerCase())||[],l=t.filter(m=>i.some(g=>g.includes(m.toLowerCase())));return r+=l.length/t.length*.4,s.metacritic?.score&&(r+=Math.min(s.metacritic.score/1e3,.1)),s.recommendations?.total&&(r+=Math.min(s.recommendations.total/1e6,.1)),Math.min(r,1)}static estimatePlaytime(s){const t=s.genres?.map(n=>n.description.toLowerCase())||[];return t.some(n=>n.includes("rpg")||n.includes("strategy"))?"20-40 hours":t.some(n=>n.includes("action")||n.includes("adventure"))?"8-15 hours":t.some(n=>n.includes("puzzle")||n.includes("casual"))?"2-8 hours":"5-20 hours"}static async getRecentlyPlayedSteamGames(s){try{console.log("ðŸ• Fetching recently played Steam games for user");const t=await fetch("/api/steam/recently-played",{method:"GET",headers:{"Content-Type":"application/json"},credentials:"include"});if(!t.ok)return console.warn("âŒ Failed to fetch recently played Steam games:",t.status),[];const n=await t.json();return console.log(`âœ… Retrieved ${n.games?.length||0} recently played Steam games`),n.games||[]}catch(t){return console.error("âŒ Error fetching recently played Steam games:",t),[]}}}const Ce=a=>{const s=a.moodAffinity||{},n=Object.entries(s).sort(([,g],[,o])=>o-g).slice(0,5).map(([g])=>g.toLowerCase()),r=a.averageSessionLengthMinutes||75;let i="medium";r<45?i="short":r>90&&(i="long");const l=[];a.lateNightRatio>.3&&l.push("late-night"),a.multiplayerRatio>.5&&l.push("afternoon","evening"),l.length===0&&l.push("evening");const m=[];return a.completionRate>.7&&m.push("completionist"),a.multiplayerRatio>.5&&m.push("social"),a.lateNightRatio>.3&&m.push("night_owl"),{dominantMoods:n,preferredSessionLength:i,preferredTimesOfDay:l,recentPlayPatterns:m,moodAffinity:s,averageSessionLengthMinutes:r,lateNightRatio:a.lateNightRatio||0,completionRate:a.completionRate||0,multiplayerRatio:a.multiplayerRatio||0}};function $e(){const[a,s]=f.useState(null),[t,n]=f.useState(!1);return f.useEffect(()=>{const i=B.getCurrentPersona();s(i);const l=setInterval(()=>{const m=B.getCurrentPersona();JSON.stringify(m)!==JSON.stringify(a)&&s(m)},1e3);return n(!0),()=>{clearInterval(l),n(!1)}},[]),{persona:a,isListening:t,refreshPersona:async()=>{try{const i=B.getCurrentPersona();s(i)}catch(i){console.error("Failed to refresh persona:",i)}},isPersonaInitialized:B.isPersonaInitialized()}}function Ee(a){return!a||a.length===0?_e:a.map(s=>({id:s.id,name:s.title,coverImage:s.coverImage,steamUrl:s.appId?`https://store.steampowered.com/app/${s.appId}`:"",price:"Owned",genres:s.genres?.map(t=>t.name)||[],moodTags:s.moods||[],difficulty:"Normal",playstyleTags:s.tags||[],narrativeStyle:"medium",sessionSuitability:"flexible"}))}const _e=[{id:"bg3",name:"Baldur's Gate 3",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/1086940/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/1086940",price:"$59.99",genres:["RPG","Adventure","Strategy"],moodTags:["immersive","strategic","social","creative"],difficulty:"Normal",playstyleTags:["story-driven","strategic","social"],narrativeStyle:"deep",sessionSuitability:"long"},{id:"cyberpunk",name:"Cyberpunk 2077",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/1091500/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/1091500",price:"$29.99",genres:["RPG","Action","Open World"],moodTags:["energetic","immersive","competitive","creative"],difficulty:"Normal",playstyleTags:["explorer","competitive","story-driven"],narrativeStyle:"deep",sessionSuitability:"medium"},{id:"stardew",name:"Stardew Valley",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/413150/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/413150",price:"$14.99",genres:["Simulation","RPG","Farming"],moodTags:["chill","creative","social","relaxed"],difficulty:"Relaxed",playstyleTags:["casual","creative","social"],narrativeStyle:"light",sessionSuitability:"short"},{id:"hades",name:"Hades",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/1145360/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/1145360",price:"$24.99",genres:["Roguelike","Action","Indie"],moodTags:["energetic","competitive","focused","challenging"],difficulty:"Hard",playstyleTags:["competitive","achiever","focused"],narrativeStyle:"moderate",sessionSuitability:"short"},{id:"disco",name:"Disco Elysium",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/646920/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/646920",price:"$19.99",genres:["RPG","Indie","Turn-Based"],moodTags:["creative","immersive","thoughtful","relaxed"],difficulty:"Normal",playstyleTags:["story-driven","explorer","creative"],narrativeStyle:"deep",sessionSuitability:"medium"},{id:"vampire",name:"Vampire Survivors",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/1794680/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/1794680",price:"$4.99",genres:["Action","Roguelike","Survival"],moodTags:["energetic","competitive","focused","addictive"],difficulty:"Normal",playstyleTags:["competitive","achiever","focused"],narrativeStyle:"minimal",sessionSuitability:"short"},{id:"elden",name:"Elden Ring",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/1245620/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/1245620",price:"$59.99",genres:["RPG","Action","Open World"],moodTags:["challenging","immersive","focused","competitive"],difficulty:"Brutal",playstyleTags:["explorer","achiever","competitive"],narrativeStyle:"moderate",sessionSuitability:"long"},{id:"hollow",name:"Hollow Knight",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/367520/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/367520",price:"$14.99",genres:["Metroidvania","Action","Indie"],moodTags:["challenging","focused","immersive","exploratory"],difficulty:"Hard",playstyleTags:["explorer","achiever","focused"],narrativeStyle:"light",sessionSuitability:"medium"},{id:"slay",name:"Slay the Spire",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/646570/library_600x900.jpg",steamUrl:"https://store.steampowered.com/app/646570",price:"$16.99",genres:["Roguelike","Strategy","Card Game"],moodTags:["strategic","thoughtful","competitive","challenging"],difficulty:"Hard",playstyleTags:["strategic","competitive","focused"],narrativeStyle:"minimal",sessionSuitability:"short"},{id:"minecraft",name:"Minecraft",coverImage:"https://cdn.akamai.steamstatic.com/steam/apps/239140/library_600x900.jpg",steamUrl:"https://www.minecraft.net",price:"$29.99",genres:["Sandbox","Survival","Creative"],moodTags:["creative","relaxed","social","exploratory"],difficulty:"Relaxed",playstyleTags:["creative","explorer","social","casual"],narrativeStyle:"minimal",sessionSuitability:"flexible"}];function De(a){return{playtimeByGenre:{},averageSessionLengthMinutes:60,sessionsPerWeek:3,difficultyPreference:"Normal",multiplayerRatio:.4,lateNightRatio:.2,completionRate:.5}}function Ue(a,s=[],t,n=0){const r=Ee(s);if(!a)return{game:r[Math.floor(Math.random()*Math.min(3,r.length))],explanation:"Based on general trends and popularity",score:50};const i=De(),l=r.map(d=>{let h=0;const p=[],x=Oe(d.genres,i.playtimeByGenre);h+=x.points,x.points>0&&p.push(x.reason);const I=ze(d.moodTags,i);h+=I.points,I.points>0&&p.push(I.reason);const M=Be(d.playstyleTags,a.traits.archetypeId);h+=M.points,M.points>0&&p.push(M.reason);const v=He(d.difficulty,i.difficultyPreference);h+=v.points,v.points>0&&p.push(v.reason);const T=We(d.sessionSuitability,i.averageSessionLengthMinutes);return h+=T.points,T.points>0&&p.push(T.reason),{...d,score:h,reasons:p}});l.sort((d,h)=>h.score-d.score);const m=Math.min(n,l.length-1),g=l[m];if(!g||g.score===0){const d=n%r.length;return{game:r[d],explanation:"Based on general trends and popularity",score:50}}const o=g.reasons.length>0?g.reasons.slice(0,3).join(" â€¢ "):"This game matches your gaming preferences";return{game:{id:g.id,name:g.name,coverImage:g.coverImage,steamUrl:g.steamUrl,price:g.price,genres:g.genres,moodTags:g.moodTags,difficulty:g.difficulty,playstyleTags:g.playstyleTags,narrativeStyle:g.narrativeStyle,sessionSuitability:g.sessionSuitability},explanation:o,score:g.score}}function Oe(a,s){let t=0,n="";return a.forEach(r=>{if(!r)return;const i=r.toLowerCase();if(s[i]){const l=s[i];l>50?(t+=30,n=r):l>20?(t+=20,n=r):l>5&&(t+=10,n=r)}}),{points:t,reason:t>0?`You love ${n} games`:""}}function ze(a,s){let t=0,n="";return a.includes("energetic")&&s.sessionsPerWeek>5&&(t+=15,n="Matches your energetic gaming style"),a.includes("relaxed")&&s.sessionsPerWeek<=3&&(t+=15,n="Perfect for your relaxed gaming pace"),a.includes("focused")&&s.averageSessionLengthMinutes>90&&(t+=10,n="Great for your focused gaming sessions"),a.includes("social")&&s.multiplayerRatio>.5&&(t+=10,n="Matches your social gaming preferences"),{points:t,reason:n}}function Be(a,s){let t=0,n="";return s==="Specialist"&&a.includes("achiever")&&(t+=20,n="Perfect for your achievement-oriented playstyle"),s==="Socialite"&&a.includes("social")&&(t+=20,n="Great for your social gaming preferences"),s==="Casual"&&a.includes("casual")&&(t+=15,n="Matches your casual gaming style"),{points:t,reason:n}}function He(a,s){const t=["Relaxed","Normal","Hard","Brutal"],n=t.indexOf(a),r=t.indexOf(s),i=Math.abs(n-r);return i===0?{points:15,reason:"Perfect difficulty match for your skill level"}:i===1?{points:8,reason:"Good difficulty match for you"}:{points:0,reason:""}}function We(a,s){let t=0,n="";return a==="short"&&s<=60?(t=10,n="Perfect for your quick gaming sessions"):a==="medium"&&s>60&&s<=120?(t=10,n="Great for your medium gaming sessions"):a==="long"&&s>120?(t=10,n="Perfect for your long gaming sessions"):a==="flexible"&&(t=5,n="Flexible gaming that fits your schedule"),{points:t,reason:n}}function Ye(){const a=ae(),{games:s}=X(),[t,n]=f.useState(0);return f.useEffect(()=>{const i=()=>{n(m=>m+1)};return window.addEventListener("persona-refreshed",i),localStorage.getItem("persona_refresh_key")&&(i(),localStorage.removeItem("persona_refresh_key")),()=>{window.removeEventListener("persona-refreshed",i)}},[]),f.useMemo(()=>{try{const i=Ue(a,s||[],void 0,t);if(t>0){const l=t%10;if(i&&Math.random()>.3)return{...i,explanation:`${i.explanation} â€¢ Fresh recommendation #${t}`,score:Math.min(i.score+(Math.random()*10-5),100)}}return i}catch(i){return console.error("Failed to generate persona recommendation:",i),null}},[a,t])}async function qe(a){const{masterMood:s,timeAvailable:t,preferredGenre:n,games:r}=a;if(!r||!Array.isArray(r))return[];const i=(n||"all").toLowerCase(),l=String(t||"medium").toLowerCase(),g=(await Promise.all(r.map(async c=>{if(!c)return null;let A=[];const k=c.genres||c.tags||[];Array.isArray(k)&&(A=k.map(N=>{if(!N)return"";const O=typeof N=="string"?N:N.name||N.id||N.description||"";return String(O).toLowerCase()}).filter(Boolean));let G=[];c.moods&&Array.isArray(c.moods)&&c.moods.length>0?G=c.moods.map(N=>String(N||"").toLowerCase()):G=await ke(c);const C={adrenaline:["intense","competitive","high-energy","action-packed"],"brain-power":["strategic","puzzle","thinking","tactical"],zen:["relaxing","cozy","atmospheric","wholesome"],story:["narrative","story-rich","immersive","adventure"],social:["multiplayer","cooperative","party","team-based"],creative:["building","crafting","sandbox","artistic"],nostalgic:["retro","classic","remastered","throwback"]},_=String(s||"").toLowerCase().trim(),ie=(C[s]||[]).map(N=>String(N).toLowerCase().trim()),J=[_,...ie],D=G.some(N=>{const O=String(N||"").toLowerCase().trim().replace(/\s+/g,"-").replace(/_+/g,"-");return J.includes(O)})||_==="scary"&&A.includes("horror");c.title&&c.title.includes("Stronghold")&&console.log("ðŸ” DEBUG Stronghold Moods:",{gameTitle:c.title,rawMoods:c.moods,refinedMoods:G,masterMood:s,allowedSubMoods:J,hasMoodMatch:D});const Q=i==="all"||A.some(N=>N===i||i===N);let W=1;if(t==="short"){const N=["puzzle","casual","indie","hidden object","match-3"];W=A.some(K=>N.includes(K))?1.2:.8}else if(t==="long"){const N=["rpg","strategy","adventure","simulation","mmorpg"];W=A.some(K=>N.includes(K))?1.2:.8}const oe=D?.55:.05,le=Q?.12:.04,ce=W*.12,z=Number(c.hoursPlayed??c.totalPlaytime??0)||0,Z=String(c.playStatus||"").toLowerCase(),ee=z===0||Z==="unplayed",de=ee?.12:Z==="backlog"?.06:0,me=z>20?.1:z>5?.06:z>0?.03:0,te=c.lastPlayed,Y=te?new Date(te):null,q=Y&&!isNaN(Y.getTime())?(Date.now()-Y.getTime())/(1e3*60*60*24):null,ge=q!==null&&l==="short"?q<=7?.06:q<=30?.03:0:0,V=G.map(N=>String(N).toLowerCase()),he=V.length>0&&V.every(N=>["experimental","creative","relaxing","strategic","high-energy"].includes(N)),ue=V.includes("experimental")&&!D?-.05:0,pe=G.length>4?-.1:0,xe=he&&!D?-.08:0,fe=oe+le+ce+de+me+ge+ue+pe+xe;return{game:c,score:fe,reasoning:D?`Perfect for your ${s} mood.`:ee?"A new pick that still fits your vibe.":"A solid match for your session.",moodMatch:D?1:0,genreMatch:Q?1:0,timeScore:1}}))).filter(c=>c!==null).filter(c=>c.moodMatch>0),o=g.sort((c,A)=>A.score-c.score).slice(0,60),d="gp_recent_picks",h=()=>{try{const c=localStorage.getItem(d);return c?JSON.parse(c):[]}catch{return[]}},p=c=>{try{const A=h(),k=[c,...A.filter(G=>G!==c)].slice(0,5);localStorage.setItem(d,JSON.stringify(k))}catch{}},x=h(),I=`gp_last_perfect_play_${String(s||"any")}_${l}`,M=(()=>{try{return localStorage.getItem(I)||""}catch{return""}})(),v=[...o],T=v.find(c=>String(c.game?.id||"")!==M&&!x.includes(String(c.game?.id||"")))||v[0],F=new Set,$=new Set,y=new Set,R=c=>{const A=String(c.game?.title||"").toLowerCase(),k=String(c.game?.genres?.[0]?.name||c.game?.genres?.[0]||"").toLowerCase(),C=(Array.isArray(c.game?.moods)?c.game.moods:[]).slice(0,2).map(_=>String(_).toLowerCase()).sort().join("|");return!A||F.has(A)||k&&$.has(k)||C&&y.has(C)?!1:(F.add(A),k&&$.add(k),C&&y.add(C),!0)},j=[];T&&R(T)&&j.push(T);const w=5-Math.max(1,Math.round(5*(l==="short"?.3:l==="long"?.45:.38))),S=v.slice(0,25),P=v.slice(25);for(const c of S){if(j.length>=w)break;String(c.game?.id||"")!==String(T?.game?.id||"")&&String(c.game?.id||"")!==M&&(x.includes(String(c.game?.id||""))||R(c)&&j.push(c))}for(const c of P){if(j.length>=5)break;String(c.game?.id||"")!==M&&(x.includes(String(c.game?.id||""))||R(c)&&j.push(c))}for(;j.length<5&&v.length>0;){const c=v[j.length]||v[v.length-1];if(c&&String(c.game?.id||"")!==M&&!x.includes(String(c.game?.id||""))&&R(c))j.push(c);else break}const L=j.slice(0,5);try{L[0]?.game?.id&&(localStorage.setItem(I,String(L[0].game.id)),p(String(L[0].game.id)))}catch{}return console.log("ðŸ” DEBUG Top Recommendations:",{masterMood:s,totalResults:g.length,top3:L.slice(0,3).map(c=>({title:c.game.title,score:c.score,moodMatch:c.moodMatch,genreMatch:c.genreMatch,moodCount:c.game.moods?.length||0}))}),L}function Ve(a){const s=a.appId||a.launcherId;if(!s){H("No game ID set (appId or launcherId)");return}if(!a.platforms||a.platforms.length===0){H("No platforms configured");return}const t=a.platforms[0],n=Ke(t.code,String(s));n?(H(`Launching ${a.title} on ${t.name}...`),window.location.href=n):H(`Unsupported platform: ${t.name}`)}function Ke(a,s){switch(a){case U.STEAM:return`steam://rungameid/${s}`;case U.EPIC:return`com.epicgames.launcher://apps/${s}?action=launch`;case U.GOG:return`goggalaxy://openGame/${s}`;case U.XBOX:return`xbox://launch/${s}`;case U.PLAYSTATION:return`psn://launch/${s}`;case U.NINTENDO:return`nintendo://launch/${s}`;default:return console.warn(`Unsupported platform for launching: ${a}`),null}}const H=a=>{console.log(" Game Launcher:",a);const s=document.createElement("div");s.textContent=a,s.style.cssText=`
    position: fixed;
    top: 20px;
    right: 20px;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 12px 20px;
    border-radius: 8px;
    font-weight: bold;
    font-size: 14px;
    z-index: 9999;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    animation: slideIn 0.3s ease-out;
  `;const t=document.createElement("style");t.textContent=`
    @keyframes slideIn {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }
  `,document.head.appendChild(t),document.body.appendChild(s),setTimeout(()=>{s.style.animation="slideIn 0.3s ease-out reverse",setTimeout(()=>{document.body.contains(s)&&document.body.removeChild(s)},300)},3e3)},Xe=()=>({showSuccess:a=>console.log("Success:",a),showError:a=>console.log("Error:",a),showInfo:a=>console.log("Info:",a)}),Je=()=>{const{games:a,actions:s}=X(),{showSuccess:t,showError:n}=Xe(),[r,i]=f.useState("adrenaline"),[l,m]=f.useState("medium"),[g,o]=f.useState(!1),[d,h]=f.useState(!1),[p,x]=f.useState(null),[I,M]=f.useState([]),[v,T]=f.useState([]);f.useEffect(()=>{(async()=>{if(!a||a.length===0){T([]);return}const{normalizeGamesArray:R}=await je(async()=>{const{normalizeGamesArray:u}=await import("./useLibraryStore-BvHGHpT8.js").then(b=>b.d);return{normalizeGamesArray:u}},__vite__mapDeps([0,1,2])),j=R(a||[]);T(j)})()},[a]),f.useEffect(()=>{console.log("ðŸŽ¯ Grid Verification:",{total:v.length,masterMoods:se.length})},[v]);const F=async()=>{if(!v.length){n("No games available in your library");return}o(!0),h(!1);try{console.log("ðŸ” Starting recommendation analysis...");const y=await qe({masterMood:r,timeAvailable:l,preferredGenre:"all",games:v});if(console.log("ðŸ” Recommendation results:",y.length,"games found"),y&&y.length>0){const j=[...y].sort(()=>Math.random()-.5).slice(0,3),u=j[0];M(j),x(u),h(!0),t("Perfect match found!"),console.log("ðŸŽ¯ Selected recommendation:",u.game.title)}else n("No games match your criteria")}catch(y){console.error("Recommendation failed:",y),n("Failed to generate recommendations")}finally{o(!1)}},$=()=>{if(I.length>1){const j=[...I.filter(u=>u!==p)].sort(()=>Math.random()-.5)[0];x(j||I[0])}else F()};return e.jsxs("div",{className:"min-h-screen bg-gaming-dark text-white p-8",children:[e.jsxs(E.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-12",children:[e.jsx(E.h1,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-5xl font-black text-white mb-4 tracking-tighter",children:"ðŸŽ¯ FIND YOUR PERFECT PLAY"}),e.jsxs("p",{className:"text-gray-400 text-lg",children:["Neural analysis of your ",v.length," games."]})]}),e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"space-y-12",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 font-bold text-sm uppercase tracking-widest mb-6",children:"1. Pick Your Vibe"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-3",children:se.map(y=>e.jsxs("button",{onClick:()=>i(y.id),className:`p-4 rounded-xl font-black text-sm transition-all flex flex-col items-center justify-center min-h-[80px] ${r===y.id?"bg-gradient-to-br from-gaming-primary to-gaming-secondary text-white shadow-2xl border-2 border-gaming-primary/50 transform scale-105":"bg-gray-900/40 border-gray-800 hover:border-white/20 hover:bg-white/10 hover:text-black"}`,children:[e.jsx("span",{className:"text-2xl mb-1",children:y.emoji}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-tighter leading-tight",children:y.name})]},y.id))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-gray-500 font-bold text-sm uppercase tracking-widest mb-6",children:"2. How Much Time?"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:[{id:"short",name:"Quick",time:"15-30 min",emoji:"âš¡"},{id:"medium",name:"Session",time:"1-2 hours",emoji:"ðŸŽ®"},{id:"long",name:"Deep Dive",time:"3+ hours",emoji:"ðŸŒ™"}].map(y=>e.jsxs("button",{onClick:()=>m(y.id),className:`p-4 rounded-xl font-black text-sm transition-all flex flex-col items-center justify-center ${l===y.id?"bg-gradient-to-br from-gaming-primary to-gaming-secondary text-white shadow-2xl border-2 border-gaming-primary/50 transform scale-105":"bg-gray-900/40 border-gray-800 hover:border-white/20 hover:bg-white/10 hover:text-black"}`,children:[e.jsx("span",{className:"text-2xl mb-1",children:y.emoji}),e.jsx("span",{className:"text-[10px] font-black uppercase tracking-tighter",children:y.name}),e.jsx("span",{className:"text-[8px] text-gray-400 mt-1",children:y.time})]},y.id))})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx("button",{onClick:F,disabled:g||v.length===0,className:"px-12 py-6 bg-gradient-to-r from-gaming-primary to-gaming-accent text-white font-black text-xl rounded-2xl shadow-2xl hover:brightness-110 active:scale-95 transition-all disabled:opacity-30 uppercase tracking-tighter",children:g?"Analyzing Neural Patterns...":"Generate Top Pick"})})]})}),e.jsx(we,{mode:"wait",children:d&&p&&e.jsxs(E.div,{initial:{opacity:0,scale:.9,y:30},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},className:"mt-16 bg-gradient-to-br from-gray-900 to-black border-2 border-gaming-primary/50 rounded-[2.5rem] p-10 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gaming-primary/10 rounded-full blur-3xl group-hover:scale-150 transition-transform"}),e.jsx("div",{className:"absolute bottom-0 left-0 w-40 h-40 bg-gaming-accent/10 rounded-full blur-3xl group-hover:scale-150 transition-transform"}),e.jsx("div",{className:"relative z-10",children:e.jsxs("div",{className:"flex items-start gap-8",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-32 h-40 bg-gradient-to-br from-gaming-primary/20 to-gaming-accent/20 rounded-xl overflow-hidden border-2 border-gaming-primary/30",children:p.game.coverImage?e.jsx("img",{src:p.game.coverImage,alt:p.game.title,className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center text-4xl",children:"ðŸŽ®"})})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:"text-3xl font-black mb-2 bg-gradient-to-r from-gaming-primary to-gaming-accent bg-clip-text text-transparent",children:p.game.title}),e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("span",{className:"px-3 py-1 bg-gaming-primary/20 border border-gaming-primary/50 rounded-full text-xs font-black uppercase",children:r}),e.jsx("span",{className:"px-3 py-1 bg-gaming-accent/20 border border-gaming-accent/50 rounded-full text-xs font-black uppercase",children:l}),e.jsxs("span",{className:"text-gaming-primary font-black",children:["Score: ",Math.round(p.score*100),"%"]})]}),e.jsx("p",{className:"text-gray-300 mb-6",children:p.reasoning}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[p.game.genres&&p.game.genres.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Genres"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:p.game.genres.slice(0,3).map((y,R)=>{let j="Unknown";return typeof y=="string"?j=y:y?.name?j=y.name:y?.id&&(j=y.id),e.jsx("span",{className:"text-xs bg-gray-800 px-2 py-1 rounded",children:j},R)})})]}),p.game.moods&&p.game.moods.length>0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-gray-500 text-xs uppercase",children:"Moods"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:p.game.moods.slice(0,3).map((y,R)=>e.jsx("span",{className:"text-xs bg-gray-800 px-2 py-1 rounded",children:y},R))})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx("button",{onClick:()=>Ve(p.game),className:"px-6 py-3 bg-gaming-primary text-white font-black rounded-xl hover:brightness-110 transition-all",children:"ðŸŽ® Play Now"}),I.length>1&&e.jsx("button",{onClick:$,className:"px-6 py-3 bg-gray-800 text-white font-black rounded-xl hover:bg-gray-700 transition-all",children:"ðŸ”„ Get Different"})]})]})]})})]})})]})},Qe=a=>{if(a.length===0)return null;const s=Date.now(),t=a.map(i=>{let l=1;if(i.lastLocalPlayedAt){const o=(s-new Date(i.lastLocalPlayedAt).getTime())/864e5;l+=o*2}const m=i.localSessionCount||0;m===0?l+=10:m<5&&(l+=5);const g=i.hoursPlayed||0;return g>1&&g<20&&i.playStatus!=="completed"&&(l+=3),{game:i,weight:l}}),n=t.reduce((i,l)=>i+l.weight,0);let r=Math.random()*n;for(const{game:i,weight:l}of t)if(r-=l,r<=0)return i;return t[0].game};function re({src:a,alt:s,className:t="",onLoad:n,onError:r}){const[i,l]=f.useState(!1),[m,g]=f.useState(!1),[o,d]=f.useState(!1),h=f.useRef(null),{observe:p,unobserve:x}=Me(v=>{v.forEach(T=>{T.isIntersecting&&(g(!0),h.current&&x(h.current))})},{threshold:.1,rootMargin:"50px"});f.useEffect(()=>(h.current&&p(h.current),()=>{h.current&&x(h.current)}),[p,x]);const I=()=>{l(!0),n?.()},M=()=>{d(!0),r?.()};return f.useEffect(()=>{m&&!o&&Ge(a).then(I).catch(M)},[m,a,o]),e.jsxs("div",{ref:h,className:`relative aspect-square overflow-hidden ${t}`,children:[e.jsxs("div",{className:`
          absolute inset-0 bg-gradient-to-br from-gray-800 via-gray-900 to-black 
          flex items-center justify-center transition-all duration-500
          ${i?"opacity-0 scale-95":"opacity-100 scale-100"}
        `,children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"text-4xl text-gray-600",children:"ðŸŽ®"}),e.jsx("div",{className:"absolute inset-0 blur-lg bg-gaming-primary/10 scale-150"})]}),e.jsx("div",{className:"absolute bottom-2 left-0 right-0 flex justify-center",children:e.jsx("div",{className:"w-8 h-1 bg-gray-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full w-3/5 bg-gradient-to-r from-gaming-primary to-gaming-secondary rounded-full"})})})]}),m&&!o&&e.jsx("img",{src:a,alt:s,className:`
            absolute inset-0 w-full h-full object-center transition-opacity duration-500
            ${i?"opacity-100":"opacity-0"}
          `,onLoad:()=>l(!0),onError:()=>d(!0),loading:"lazy",decoding:"async",sizes:"(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw",style:{imageRendering:"auto",WebkitFontSmoothing:"antialiased",MozOsxFontSmoothing:"grayscale",backfaceVisibility:"hidden",transform:"translateZ(0)",willChange:"opacity"}}),o&&e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-red-900/30 via-red-800/20 to-red-900/30 flex flex-col items-center justify-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"text-3xl text-red-500",children:"ðŸš«"}),e.jsx("div",{className:"absolute inset-0 blur-lg bg-red-500/10 scale-150"})]}),e.jsx("span",{className:"text-xs text-red-400 mt-2 font-medium",children:"Failed to load"})]}),i&&!o&&e.jsxs("div",{className:"absolute inset-0 opacity-0 hover:opacity-100 transition-opacity duration-300 pointer-events-none",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-transparent via-white/5 to-transparent"})]})]})}const Ze=({games:a,onLaunchGame:s})=>{const[t,n]=f.useState(null),[r,i]=f.useState(!1),l=()=>{i(!0),n(null),setTimeout(()=>{const o=Qe(a);n(o),i(!1)},800)},m=()=>{t&&(t.appId?s(t.appId.toString()):console.warn("No appId found for game:",t.title))},g=()=>{l()};return e.jsxs("section",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸŽ²"}),"Surprise Me"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[a.length," games available"]})]}),t?e.jsx("div",{className:"glass-morphism rounded-xl overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-32 h-32 flex-shrink-0 overflow-hidden rounded-md bg-gradient-to-br from-gaming-primary/20 to-gaming-secondary/20",children:t.coverImage?e.jsx(re,{src:t.coverImage,alt:t.title,className:"w-full h-full"}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx("div",{className:"text-3xl text-gray-500",children:"ðŸŽ®"})})}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:t.title}),t.genres&&t.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.genres.slice(0,3).map(o=>e.jsx("span",{className:"px-2 py-1 bg-gaming-accent/20 rounded text-xs text-gaming-accent",children:o.name},o.id))}),e.jsxs("div",{className:"space-y-2 mb-6 text-gray-300",children:[t.hoursPlayed&&e.jsxs("p",{children:["â±ï¸ ",Math.floor(t.hoursPlayed),"h played"]}),t.localSessionCount&&e.jsxs("p",{children:["ðŸŽ® ",t.localSessionCount," sessions"]}),t.playStatus&&e.jsxs("p",{children:["ðŸ“Š Status: ",t.playStatus]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:m,className:"px-6 py-3 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg font-semibold hover:opacity-90 transition-all",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"â–¶ï¸"}),"Play Now"]})}),e.jsx("button",{onClick:g,className:"px-6 py-3 bg-gray-700 text-white rounded-lg font-semibold hover:bg-gray-600 transition-all",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŽ²"}),"Spin Again"]})})]})]})]})}):e.jsxs("div",{className:"glass-morphism rounded-xl p-12 text-center",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"ðŸŽ¯"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Can't decide what to play?"}),e.jsx("p",{className:"text-gray-300",children:"Let us pick the perfect game from your library based on your play history and preferences."})]}),e.jsx("button",{onClick:l,disabled:r||a.length===0,className:"px-8 py-4 bg-gradient-to-r from-gaming-primary to-gaming-secondary text-white rounded-lg font-semibold text-lg hover:opacity-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:r?e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"animate-spin",children:"ðŸŽ²"}),"Picking your game..."]}):e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸŽ²"}),"Surprise Me"]})}),a.length===0&&e.jsx("p",{className:"text-sm text-gray-400 mt-4",children:"Import some games first to get surprised!"})]})]})},et=a=>{const s=Date.now();if(!a.lastPlayed)return 1e3;const n=(a.lastPlayed instanceof Date?a.lastPlayed:new Date(a.lastPlayed)).getTime(),r=(s-n)/(1e3*60*60*24);if(r<7)return 0;if(r<14)return .1;const i=a.hoursPlayed||a.totalPlaytime||0,l=Math.min(r/30,10),m=Math.max(1-i/100,.1),g=a.localSessionCount||1,o=i>0?Math.max(1-g/i,.2):1,d=a.addedAt?.getTime()||n,p=(s-d)/(1e3*60*60*24)<30?.3:1,x=a.isFavorite?.5:1,I=l*m*o*p*x;return Math.max(.1,Math.min(I,50))},tt=({games:a,onLaunchGame:s})=>{const[t,n]=f.useState(0),r=f.useMemo(()=>a.length?a.map(d=>({...d,neglectScore:et(d)})).filter(d=>d.neglectScore>0).sort((d,h)=>h.neglectScore-d.neglectScore).slice(0,10):[],[a]),i=r[t],l=()=>{i?s(i):console.warn("No game found for play now action")},m=()=>{r.length>1&&n(o=>(o+1)%r.length)},g=o=>{const d=Date.now(),h=o.lastPlayed?.getTime()||0,p=Math.floor((d-h)/(1e3*60*60*24));if(p>365)return`Over ${Math.floor(p/365)} years since you played`;if(p>180)return"Over 6 months since you played";if(p>90)return"Over 3 months since you played";if(p>30)return`Over ${Math.floor(p/30)} months since you played`;if(p>14)return"A couple weeks since you played";if(p>7)return"Over a week since you played";const x=o.hoursPlayed||o.totalPlaytime||0;return x>50?"You loved this game - time for a reunion!":x>20?"A game you enjoyed - worth revisiting":o.isFavorite?"One of your favorites - let's play again":"It's been a while - time to rediscover this gem"};return r.length?e.jsxs("section",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ•°ï¸"}),"Rediscover Forgotten Games"]}),e.jsxs("div",{className:"text-sm text-gray-400",children:[r.length," games waiting"]})]}),e.jsx("div",{className:"glass-morphism rounded-xl overflow-hidden",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsx("div",{className:"w-32 h-32 flex-shrink-0 overflow-hidden rounded-md bg-gradient-to-br from-orange-500/20 to-red-500/20",children:e.jsx(re,{src:Te(i),alt:i.title,className:"w-full h-full"})}),e.jsxs("div",{className:"flex-1 p-6 flex flex-col justify-center",children:[e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:i.title}),e.jsx("div",{className:"mb-4",children:e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-orange-500/20 text-orange-400 rounded-full text-sm",children:[e.jsx("span",{children:"ðŸ•°ï¸"}),g(i)]})}),i.genres&&i.genres.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:i.genres.slice(0,3).map(o=>e.jsx("span",{className:"px-2 py-1 bg-gray-700/50 rounded text-xs text-gray-300",children:o.name},o.id))}),e.jsxs("div",{className:"space-y-2 mb-6 text-gray-300",children:[i.hoursPlayed&&e.jsxs("p",{children:["â±ï¸ ",Math.floor(i.hoursPlayed),"h played"]}),i.localSessionCount&&e.jsxs("p",{children:["ðŸŽ® ",i.localSessionCount," sessions"]}),i.playStatus&&e.jsxs("p",{children:["ðŸ“Š Status: ",i.playStatus]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:l,className:"px-6 py-3 bg-gradient-to-r from-orange-600 to-red-600 text-white rounded-lg font-semibold hover:opacity-90 transition-all",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"â–¶ï¸"}),"Play Now"]})}),r.length>1&&e.jsx("button",{onClick:m,className:"px-6 py-3 bg-gray-700 text-white rounded-lg font-semibold hover:bg-gray-600 transition-all",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:"ðŸ”„"}),"Show Another"]})})]})]})]})})]}):e.jsxs("section",{className:"mb-12",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ðŸ•°ï¸"}),"Rediscover Forgotten Games"]}),e.jsx("div",{className:"text-sm text-gray-400",children:"All games recently played"})]}),e.jsx("div",{className:"glass-morphism rounded-xl p-12 text-center",children:e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-6xl mb-4",children:"âœ¨"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Great job staying current!"}),e.jsx("p",{className:"text-gray-300",children:"All your games have been played recently. Come back later to rediscover forgotten favorites."})]})})]})},st=({libraryGames:a,personaProfile:s})=>{const[t,n]=f.useState([]),[r,i]=f.useState(!1),[l,m]=f.useState({budget:50,preferredGenres:[],preferredMoods:[],includeDiscounts:!0}),g=async()=>{i(!0);try{console.log("ðŸ›’ Loading enhanced purchase recommendations...");const o=s?.signals?.preferredGenres||[],d=s?.signals?.preferredMoods||[],h=await ne.getPurchaseRecommendations(a,l.preferredGenres.length>0?l.preferredGenres:o,l.preferredMoods.length>0?l.preferredMoods:d,l.budget,9);n(h),console.log("âœ… Purchase recommendations loaded:",h.length)}catch(o){console.error("âŒ Error loading purchase recommendations:",o),n([])}finally{i(!1)}};return f.useEffect(()=>{g()},[]),e.jsxs("div",{className:"glass-morphism rounded-xl p-6 cinematic-shadow",children:[e.jsx("div",{className:"flex items-center justify-between mb-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-xl",children:"ðŸ›’"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"What Should I Buy?"}),e.jsx("p",{className:"text-sm text-gray-400",children:"Personalized purchase recommendations"})]})]})}),e.jsxs("div",{className:"mb-6 p-4 bg-gray-800/50 rounded-lg",children:[e.jsx("h3",{className:"text-white font-medium mb-3",children:"Recommendation Preferences"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("label",{htmlFor:"budget-select",className:"text-gray-300 text-sm",children:"Max Budget ($)"}),e.jsxs("select",{id:"budget-select",value:l.budget,onChange:o=>m(d=>({...d,budget:Number(o.target.value)})),className:"bg-gray-700 text-white rounded px-3 py-2 text-sm","aria-label":"Select maximum budget for game recommendations",children:[e.jsx("option",{value:20,children:"$20"}),e.jsx("option",{value:30,children:"$30"}),e.jsx("option",{value:50,children:"$50"}),e.jsx("option",{value:70,children:"$70"}),e.jsx("option",{value:100,children:"$100+"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{id:"discounts-checkbox",type:"checkbox",checked:l.includeDiscounts,onChange:o=>m(d=>({...d,includeDiscounts:o.target.checked})),className:"rounded","aria-describedby":"discounts-description"}),e.jsx("label",{htmlFor:"discounts-checkbox",className:"text-gray-300 text-sm",children:"Show Discounts ðŸ·ï¸"}),e.jsx("span",{id:"discounts-description",className:"sr-only",children:"Include games that are currently on discount in recommendations"})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"Recommendations based on your gaming profile"}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsx("span",{className:"bg-blue-600/20 text-blue-400 px-2 py-1 rounded",children:"Your Genres"}),e.jsx("span",{className:"bg-purple-600/20 text-purple-400 px-2 py-1 rounded",children:"Your Moods"}),e.jsx("span",{className:"bg-green-600/20 text-green-400 px-2 py-1 rounded",children:"Play History"})]})]})]}),e.jsx("button",{onClick:g,disabled:r,className:"mt-4 px-4 py-2 bg-green-600 hover:bg-green-700 disabled:bg-gray-600 text-white rounded-lg text-sm font-medium transition-colors",children:r?"ðŸ”„ Refreshing...":"ðŸ”„ Refresh Recommendations"})]}),r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"animate-spin w-8 h-8 border-2 border-green-500 border-t-transparent rounded-full mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400",children:"Finding perfect games for you..."})]}):t.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.map((o,d)=>e.jsxs("div",{className:"glass-morphism rounded-lg overflow-hidden border border-gray-700 hover:border-green-500/50 transition-colors group",children:[e.jsxs("div",{className:"relative aspect-[16/9] bg-gradient-to-br from-gray-800 to-gray-900 overflow-hidden",children:[e.jsx("img",{src:o.headerImage,alt:o.title,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),o.discountPercent&&o.discountPercent>0&&e.jsx("div",{className:"absolute top-2 left-2",children:e.jsxs("div",{className:"px-2 py-1 bg-red-600/90 backdrop-blur-sm rounded-full text-xs font-bold text-white border border-red-400",children:["-",o.discountPercent,"%"]})}),o.metacriticScore&&e.jsx("div",{className:"absolute top-2 right-2",children:e.jsx("div",{className:`px-2 py-1 backdrop-blur-sm rounded-full text-xs font-bold ${o.metacriticScore>=80?"bg-green-600/90 text-white border border-green-400":o.metacriticScore>=60?"bg-yellow-600/90 text-white border border-yellow-400":"bg-red-600/90 text-white border border-red-400"}`,children:o.metacriticScore})}),e.jsx("div",{className:"absolute bottom-2 right-2",children:e.jsx("div",{className:"px-2 py-1 bg-black/70 backdrop-blur-sm rounded-full text-xs",children:e.jsxs("span",{className:"text-green-400 font-medium",children:[Math.round(o.alignmentScore*100),"% match"]})})})]}),e.jsxs("div",{className:"p-4",children:[e.jsx("h3",{className:"text-white font-semibold text-sm line-clamp-2 mb-2 group-hover:text-green-400 transition-colors",children:o.title}),e.jsx("div",{className:"flex items-center gap-2 mb-2",children:o.discountPercent&&o.discountPercent>0?e.jsxs(e.Fragment,{children:[e.jsxs("span",{className:"text-green-400 font-bold text-lg",children:["$",(o.price/100).toFixed(2)]}),e.jsxs("span",{className:"text-gray-500 line-through text-sm",children:["$",(o.originalPrice/100).toFixed(2)]})]}):e.jsxs("span",{className:"text-white font-bold text-lg",children:["$",(o.price/100).toFixed(2)]})}),e.jsx("p",{className:"text-gray-300 text-xs line-clamp-3 mb-3",children:o.description}),e.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[o.genres.slice(0,2).map(h=>e.jsx("span",{className:"px-2 py-1 bg-blue-600/20 text-blue-400 rounded text-xs",children:h},h)),o.platforms.includes("windows")&&e.jsx("span",{className:"px-2 py-1 bg-gray-600/20 text-gray-400 rounded text-xs",children:"Windows"})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-400 mb-3",children:[e.jsxs("span",{children:["ðŸŽ­ ",o.moodSuitability]}),e.jsxs("span",{children:["â±ï¸ ",o.estimatedPlaytime]})]}),e.jsx("p",{className:"text-gray-300 text-xs line-clamp-2 mb-3 italic",children:o.reasoning}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("a",{href:`https://store.steampowered.com/app/${o.appId}`,target:"_blank",rel:"noopener noreferrer",className:"w-full flex items-center justify-between px-3 py-2 bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 text-white rounded-lg text-sm font-medium transition-all duration-200 shadow-lg hover:shadow-xl",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"ðŸ›’"}),"Buy on Steam"]}),e.jsx("span",{className:"text-xs opacity-90",children:"Official Store"})]}),o.affiliateLinks.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs text-gray-400 font-medium",children:"Alternative Stores:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:o.affiliateLinks.slice(0,4).map((h,p)=>e.jsxs("a",{href:h.url,target:"_blank",rel:"noopener noreferrer",className:`flex items-center justify-center gap-1 px-2 py-2 bg-gradient-to-r ${h.color} hover:opacity-90 text-white rounded text-xs font-medium transition-all duration-200 shadow-md hover:shadow-lg`,title:`Check on ${h.label} - ${h.commission} commission`,children:[e.jsx("span",{className:"text-sm",children:h.icon}),e.jsx("span",{className:"truncate",children:h.label})]},h.store))}),o.affiliateLinks.length>4&&e.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["+",o.affiliateLinks.length-4," more options"]})]})]})]})]},o.appId))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-xl mx-auto mb-4 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl",children:"ðŸ”"})}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No Recommendations Yet"}),e.jsx("p",{className:"text-gray-400",children:"Try adjusting your preferences or play more games to get better recommendations."})]}),e.jsx("div",{className:"mt-6 pt-6 border-t border-gray-700",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{className:"text-center p-3 bg-green-600/90 rounded-lg border-2 border-green-400 shadow-lg",children:[e.jsx("div",{className:"text-green-100 font-bold mb-1",children:"ðŸŽ® Games Found"}),e.jsx("div",{className:"text-white font-medium",children:t.length}),e.jsx("div",{className:"text-green-100 text-sm",children:"Steam recommendations"})]}),e.jsxs("div",{className:"text-center p-3 bg-blue-600/90 rounded-lg border-2 border-blue-400 shadow-lg",children:[e.jsx("div",{className:"text-blue-100 font-bold mb-1",children:"ðŸŽ¯ Avg Match"}),e.jsxs("div",{className:"text-white font-medium",children:[t.length>0?Math.round(t.reduce((o,d)=>o+d.alignmentScore,0)/t.length*100):0,"%"]}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Personal compatibility"})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-600/90 rounded-lg border-2 border-purple-400 shadow-lg",children:[e.jsx("div",{className:"text-purple-100 font-bold mb-1",children:"ï¿½ï¸ On Sale"}),e.jsx("div",{className:"text-white font-medium",children:t.filter(o=>o.discountPercent&&o.discountPercent>0).length}),e.jsx("div",{className:"text-purple-100 text-sm",children:"Discounted games"})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-600/90 rounded-lg border-2 border-orange-400 shadow-lg",children:[e.jsx("div",{className:"text-orange-100 font-bold mb-1",children:"â­ Avg Rating"}),e.jsx("div",{className:"text-white font-medium",children:t.length>0&&Math.round(t.filter(o=>o.metacriticScore).reduce((o,d)=>o+(d.metacriticScore||0),0)/t.filter(o=>o.metacriticScore).length)||"N/A"}),e.jsx("div",{className:"text-orange-100 text-sm",children:"Metacritic score"})]})]})})]})},at=()=>{Ne();const{user:a,persona:s}=Se(),{games:t,actions:n}=X(),{integrations:r}=Le(),{profile:i}=Ae(),{showSuccess:l,showError:m}=Pe(),g=$e(),o=ae();Ye();const d=g.persona||s||o,[h,p]=f.useState([]);f.useEffect(()=>{a&&(async()=>{if(a?.integrations?.some(b=>b.platform==="steam"))try{const b=a.integrations.find(w=>w.platform==="steam");if(b?.externalUserId){const w=await ne.getRecentlyPlayedSteamGames(b.externalUserId);p(w),console.log("ðŸŽ® Loaded Steam recently played games:",w.length)}}catch(b){console.warn("Failed to fetch Steam recently played games:",b)}})()},[a]);const x=f.useMemo(()=>Ie(t||[]),[t]),I=f.useMemo(()=>{if(!d||!d.signals)return null;try{return Ce(d.signals)}catch(u){return console.warn("Failed to generate persona context:",u),null}},[d]),M=async u=>{if(!u?.id||!u?.title){m("Invalid game data");return}try{l(`Launching ${u.title}...`),n.updateGame(u.id,{...u,lastPlayed:new Date().toISOString(),lastPlayedAt:Date.now()}),u.appId?(await Re(u.appId),l(`${u.title} launched successfully!`)):m(`No launch ID available for ${u.title}`)}catch{m(`Failed to launch ${u.title}`)}},v=u=>{const b=new Date;let w=0;for(let S=0;S<30;S++){const P=new Date(b);P.setDate(b.getDate()-S);const L=P.toDateString();if(u.some(A=>A.lastPlayed?new Date(A.lastPlayed).toDateString()===L:!1))w++;else if(S>0)break}return w},T=(u,b,w,S)=>{const P=[],L=u.filter(c=>c.lastPlayed?(Date.now()-new Date(c.lastPlayed).getTime())/(1e3*60*60*24)<=7:!1);return L.length>0&&P.push(`${L.length} games played this week`),w&&b&&P.push(`Love ${w} games for ${b} vibes`),S>100?P.push(`Dedicated gamer with ${S}+ hours`):S>50?P.push(`${S} hours of adventure`):P.push(`Growing library with ${S} hours played`),b==="intense"?P.push("Thrill-seeking gamer"):b==="relaxing"?P.push("Casual gaming enthusiast"):b==="strategic"&&P.push("Tactical mastermind"),P[0]||"Ready for new gaming adventures"},F=f.useMemo(()=>{if(!x.length)return null;const u={};x.forEach(k=>{(k.moods||[]).forEach(C=>{u[C]=(u[C]||0)+1})});const b=Object.entries(u).sort(([,k],[,G])=>G-k)[0]?.[0]||"balanced",w={};x.forEach(k=>{(k.genres||[]).forEach(C=>{const _=typeof C=="string"?C:C.name;_&&(w[_.toLowerCase()]=(w[_.toLowerCase()]||0)+1)})});const S=Object.entries(w).sort(([,k],[,G])=>G-k)[0],P=S?S[0]:"action",L=x.reduce((k,G)=>k+(G.playtime||0),0),c=v(x),A=T(x,b,P,L);return{dominantMood:b,topGenre:P,totalHours:L,currentStreak:c,microInsight:A}},[x,I]),$=f.useMemo(()=>{if(h.length>0){const b=h[0],w=x.find(S=>S.appId===b.appid||S.title.toLowerCase().includes(b.name.toLowerCase()));if(w)return console.log("ðŸŽ® Using Steam recently played game:",b.name),{...w,lastPlayed:new Date(b.last_played*1e3),hoursPlayed:b.playtime_forever/60,totalPlaytime:b.playtime_forever/60}}return console.log("ðŸŽ® Using local game data for last played game"),[...x].sort((b,w)=>{const S=b.lastPlayedAt||(b.lastPlayed?new Date(b.lastPlayed).getTime():0);return(w.lastPlayedAt||(w.lastPlayed?new Date(w.lastPlayed).getTime():0))-S})[0]},[x,h]),y=f.useMemo(()=>[{id:"streak",title:"5-Day Streak",icon:"ðŸ”¥",color:"bg-orange-500"},{id:"mood",title:"Mood Explorer",icon:"ðŸŽ­",color:"bg-purple-500"},{id:"genre",title:"Genre Master",icon:"ðŸŽ®",color:"bg-blue-500"}],[]),R=()=>i?.preferredGreeting||a?.displayName||a?.username||"Gamer",j=f.useMemo(()=>{const u=i?.greetingPhrases||["Ready to crush some games?","Time to level up!","Let the gaming begin!","Ready for an adventure?","Let's make gaming history!"],S=new Date().toDateString().split("").reduce((P,L)=>P+L.charCodeAt(0),0)%u.length;return u[S]},[i?.greetingPhrases]);return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gaming-dark via-gray-900 to-gaming-darker relative overflow-hidden",children:[e.jsx("div",{className:"fixed inset-0 overflow-hidden pointer-events-none"}),e.jsxs("div",{className:"relative z-10 px-8 py-8",children:[e.jsxs(E.section,{className:"text-center mb-8",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-4",children:[e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-white",children:["Welcome back, ",R()," ðŸŽ®"]})," "]}),e.jsx("p",{className:"text-xl text-gray-300",children:j})]}),F&&e.jsx(E.section,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"gaming-card rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸŽ®"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Gaming Style"}),e.jsx("div",{className:"text-lg font-semibold text-white capitalize",children:F.dominantMood})]}),e.jsxs("div",{className:"gaming-card rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸŽ¯"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Top Genre"}),e.jsx("div",{className:"text-lg font-semibold text-white capitalize",children:F.topGenre.charAt(0).toUpperCase()+F.topGenre.slice(1)})]}),e.jsxs("div",{className:"gaming-card rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ”¥"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Current Streak"}),e.jsxs("div",{className:"text-lg font-semibold text-white",children:[F.currentStreak," days"]})]}),e.jsxs("div",{className:"gaming-card rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl mb-2",children:"â±ï¸"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Hours"}),e.jsxs("div",{className:"text-lg font-semibold text-white",children:[F.totalHours,"h"]})]}),e.jsxs("div",{className:"gaming-card rounded-xl p-4 text-center md:col-span-1 col-span-2",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ’¡"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Micro-Insight"}),e.jsx("div",{className:"text-sm font-semibold text-white",children:F.microInsight})]})]})}),e.jsx(E.section,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsx(Je,{})}),e.jsx(E.section,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsx(tt,{games:x,onLaunchGame:M})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 mb-12",children:[e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"gaming-card rounded-xl p-6 border border-green-500/30",children:[e.jsxs("h3",{className:"text-lg font-gaming font-semibold text-white mb-6 uppercase tracking-wider flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full animate-pulse"}),"Surprise Me"]}),e.jsx(Ze,{games:x,onLaunchGame:M})]})}),e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"gaming-card rounded-xl p-6 border border-blue-500/30",children:[e.jsxs("h3",{className:"text-lg font-gaming font-semibold text-white mb-6 uppercase tracking-wider flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"What Should I Buy Next?"]}),e.jsx(st,{libraryGames:x,personaProfile:d})]})}),$&&e.jsx(E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"gaming-card rounded-xl p-6 border border-purple-500/30",children:[e.jsxs("h3",{className:"text-lg font-gaming font-semibold text-white mb-6 uppercase tracking-wider flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full"}),"Continue Playing"]}),e.jsxs("div",{className:"flex gap-4 items-center",children:[$.coverImage?e.jsx("img",{src:$.coverImage,alt:$.title,className:"w-20 h-24 rounded-lg object-cover shadow-lg"}):e.jsx("div",{className:"w-20 h-24 bg-gray-700 rounded-lg flex items-center justify-center",children:e.jsx("span",{className:"text-3xl",children:"ðŸŽ®"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-xl font-bold text-white mb-2",children:$.title}),e.jsx("div",{className:"text-sm text-gray-400 mb-4",children:$.genres?.slice(0,2).map(u=>e.jsx("span",{className:"inline-block bg-gray-600 px-2 py-1 rounded mr-2 mb-1",children:typeof u=="string"?u:u.name},typeof u=="string"?u:u.name))}),e.jsxs("button",{onClick:()=>M($),className:"px-6 py-3 bg-gradient-to-r from-purple-600 to-purple-700 hover:from-purple-700 hover:to-purple-800 text-white font-bold rounded-xl shadow-lg transform hover:scale-105 transition-all",children:[e.jsx("span",{className:"mr-2",children:"â–¶ï¸"}),"Resume Session"]})]})]})]})})]}),e.jsx(E.section,{className:"mb-12",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h3",{className:"text-lg font-gaming font-semibold text-white mb-6 uppercase tracking-wider text-center",children:"Recent Achievements"}),e.jsx("div",{className:"grid grid-cols-3 gap-4",children:y.map((u,b)=>e.jsxs(E.div,{className:"gaming-card rounded-xl p-6 text-center border border-white/10",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},children:[e.jsx("div",{className:`w-16 h-16 ${u.color} rounded-full flex items-center justify-center mx-auto mb-4`,children:e.jsx("span",{className:"text-2xl",children:u.icon})}),e.jsx("div",{className:"text-sm font-semibold text-white",children:u.title})]},u.id))})]})})]})]})},ht=()=>e.jsx(at,{});export{ht as Home};
